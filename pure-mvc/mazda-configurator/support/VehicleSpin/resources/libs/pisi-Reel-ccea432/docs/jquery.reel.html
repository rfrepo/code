<!DOCTYPE html>  <html> <head>   <title>jquery.reel.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jQuery Reel <!--%= title %-->             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id='section-1'>             <td class="docs">                 <ul class="navigation">          <li>           <a href="#Methods">Methods</a>           <ul>            <li><a href="#Construction"><code>.reel([options])</code></a></li>            <li><a href="#Destruction"><code>.unreel()</code></a></li>           </ul>          </li>          <li>           <a href="#Options">Options</a>           <ul>            <li><a href="#Annotations"><code>annotations</code></a></li>            <li><a href="#Customization"><code>area</code></a></li>            <li><a href="#Customization"><code>attr</code></a></li>            <li><a href="#Momentum"><code>brake</code></a></li>            <li><a href="#Interaction"><code>clickfree</code></a></li>            <li><a href="#Order-of-Images"><code>cw</code></a></li>            <li><a href="#Customization"><code>cursor</code></a></li>            <li><a href="#Animation"><code>delay</code></a></li>            <li><a href="#Directional-Mode"><code>directional</code></a></li>            <li><a href="#Interaction"><code>draggable</code></a></li>            <li><a href="#Opening-Animation"><code>entry</code></a></li>            <li><a href="#Sprite-Layout"><code>footage</code></a></li>            <li><a href="#Basic-Definition"><code>frame</code></a></li>            <li><a href="#Basic-Definition"><code>frames</code></a></li>            <li><a href="#Mathematics"><code>graph</code></a></li>            <li><a href="#Customization"><code>hint</code></a></li>            <li><a href="#Sprite-Layout"><code>horizontal</code></a></li>            <li><a href="#Sprite-Layout"><code>image</code></a></li>            <li><a href="#Sequence"><code>images</code></a></li>            <li><a href="#Customization"><code>indicator</code></a></li>            <li><a href="#Dual-Orbit-Mode"><code>inversed</code></a></li>            <li><a href="#Customization"><code>klass</code></a></li>            <li><a href="#Basic-Definition"><code>loops</code></a></li>            <li><a href="#Monitor"><code>monitor</code></a></li>            <li><a href="#Opening-Animation"><code>opening</code></a></li>            <li><a href="#Dual-Orbit-Mode"><code>orbital</code></a></li>            <li><a href="#Sequence"><code>path</code></a></li>            <li><a href="#Images-Preload-Order"><code>preload</code></a></li>            <li><a href="#Customization"><code>preloader</code></a></li>            <li><a href="#Animation"><code>rebound</code></a></li>            <li><a href="#Sensitivity"><code>revolution</code></a></li>            <li><a href="#Multi-Row-Mode"><code>row</code></a></li>            <li><a href="#Multi-Row-Mode"><code>rows</code></a></li>            <li><a href="#Interaction"><code>scrollable</code></a></li>            <li><a href="#Sprite-Layout"><code>spacing</code></a></li>            <li><a href="#Animation"><code>speed</code></a></li>            <li><a href="#Deprecated-Options"><code>step</code></a></li>            <li><a href="#Interaction"><code>steppable</code></a></li>            <li><a href="#Deprecated-Options"><code>steps</code></a></li>            <li><a href="#Rectilinear-Panorama"><code>stitched</code></a></li>            <li><a href="#Sprite-Layout"><code>suffix</code></a></li>            <li><a href="#Ticker"><code>tempo</code></a></li>            <li><a href="#Interaction"><code>throwable</code></a></li>            <li><a href="#Animation"><code>timeout</code></a></li>            <li><a href="#Momentum"><code>velocity</code></a></li>            <li><a href="#Dual-Orbit-Mode"><code>vertical</code></a></li>            <li><a href="#Interaction"><code>wheelable</code></a></li>           </ul>          </li>          <li>           <a href="#Events">Events</a>           <ul>            <li><a href="#down-Event"><code>down</code></a></li>            <li><a href="#loaded-Event"><code>loaded</code></a></li>            <li><a href="#opening-Event"><code>opening</code></a></li>            <li><a href="#openingDone-Event"><code>openingDone</code></a></li>            <li><a href="#pan-Event"><code>pan</code></a></li>            <li><a href="#pause-Event"><code>pause</code></a></li>            <li><a href="#play-Event"><code>play</code></a></li>            <li><a href="#preload-Event"><code>preload</code></a></li>            <li><a href="#preloaded-Event"><code>preloaded</code></a></li>            <li><a href="#setup-Event"><code>setup</code></a></li>            <li><a href="#stepLeft-Event"><code>stepLeft</code></a></li>            <li><a href="#stepRight-Event"><code>stepRight</code></a></li>            <li><a href="#stop-Event"><code>stop</code></a></li>            <li><a href="#teardown-Event"><code>teardown</code></a></li>            <li><a href="#up-Event"><code>up</code></a></li>            <li><a href="#wheel-Event"><code>wheel</code></a></li>           </ul>          </li>          <li>           <a href="#$.reel">Global Namespace</a>           <ul>            <li><a href="#Content-Delivery-Network"><code>cdn</code></a></li>            <li><a href="#Reel-Instances"><code>cost</code></a></li>            <li><a href="#Options"><code>def</code></a></li>            <li><a href="#Methods"><code>fn</code></a></li>            <li><a href="#Reel-Instances"><code>instances</code></a></li>            <li><a href="#Reel-Instances"><code>leader</code></a></li>            <li><a href="#Math"><code>math</code></a></li>            <li><a href="#Data-Value-Normalization"><code>normal</code></a></li>            <li><a href="#Preloading-Modes"><code>preload</code></a></li>            <li><a href="#Regular-Expressions"><code>re</code></a></li>            <li><a href="#Sequence-Build-up"><code>sequence()</code></a></li>            <li><a href="#$.reel.version"><code>version</code></a></li>           </ul>          </li>         </ul>                                    </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/**</span>
<span class="cm">          @@@@@@@@@@@@@@</span>
<span class="cm">      @@@@@@@@@@@@@@@@@@@@@@</span>
<span class="cm">    @@@@@@@@          @@@@@@@@</span>
<span class="cm">  @@@@@@@                @@@@@@@</span>
<span class="cm"> @@@@@@@                  @@@@@@@</span>
<span class="cm"> @@@@@@@                  @@@@@@@</span>
<span class="cm"> @@@@@@@@     @          @@@@@@@@</span>
<span class="cm">  @@@@@@@@@  @@@       @@@@@@@@@</span>
<span class="cm">   @@@@@@@@@@@@@@   @@@@@@@@@@@</span>
<span class="cm">     @@@@@@@@@@@@@    @@@@@@@</span>
<span class="cm">       @@@@@@@@@@@@     @@@</span>
<span class="cm">          @@@@@@</span>
<span class="cm">         @@@@</span>
<span class="cm">        @@</span>
<span class="cm"> *</span>
<span class="cm"> * jQuery Reel</span>
<span class="cm"> * ===========</span>
<span class="cm"> * The 360Â° plugin for jQuery</span>
<span class="cm"> *</span>
<span class="cm"> * @license Copyright (c) 2009-2013 Petr Vostrel (http://petr.vostrel.cz/)</span>
<span class="cm"> * Dual licensed under the MIT (MIT-LICENSE.txt)</span>
<span class="cm"> * and GPL (GPL-LICENSE.txt) licenses.</span>
<span class="cm"> *</span>
<span class="cm"> * jQuery Reel</span>
<span class="cm"> * http://jquery.vostrel.cz/reel</span>
<span class="cm"> * Version: 1.2.1</span>
<span class="cm"> * Updated: 2013-02-23</span>
<span class="cm"> *</span>
<span class="cm"> * Requires jQuery 1.5 or higher</span>
<span class="cm"> */</span>

<span class="cm">/*</span>
<span class="cm"> * CDN</span>
<span class="cm"> * ---</span>
<span class="cm"> * - http://code.vostrel.cz/jquery.reel-bundle.js (recommended)</span>
<span class="cm"> * - http://code.vostrel.cz/jquery.reel.js</span>
<span class="cm"> * - http://code.vostrel.cz/jquery.reel-debug.js</span>
<span class="cm"> * - or http://code.vostrel.cz/jquery.reel-edge.js if you feel like it ;)</span>
<span class="cm"> *</span>
<span class="cm"> * Optional Plugins</span>
<span class="cm"> * ----------------</span>
<span class="cm"> * - jQuery.mouseWheel [B] (Brandon Aaron, http://plugins.jquery.com/project/mousewheel)</span>
<span class="cm"> * - or jQuery.event.special.wheel (Three Dub Media, http://blog.threedubmedia.com/2008/08/eventspecialwheel.html)</span>
<span class="cm"> *</span>
<span class="cm"> * [B] Marked plugins are contained (with permissions) in the &quot;bundle&quot; version from the CDN</span>
<span class="cm"> */</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">reel</span> <span class="o">||</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id='section-2'>             <td class="docs">                       <p>One vital requirement is the correct jQuery. Reel requires at least version 1.5
and a make sure check is made at the very beginning.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">$</span> <span class="o">||</span> <span class="o">+</span><span class="nx">$</span><span class="p">().</span><span class="nx">jquery</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nx">__</span><span class="p">).</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id='section-3'>             <td class="docs">                       <p><code>$.reel</code> (or <code>jQuery.reel</code>) namespace is provided for storage of all Reel belongings.
It is locally referenced as just <code>reel</code> for speedier access.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span>
    <span class="nx">reel</span><span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">reel</span><span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='reel-version'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-version">&#182;</a>                </div>                       <h3><code>$.reel.version</code></h3>

<p><code>String</code> (major.minor.patch), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">version</span><span class="o">:</span> <span class="s1">&#39;1.2-devel&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Options'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Options">&#182;</a>                </div>                       <h2>Options</h2>

<p>When calling <code>.reel()</code> method you have plenty of options (far too many) available.
You collect them into one hash and supply them with your call.</p>

<p><strong><em>Example:</strong> For a non-looping Reel with 12 frames:</em></p>

<pre><code>.reel({
  frames: 12,
  looping: false
})
</code></pre>

<p>All options are optional and if omitted, default value is used instead.
Defaults are being housed as members of <code>$.reel.def</code> hash.
If you customize any default value therein, all subsequent <code>.reel()</code> calls
will use the new value as default.</p>

<p><strong><em>Example:</strong> Change default initial frame to 5th:</em></p>

<pre><code>$.reel.def.frame = 5
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-def'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-def">&#182;</a>                </div>                       <h3><code>$.reel.def</code></h3>

<p><code>Object</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">def</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='Basic-Definition'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Basic-Definition">&#182;</a>                </div>                       <hr />

<h3>Basic Definition</h3>

<p>Reel is just fine with you not setting any options, however if you don't have
36 frames or beginning at frame 1, you will want to set total number
of <code>frames</code> and pick a different starting <code>frame</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='frame-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#frame-Option">&#182;</a>                </div>                       <h4><code>frame</code> Option</h4>

<p><code>Number</code> (frames), since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">frame</span><span class="o">:</span>                  <span class="mi">1</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='frames-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#frames-Option">&#182;</a>                </div>                       <h4><code>frames</code> Option</h4>

<p><code>Number</code> (frames), since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">frames</span><span class="o">:</span>                <span class="mi">36</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-10'>             <td class="docs">                       <p>~~~</p>

<p>Another common characteristics of any Reel is whether it <code>loops</code> and covers
entire 360Â° or not.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='loops-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#loops-Option">&#182;</a>                </div>                       <h4><code>loops</code> Option</h4>

<p><code>Boolean</code>, since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">loops</span><span class="o">:</span>               <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Interaction'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Interaction">&#182;</a>                </div>                       <hr />

<h3>Interaction</h3>

<p>Using boolean switches many user interaction aspects can be turned on and off.
You can disable the mouse wheel control with <code>wheelable</code>, the drag &amp; throw
action with <code>throwable</code>, disallow the dragging completely with <code>draggable</code>,
on "touchy" devices you can disable the browser's decision to scroll the page
instead of Reel script and you can of course disable the stepping of Reel by
clicking on either half of the image with <code>steppable</code>.</p>

<p>You can even enable <code>clickfree</code> operation,
which will cause Reel to bind to mouse enter/leave events instead of mouse down/up,
thus allowing a click-free dragging.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='clickfree-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#clickfree-Option">&#182;</a>                </div>                       <h4><code>clickfree</code> Option</h4>

<p><code>Boolean</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">clickfree</span><span class="o">:</span>          <span class="kc">false</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='draggable-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#draggable-Option">&#182;</a>                </div>                       <h4><code>draggable</code> Option</h4>

<p><code>Boolean</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">draggable</span><span class="o">:</span>           <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='scrollable-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#scrollable-Option">&#182;</a>                </div>                       <h4><code>scrollable</code> Option</h4>

<p>[NEW] <code>Boolean</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">scrollable</span><span class="o">:</span>          <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='steppable-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#steppable-Option">&#182;</a>                </div>                       <h4><code>steppable</code> Option</h4>

<p>[NEW] <code>Boolean</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">steppable</span><span class="o">:</span>           <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='throwable-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#throwable-Option">&#182;</a>                </div>                       <h4><code>throwable</code> Option</h4>

<p><code>Boolean</code>, since 1.1; or <code>Number</code>, since 1.2.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">throwable</span><span class="o">:</span>           <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='wheelable-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#wheelable-Option">&#182;</a>                </div>                       <h4><code>wheelable</code> Option</h4>

<p><code>Boolean</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">wheelable</span><span class="o">:</span>           <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Order-of-Images'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Order-of-Images">&#182;</a>                </div>                       <hr />

<h3>Order of Images</h3>

<p>Reel presumes counter-clockwise order of the pictures taken. If the neerer facing
side doesn't follow your cursor/finger, you did clockwise. Use the <code>cw</code> option to
correct this.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='cw-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#cw-Option">&#182;</a>                </div>                       <h4><code>cw</code> Option</h4>

<p><code>Boolean</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">cw</span><span class="o">:</span>                 <span class="kc">false</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Sensitivity'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Sensitivity">&#182;</a>                </div>                       <hr />

<h3>Sensitivity</h3>

<p>In Reel sensitivity is set through the <code>revolution</code> parameter, which represents horizontal
dragging distance one must cover to perform one full revolution. By default this value
is calculated based on the setup you have - it is either twice the width of the image
or half the width of stitched panorama. You may also set your own.</p>

<p>Optionally <code>revolution</code> can be set as an Object with <code>x</code> member for horizontal revolution
and/or <code>y</code> member for vertical revolution in multi-row movies.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='revolution-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#revolution-Option">&#182;</a>                </div>                       <h4><code>revolution</code> Option</h4>

<p><code>Number</code> (pixels) or <code>Object</code>, since 1.1, <code>Object</code> support since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">revolution</span><span class="o">:</span>     <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Rectilinear-Panorama'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Rectilinear-Panorama">&#182;</a>                </div>                       <hr />

<h3>Rectilinear Panorama</h3>

<p>The easiest of all is the stitched panorama mode. For this mode, instead of the sprite,
a single seamlessly stitched stretched image is used and the view scrolls the image.
This mode is triggered by setting a pixel width of the <code>stitched</code> image.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='stitched-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#stitched-Option">&#182;</a>                </div>                       <h4><code>stitched</code> Option</h4>

<p><code>Number</code> (pixels), since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">stitched</span><span class="o">:</span>               <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Directional-Mode'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Directional-Mode">&#182;</a>                </div>                       <hr />

<h3>Directional Mode</h3>

<p>As you may have noticed on Reel's homepage or in [this example][logo]
when you drag the arrow will point to either direction. In such <code>directional</code> mode, the sprite
is actually 2 in 1 - one file contains two sprites one tightly following the other, one
for visually going one way (<code>A</code>) and one for the other (<code>B</code>).</p>

<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15 B01 B02 B03
B04 B05 B06 B07 B08 B09
B10 B11 B12 B13 B14 B15
</code></pre>

<p>Switching between <code>A</code> and <code>B</code> frames is based on direction of the drag. Directional mode isn't
limited to sprites only, sequences also apply. The figure below shows the very same setup like
the above figure, only translated into actual frames of the sequence.</p>

<pre><code>001 002 003 004 005 006
007 008 009 010 011 012
013 014 015 016 017 018
019 020 021 022 023 024
025 026 027 028 029 030
</code></pre>

<p>Frame <code>016</code> represents the <code>B01</code> so it actually is first frame of the other direction.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='directional-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#directional-Option">&#182;</a>                </div>                       <h4><code>directional</code> Option</h4>

<p><code>Boolean</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">directional</span><span class="o">:</span>        <span class="kc">false</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Multi-Row-Mode'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Multi-Row-Mode">&#182;</a>                </div>                       <hr />

<h3>Multi-Row Mode</h3>

<p>As <code>example/object-movie-multirow-sequence</code> very nicely demonstrates, in multi-row arrangement you
can perform two-axis manipulation allowing you to add one or more vertical angles. Think of it as
a layered cake, each new elevation of the camera during shooting creates one layer of the cake -
- a <em>row</em>. One plain horizontal object movie full spin is one row:</p>

<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15
</code></pre>

<p>Second row tightly follows after the first one:</p>

<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15 B01 B02 B03
B04 B05 B06 B07 B08 B09
B10 B11 B12 B13 B14 B15
C01...
</code></pre>

<p>This way you stack up any number of <strong><code>rows</code></strong> you wish and set the initial <code>row</code> to start with.
Again, not limited to sprites, sequences also apply.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='row-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#row-Option">&#182;</a>                </div>                       <h4><code>row</code> Option</h4>

<p><code>Number</code> (rows), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">row</span><span class="o">:</span>                    <span class="mi">1</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='rows-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#rows-Option">&#182;</a>                </div>                       <h4><code>rows</code> Option</h4>

<p><code>Number</code> (rows), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">rows</span><span class="o">:</span>                   <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Dual-Orbit-Mode'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Dual-Orbit-Mode">&#182;</a>                </div>                       <hr />

<h3>Dual-Orbit Mode</h3>

<p>Special form of multi-axis movie is the dual-axis mode. In this mode the object offers two plain
spins - horizontal and vertical orbits combined together crossing each other at the <code>frame</code>
forming sort of a cross if envisioned. [This example][phone] demonstrate this setup. When the
phone in the example is facing you (marked in the example with green square in the top right),
you are at the center. That is within the distance (in frames) defined by the <code>orbital</code> option.
Translation from horizontal to vertical orbit can be achieved on this sweet-spot. By default
horizontal orbit is chosen first, unless <code>vertical</code> option is used against.</p>

<p>In case the image doesn't follow the vertical drag, you may have your vertical orbit <code>inversed</code>.</p>

<p>Technically it is just a two-layer movie:</p>

<pre><code>A01 A02 A03 A04 A05 A06
A07 A08 A09 A10 A11 A12
A13 A14 A15 B01 B02 B03
B04 B05 B06 B07 B08 B09
B10 B11 B12 B13 B14 B15
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='orbital-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#orbital-Option">&#182;</a>                </div>                       <h4><code>orbital</code> Option</h4>

<p><code>Number</code> (frames), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">orbital</span><span class="o">:</span>                <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='vertical-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#vertical-Option">&#182;</a>                </div>                       <h4><code>vertical</code> Option</h4>

<p><code>Boolean</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">vertical</span><span class="o">:</span>           <span class="kc">false</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='inversed-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#inversed-Option">&#182;</a>                </div>                       <h4><code>inversed</code> Option</h4>

<p><code>Boolean</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">inversed</span><span class="o">:</span>           <span class="kc">false</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Sprite-Layout'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Sprite-Layout">&#182;</a>                </div>                       <hr />

<h3>Sprite Layout</h3>

<p>For both object movies and panoramas Reel presumes you use a combined <em>Sprite</em> to hold all your
frames in a single file. This powerful technique of using a sheet of several individual images
has many advantages in terms of compactness, loading, caching, etc. However, know your enemy,
be also aware of the limitations, which stem from memory limits of mobile
(learn more in <a href="https://github.com/pisi/Reel/wiki/FAQ">FAQ</a>).</p>

<p>Inside the sprite, individual frames are laid down one by one, to the right of the previous one
in a straight <em>Line</em>:</p>

<pre><code>01 02 03 04 05 06
07...
</code></pre>

<p>Horizontal length of the line is reffered to as <code>footage</code>. Unless frames <code>spacing</code> in pixels
is set, edges of frames must touch.</p>

<pre><code>01 02 03 04 05 06
07 08 09 10 11 12
13 14 15 16 17 18
19 20 21 22 23 24
25 26 27 28 29 30
31 32 33 34 35 36
</code></pre>

<p>This is what you'll get by calling <code>.reel()</code> without any options. All frames laid out 6 in line.
By default nicely even 6 x 6 grid like, which also inherits the aspect ratio of your frames.</p>

<p>By setting <code>horizontal</code> to <code>false</code>, instead of forming lines, frames are expected to form
<em>Columns</em>. All starts at the top left corner in both cases.</p>

<pre><code>01 07 13 19 25 31
02 08 14 20 26 32
03 09 15 21 27 33
04 10 16 22 28 34
05 11 17 23 29 35
06 12 18 24 30 36
</code></pre>

<p>URL for the sprite image file is being build from the name of the original <code>&lt;img&gt;</code> <code>src</code> image
by adding a <code>suffix</code> to it. By default this results in <code>"object-reel.jpg"</code> for <code>"object.jpg"</code>.
You can also take full control over the sprite <code>image</code> URL that will be used.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='footage-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#footage-Option">&#182;</a>                </div>                       <h4><code>footage</code> Option</h4>

<p><code>Number</code> (frames), since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">footage</span><span class="o">:</span>                <span class="mi">6</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='spacing-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#spacing-Option">&#182;</a>                </div>                       <h4><code>spacing</code> Option</h4>

<p><code>Number</code> (pixels), since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">spacing</span><span class="o">:</span>                <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='horizontal-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#horizontal-Option">&#182;</a>                </div>                       <h4><code>horizontal</code> Option</h4>

<p><code>Boolean</code>, since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">horizontal</span><span class="o">:</span>          <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='suffix-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#suffix-Option">&#182;</a>                </div>                       <h4><code>suffix</code> Option</h4>

<p><code>String</code>, since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">suffix</span><span class="o">:</span>           <span class="s1">&#39;-reel&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='image-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#image-Option">&#182;</a>                </div>                       <h4><code>image</code> Option</h4>

<p><code>String</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">image</span><span class="o">:</span>          <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Sequence'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Sequence">&#182;</a>                </div>                       <hr />

<h3>Sequence</h3>

<p>Collection of individual frame images is called <em>Sequence</em> and it this way one HTTP request per
frame is made carried out as opposed to sprite with one request per entire sprite. Define it with
string like: <code>"image_###.jpg"</code>. The <code>#</code> placeholders will be replaced with a numeric +1 counter
padded to the placeholders length.
Learn more about <a href="Sequences">sequences</a>.</p>

<p>In case you work with hashed filenames like <code>64bc654d21cb.jpg</code>, where no counter element can
be indentified, or you prefer direct control, <code>images</code> can also accept array of plain URL strings.</p>

<p>All images are retrieved from a specified <code>path</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='images-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#images-Option">&#182;</a>                </div>                       <h4><code>images</code> Option</h4>

<p>[IMPROVED] <code>String</code> or <code>Array</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">images</span><span class="o">:</span>                <span class="s1">&#39;&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='path-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#path-Option">&#182;</a>                </div>                       <h4><code>path</code> Option</h4>

<p><code>String</code> (URL path), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">path</span><span class="o">:</span>                  <span class="s1">&#39;&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Images-Preload-Order'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Images-Preload-Order">&#182;</a>                </div>                       <hr />

<h3>Images Preload Order</h3>

<p>Given sequence images can be additionally reordered to achieve a perceived faster preloading.
Value given to <code>preload</code> option must match a name of a pre-registered function within
<code>$.reel.preload</code> object. There are two functions built-in:</p>

<ul>
<li><code>"fidelity"</code> - non-linear way that ensures even spreading of preloaded images around the entire
revolution leaving the gaps in-between as small as possible. This results in a gradually
increasing fidelity of the image rather than having one large shrinking gap. This is the default
behavior.</li>
<li><code>"linear"</code> - linear order of preloading</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='preload-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#preload-Option">&#182;</a>                </div>                       <h4><code>preload</code> Option</h4>

<p>[NEW] <code>String</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">preload</span><span class="o">:</span>       <span class="s1">&#39;fidelity&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Animation'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Animation">&#182;</a>                </div>                       <hr />

<h3>Animation</h3>

<p>Your object movie or a panorama can perform an autonomous sustained motion in one direction.
When <code>speed</code> is set in revolutions per second (Hz), after a given <code>delay</code> the instance will
animate and advance frames by itself.</p>

<pre><code>t
|-------âº|-----------âº
  Delay    Animation
</code></pre>

<p>Start and resume of animation happens when given <code>timeout</code> has elapsed since user became idle.</p>

<pre><code>t
|-----------âº|= == ==  = === = = |          |-----------âº
  Animation    User interaction    Timeout    Animation
</code></pre>

<p>When a scene doesn't loop (see <code>loops</code>) and the animation reaches one end, it stays there
for a while and then reversing the direction of the animation it bounces back towards the other
end. The time spent on the edge can be customized with <code>rebound</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='speed-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#speed-Option">&#182;</a>                </div>                       <h4><code>speed</code> Option</h4>

<p><code>Number</code> (Hz), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">speed</span><span class="o">:</span>                  <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='delay-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#delay-Option">&#182;</a>                </div>                       <h4><code>delay</code> Option</h4>

<p><code>Number</code> (seconds), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">delay</span><span class="o">:</span>                  <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='timeout-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#timeout-Option">&#182;</a>                </div>                       <h4><code>timeout</code> Option</h4>

<p><code>Number</code> (seconds), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">timeout</span><span class="o">:</span>                <span class="mi">2</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='rebound-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#rebound-Option">&#182;</a>                </div>                       <h4><code>rebound</code> Option</h4>

<p><code>Number</code> (seconds), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">rebound</span><span class="o">:</span>              <span class="mf">0.5</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Opening-Animation'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Opening-Animation">&#182;</a>                </div>                       <hr />

<h3>Opening Animation</h3>

<p>Chance is you want the object to spin a little to attract attention and then stop and wait
for the user to engage. This is called "opening animation" and it is performed for given number
of seconds (<code>opening</code>) at dedicated <code>entry</code> speed. The <code>entry</code> speed defaults to value of <code>speed</code>
option. After the opening animation has passed, regular animation procedure begins starting with
the delay (if any).</p>

<pre><code>t
|--------âº|-------âº|-----------âº
  Opening   Delay    Animation
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='entry-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#entry-Option">&#182;</a>                </div>                       <h4><code>entry</code> Option</h4>

<p><code>Number</code> (Hz), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">entry</span><span class="o">:</span>          <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='opening-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#opening-Option">&#182;</a>                </div>                       <h4><code>opening</code> Option</h4>

<p><code>Number</code> (seconds), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">opening</span><span class="o">:</span>                <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Momentum'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Momentum">&#182;</a>                </div>                       <hr />

<h3>Momentum</h3>

<p>Often also called inertial motion is a result of measuring a velocity of dragging. This velocity
builds up momentum, so when a drag is released, the image still retains the momentum and continues
to spin on itself. Naturally the momentum soon wears off as <code>brake</code> is being applied.</p>

<p>One can utilize this momentum for a different kind of an opening animation. By setting initial
<code>velocity</code>, the instance gets artificial momentum and spins to slow down to stop.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='brake-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#brake-Option">&#182;</a>                </div>                       <h4><code>brake</code> Option</h4>

<p><code>Number</code>, since 1.1, where it also has a different default <code>0.5</code></p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">brake</span><span class="o">:</span>               <span class="mf">0.23</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='velocity-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#velocity-Option">&#182;</a>                </div>                       <h4><code>velocity</code> Option</h4>

<p>[NEW] <code>Number</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">velocity</span><span class="o">:</span>               <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Ticker'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Ticker">&#182;</a>                </div>                       <hr />

<h3>Ticker</h3>

<p>For purposes of animation, Reel starts and maintains a timer device which emits ticks timing all
animations. There is only one ticker running in the document and all instances subscribe to this
one ticker. Ticker is equipped with a mechanism, which compensates for the  measured costs
of running Reels to ensure the ticker ticks on time. The <code>tempo</code> (in Hz) of the ticker can be
specified.</p>

<p>Please note, that ticker is synchronized with a <em>leader</em>, the oldest living instance on page,
and adjusts to his tempo.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='tempo-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#tempo-Option">&#182;</a>                </div>                       <h4><code>tempo</code> Option</h4>

<p><code>Number</code> (Hz, ticks per second), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">tempo</span><span class="o">:</span>                 <span class="mi">36</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-58'>             <td class="docs">                       <p>~~~</p>

<p>Since many mobile devices are sometimes considerably underpowered in comparison with desktops,
they often can keep up with the 36 Hz rhythm. In Reel these are called <strong>lazy devices</strong>
and everything mobile qualifies as lazy for the sake of the battery and interaction fluency.
The ticker is under-clocked for them by a <code>laziness</code> factor, which is used to divide the <code>tempo</code>.
Default <code>laziness</code> of <code>6</code> will effectively use 6 Hz instead (6 = 36 / 6) on lazy devices.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='laziness-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#laziness-Option">&#182;</a>                </div>                       <h4><code>laziness</code> Option</h4>

<p><code>Number</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">laziness</span><span class="o">:</span>               <span class="mi">6</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Customization'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Customization">&#182;</a>                </div>                       <hr />

<h3>Customization</h3>

<p>You can customize Reel on both functional and visual front. The most visible thing you can
customize is probably the <code>cursor</code>, size of the <code>preloader</code>, perhaps add visual <code>indicator</code>(s)
of Reel's position within the range. You can also set custom <code>hint</code> for the tooltip, which appears
when you mouse over the image area. Last but not least you can also add custom class name <code>klass</code>
to the instance.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='cursor-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#cursor-Option">&#182;</a>                </div>                       <h4><code>cursor</code> Option</h4>

<p>[NEW] <code>String</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">cursor</span><span class="o">:</span>         <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='hint-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#hint-Option">&#182;</a>                </div>                       <h4><code>hint</code> Option</h4>

<p><code>String</code>, since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">hint</span><span class="o">:</span>                  <span class="s1">&#39;&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='indicator-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#indicator-Option">&#182;</a>                </div>                       <h4><code>indicator</code> Option</h4>

<p><code>Number</code> (pixels), since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">indicator</span><span class="o">:</span>              <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='klass-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#klass-Option">&#182;</a>                </div>                       <h4><code>klass</code> Option</h4>

<p><code>String</code>, since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">klass</span><span class="o">:</span>                 <span class="s1">&#39;&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='preloader-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#preloader-Option">&#182;</a>                </div>                       <h4><code>preloader</code> Option</h4>

<p><code>Number</code> (pixels), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">preloader</span><span class="o">:</span>              <span class="mi">2</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-66'>             <td class="docs">                       <p>~~~</p>

<p>You can use custom attributes (<code>attr</code>) on the node - it accepts the same name-value pairs object
jQuery <code>.attr()</code> does. In case you want to delegate full interaction control over the instance
to some other DOM element(s) on page, you can with <code>area</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='area-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#area-Option">&#182;</a>                </div>                       <h4><code>area</code> Option</h4>

<p><code>jQuery</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">area</span><span class="o">:</span>           <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='attr-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#attr-Option">&#182;</a>                </div>                       <h4><code>attr</code> Option</h4>

<p>[NEW] <code>Object</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">attr</span><span class="o">:</span>                  <span class="p">{},</span></pre></div>             </td>           </tr>                               <tr id='Annotations'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Annotations">&#182;</a>                </div>                       <hr />

<h3>Annotations</h3>

<p>To further visually describe your scene you can place all kinds of in-picture HTML annotations
by defining an <code>annotations</code> object. Learn more about <a href="https://github.com/pisi/Reel/wiki/Annotations">Annotations</a> in a dedicated article.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='annotations-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#annotations-Option">&#182;</a>                </div>                       <h4><code>annotations</code> Option</h4>

<p>[NEW] <code>Object</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">annotations</span><span class="o">:</span>    <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Mathematics'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Mathematics">&#182;</a>                </div>                       <hr />

<h3>Mathematics</h3>

<p>When reeling, instance conforms to a graph function, which defines whether it will loop
(<code>$.reel.math.hatch</code>) or it won't (<code>$.reel.math.envelope</code>). My math is far from flawless
and I'm sure there are much better ways how to handle things. the <code>graph</code> option is there for you
shall you need it. It accepts a function, which should process given criteria and return
a fraction of 1.</p>

<pre><code>function( x, start, revolution, lo, hi, cwness, y ){
  return fraction  // 0.0 - 1.0
}
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='graph-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#graph-Option">&#182;</a>                </div>                       <h4><code>graph</code> Option</h4>

<p><code>Function</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">graph</span><span class="o">:</span>          <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Monitor'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Monitor">&#182;</a>                </div>                       <hr />

<h3>Monitor</h3>

<p>Specify a string data key and you will see its real-time value dumped in the upper-left corner
of the viewport. Its visual can be customized by CSS using <code>.jquery-reel-monitor</code> selector.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='monitor-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#monitor-Option">&#182;</a>                </div>                       <h4><code>monitor</code> Option</h4>

<p><code>String</code> (data key), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">monitor</span><span class="o">:</span>        <span class="kc">undefined</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Deprecated-Options'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Deprecated-Options">&#182;</a>                </div>                       <hr />

<h3>Deprecated Options</h3>

<p>Two options are currently deprecated in version 1.2. Learn more about <a href="https://github.com/pisi/Reel/wiki/Deprecations">Deprecations</a></p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='step-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#step-Option">&#182;</a>                </div>                       <h4><code>step</code> Option</h4>

<p><code>Number</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">step</span><span class="o">:</span>           <span class="kc">undefined</span><span class="p">,</span> <span class="c1">// use `frame` instead</span></pre></div>             </td>           </tr>                               <tr id='steps-Option'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#steps-Option">&#182;</a>                </div>                       <h4><code>steps</code> Option</h4>

<p><code>Number</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">steps</span><span class="o">:</span>          <span class="kc">undefined</span> <span class="c1">// use `frames` instead</span>

      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Methods'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Methods">&#182;</a>                </div>                       <hr />

<h2>Methods</h2>

<p>Reel's methods extend jQuery core functions with members of its <code>$.reel.fn</code> object. Despite Reel
being a typical one-method plug-in with its <code>.reel()</code> function, for convenience it also offers
its dipolar twin <code>.unreel()</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-fn'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-fn">&#182;</a>                </div>                       <h3><code>$.reel.fn</code></h3>

<p>returns <code>Object</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">fn</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='Construction'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Construction">&#182;</a>                </div>                       <hr />

<h2>Construction</h2>

<p><code>.reel()</code> method is the core of Reel and similar to some jQuery functions, this one is three-fold.
It either performs the following builder's duty or the <a href="#Data">data duty</a>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-Method'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-Method">&#182;</a>                </div>                       <h3><code>.reel()</code> Method</h3>

<p>returns <code>jQuery</code>, since 1.0</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">reel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id='section-82'>             <td class="docs">                       <p>The decision on what to actually do is made upon given arguments.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="kd">var</span>
            <span class="nx">args</span><span class="o">=</span> <span class="nx">arguments</span><span class="p">,</span>
            <span class="nx">t</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
            <span class="nx">data</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">data</span><span class="p">(),</span>
            <span class="nx">name</span><span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="p">{},</span>
            <span class="nx">value</span><span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

          <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">==</span> <span class="s1">&#39;object&#39;</span><span class="p">){</span>
          <span class="kd">var</span></pre></div>             </td>           </tr>                               <tr id='section-83'>             <td class="docs">                       <p>Establish local <code>opt</code> object made by extending the defaults.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">opt</span><span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">def</span><span class="p">,</span> <span class="nx">name</span><span class="p">),</span></pre></div>             </td>           </tr>                               <tr id='section-84'>             <td class="docs">                       <p>Limit the given jQuery collection to just <code>&lt;img&gt;</code> tags with <code>src</code> attribute
and dimensions defined.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">applicable</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">_img_</span><span class="p">).</span><span class="nx">unreel</span><span class="p">().</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
              <span class="kd">var</span>
                <span class="nx">$this</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span>
                <span class="nx">attr</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">attr</span><span class="p">,</span>
                <span class="nx">src</span><span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">src</span> <span class="o">||</span> <span class="nx">$this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">),</span>
                <span class="nx">width</span><span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">width</span> <span class="o">||</span> <span class="nx">$this</span><span class="p">.</span><span class="nx">width</span><span class="p">(),</span>
                <span class="nx">height</span><span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">height</span> <span class="o">||</span> <span class="nx">$this</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">width</span> <span class="o">&amp;&amp;</span> <span class="nx">height</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
            <span class="p">}),</span>
            <span class="nx">instances</span><span class="o">=</span> <span class="p">[]</span></pre></div>             </td>           </tr>                               <tr id='section-85'>             <td class="docs">                       <p>Backward-compatibility of [deprecated] legacy options</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">opt</span><span class="p">.</span><span class="nx">step</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">frame</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">step</span><span class="p">);</span>
          <span class="nx">opt</span><span class="p">.</span><span class="nx">steps</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">frames</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">steps</span><span class="p">);</span>

          <span class="nx">applicable</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
            <span class="kd">var</span>
              <span class="nx">t</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span></pre></div>             </td>           </tr>                               <tr id='section-86'>             <td class="docs">                       <p>Quick data interface</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">set</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span> <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">reel</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="p">},</span>
              <span class="nx">get</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span> <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">reel</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">},</span>

              <span class="nx">on</span><span class="o">=</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='Initialization'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Initialization">&#182;</a>                </div>                       <hr />

<h2>Initialization</h2>

<p>This internally called private pseudo-handler:</p>

<ul>
<li>initiates all data store keys</li>
<li>binds to ticker</li>
<li>triggers <code>"setup</code> Event when finished</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                  <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">klass</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_options_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">);</span>
                  <span class="kd">var</span>
                    <span class="nx">src</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">attr</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">),</span>
                    <span class="nx">id</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_id_</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">_id_</span><span class="p">)</span> <span class="o">||</span> <span class="nx">t</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">_id_</span><span class="p">,</span> <span class="nx">klass</span><span class="o">+</span><span class="s1">&#39;-&#39;</span><span class="o">+</span><span class="p">(</span><span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">())).</span><span class="nx">attr</span><span class="p">(</span><span class="nx">_id_</span><span class="p">)),</span>
                    <span class="nx">styles</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">_style_</span><span class="p">),</span>
                    <span class="nx">data</span><span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">t</span><span class="p">.</span><span class="nx">data</span><span class="p">()),</span>
                    <span class="nx">images</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">images</span><span class="p">,</span>
                    <span class="nx">stitched</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span><span class="p">,</span>
                    <span class="nx">loops</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">loops</span><span class="p">,</span>
                    <span class="nx">orbital</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span><span class="p">,</span>
                    <span class="nx">revolution</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">revolution</span><span class="p">,</span>
                    <span class="nx">rows</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span><span class="p">,</span>
                    <span class="nx">footage</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span><span class="p">,</span>
                    <span class="nx">sequence</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">sequence</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">images</span><span class="p">),</span>
                    <span class="nx">images</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_images_</span><span class="p">,</span> <span class="nx">sequence</span> <span class="o">?</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">sequence</span><span class="p">(</span><span class="nx">sequence</span><span class="p">,</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">get</span><span class="p">)</span> <span class="o">:</span> <span class="nx">images</span> <span class="o">||</span> <span class="p">[]),</span>
                    <span class="nx">size</span><span class="o">=</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="nx">t</span><span class="p">.</span><span class="nx">width</span><span class="p">(),</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">t</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span> <span class="p">},</span>
                    <span class="nx">frames</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">,</span> <span class="nx">orbital</span> <span class="o">&amp;&amp;</span> <span class="nx">footage</span> <span class="o">||</span> <span class="nx">rows</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">frames</span><span class="p">),</span>
                    <span class="nx">multirow</span><span class="o">=</span> <span class="nx">rows</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">orbital</span><span class="p">,</span>
                    <span class="nx">revolution_x</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_revolution_</span><span class="p">,</span> <span class="nx">axis</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="nx">revolution</span><span class="p">)</span> <span class="o">||</span> <span class="nx">stitched</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">size</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">),</span>
                    <span class="nx">revolution_y</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_revolution_y_</span><span class="p">,</span> <span class="o">!</span><span class="nx">multirow</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span><span class="nx">axis</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="nx">revolution</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">rows</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">?</span> <span class="nx">size</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">y</span> <span class="o">/</span> <span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="nx">rows</span><span class="p">)))),</span>
                    <span class="nx">rows</span><span class="o">=</span> <span class="nx">stitched</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">ceil</span><span class="p">(</span><span class="nx">frames</span> <span class="o">/</span> <span class="nx">footage</span><span class="p">),</span>
                    <span class="nx">stage_id</span><span class="o">=</span> <span class="nx">hash</span><span class="p">(</span><span class="nx">id</span><span class="o">+</span><span class="nx">opt</span><span class="p">.</span><span class="nx">suffix</span><span class="p">),</span>
                    <span class="nx">classes</span><span class="o">=</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">className</span> <span class="o">||</span> <span class="nx">__</span><span class="p">,</span>
                    <span class="nx">$overlay</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="nx">_div_</span><span class="p">),</span> <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">stage_id</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nx">classes</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">overlay_klass</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">frame_klass</span><span class="o">+</span><span class="s1">&#39;0&#39;</span> <span class="p">}),</span>
                    <span class="nx">$instance</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">wrap</span><span class="p">(</span><span class="nx">$overlay</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">klass</span><span class="p">)).</span><span class="nx">attr</span><span class="p">({</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nx">klass</span> <span class="p">}),</span>
                    <span class="nx">instances_count</span><span class="o">=</span> <span class="nx">instances</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">add_instance</span><span class="p">(</span><span class="nx">$instance</span><span class="p">)[</span><span class="mi">0</span><span class="p">]),</span>
                    <span class="nx">$overlay</span><span class="o">=</span> <span class="nx">$instance</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">bind</span><span class="p">(</span><span class="nx">on</span><span class="p">.</span><span class="nx">instance</span><span class="p">)</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_image_</span><span class="p">,</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">__</span> <span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">image</span> <span class="o">||</span> <span class="nx">src</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">image</span><span class="p">,</span> <span class="s1">&#39;$1&#39;</span> <span class="o">+</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">suffix</span> <span class="o">+</span> <span class="s1">&#39;.$2&#39;</span><span class="p">));</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_cached_</span><span class="p">,</span> <span class="p">[]);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_spacing_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">spacing</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_rows_</span><span class="p">,</span> <span class="nx">rows</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">,</span> <span class="nx">size</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_bit_</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">frames</span> <span class="o">-</span> <span class="p">(</span><span class="nx">loops</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">stitched</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)));</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_stitched_travel_</span><span class="p">,</span> <span class="nx">stitched</span> <span class="o">-</span> <span class="p">(</span><span class="nx">loops</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">x</span><span class="p">));</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_stitched_shift_</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_stage_</span><span class="p">,</span> <span class="nx">stage_id</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">,</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_speed_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">speed</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_velocity_</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_vertical_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">vertical</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_cwish_</span><span class="p">,</span> <span class="nx">negative_when</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">cw</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">stitched</span><span class="p">));</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_location_</span><span class="p">,</span> <span class="p">{});</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_on_</span><span class="p">,</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_tier_</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_lo_</span><span class="p">,</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_hi_</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_reeling_</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_reeled_</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_opening_</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_brake_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">brake</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_center_</span><span class="p">,</span> <span class="o">!!</span><span class="nx">orbital</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_tempo_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">tempo</span> <span class="o">/</span> <span class="p">(</span><span class="nx">reel</span><span class="p">.</span><span class="nx">lazy</span><span class="o">?</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">laziness</span> <span class="o">:</span> <span class="mi">1</span><span class="p">));</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_opening_ticks_</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_annotations_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">annotations</span> <span class="o">||</span> <span class="nx">$overlay</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">dot</span><span class="p">(</span><span class="nx">_annotations_</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">{});</span>
                  <span class="nx">set</span><span class="p">(</span><span class="nx">_backup_</span><span class="p">,</span> <span class="p">{</span>
                    <span class="nx">src</span><span class="o">:</span> <span class="nx">src</span><span class="p">,</span>
                    <span class="nx">classes</span><span class="o">:</span> <span class="nx">classes</span><span class="p">,</span>
                    <span class="nx">style</span><span class="o">:</span> <span class="nx">styles</span> <span class="o">||</span> <span class="nx">__</span><span class="p">,</span>
                    <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span>
                  <span class="p">});</span>
                  <span class="nx">opt</span><span class="p">.</span><span class="nx">steppable</span> <span class="o">||</span> <span class="nx">$overlay</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s1">&#39;up.steppable&#39;</span><span class="p">);</span>
                  <span class="nx">opt</span><span class="p">.</span><span class="nx">indicator</span> <span class="o">||</span> <span class="nx">$overlay</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s1">&#39;.indicator&#39;</span><span class="p">);</span>
                  <span class="nx">css</span><span class="p">(</span><span class="nx">__</span><span class="p">,</span> <span class="p">{</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">size</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">overflow</span><span class="o">:</span> <span class="nx">_hidden_</span><span class="p">,</span> <span class="nx">position</span><span class="o">:</span> <span class="s1">&#39;relative&#39;</span> <span class="p">});</span>
                  <span class="nx">css</span><span class="p">(</span><span class="nx">____</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">klass</span><span class="p">),</span> <span class="p">{</span> <span class="nx">display</span><span class="o">:</span> <span class="nx">_block_</span> <span class="p">});</span>
                  <span class="nx">pool</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">on</span><span class="p">.</span><span class="nx">pool</span><span class="p">);</span>
                  <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;setup&#39;</span><span class="p">);</span>
                <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Initialization-Events'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Initialization-Events">&#182;</a>                </div>                       <hr />

<h2>Initialization Events</h2>

<p>Reel is completely event-driven meaning there are many events, which can be called
(triggered). By binding event handler to any of the events you can easily hook on to any
event to inject your custom behavior where and when this event was triggered.
<em>For example to make <code>#image</code> element reel and execute some code right after the newly
created instance is initialized and completely loaded:</em></p>

<pre><code>$("#image")
.reel()
.bind("loaded", function(ev){
  // Your code
})
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-89'>             <td class="docs">                       <p>Events bound to all individual instances.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">instance</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='teardown-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#teardown-Event">&#182;</a>                </div>                       <h3><code>teardown</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>This event does do how it sounds like. It will teardown an instance with all its
belongings leaving no trace.</p>

<ul>
<li>It reconstructs the original <code>&lt;img&gt;</code> element,</li>
<li>wipes out the data store,</li>
<li>removes instance stylesheet</li>
<li>and unbinds all its events.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">backup</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">_backup_</span><span class="p">)</span>
                    <span class="nx">t</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">on</span><span class="p">.</span><span class="nx">instance</span><span class="p">);</span>
                    <span class="nx">get</span><span class="p">(</span><span class="nx">_style_</span><span class="p">).</span><span class="nx">remove</span><span class="p">();</span>
                    <span class="nx">get</span><span class="p">(</span><span class="nx">_area_</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">ns</span><span class="p">);</span>
                    <span class="nx">remove_instance</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">ns</span><span class="p">).</span><span class="nx">removeData</span><span class="p">().</span><span class="nx">siblings</span><span class="p">().</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">ns</span><span class="p">).</span><span class="nx">remove</span><span class="p">().</span><span class="nx">end</span><span class="p">().</span><span class="nx">attr</span><span class="p">({</span>
                     <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nx">backup</span><span class="p">.</span><span class="nx">classes</span><span class="p">,</span>
                      <span class="nx">src</span><span class="o">:</span> <span class="nx">backup</span><span class="p">.</span><span class="nx">src</span><span class="p">,</span>
                      <span class="nx">style</span><span class="o">:</span> <span class="nx">backup</span><span class="p">.</span><span class="nx">style</span>
                    <span class="p">}).</span><span class="nx">data</span><span class="p">(</span><span class="nx">backup</span><span class="p">.</span><span class="nx">data</span><span class="p">).</span><span class="nx">unwrap</span><span class="p">());</span>
                    <span class="nx">no_bias</span><span class="p">();</span>
                    <span class="nx">pool</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">on</span><span class="p">.</span><span class="nx">pool</span><span class="p">);</span>
                    <span class="nx">pools</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">pns</span><span class="p">);</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='setup-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#setup-Event">&#182;</a>                </div>                       <h3><code>setup</code> Event</h3>

<p><code>Event</code>, since 1.0</p>

<p><code>"setup</code> Event continues with what has been started by the private <code>on.setup()</code>
handler.</p>

<ul>
<li>It prepares all additional on-stage DOM elements,</li>
<li>and cursors for the instance stylesheet.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">),</span>
                      <span class="nx">frames</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">),</span>
                      <span class="nx">id</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">_id_</span><span class="p">),</span>
                      <span class="nx">rows</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span><span class="p">,</span>
                      <span class="nx">stitched</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span><span class="p">,</span>
                      <span class="nx">$overlay</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">parent</span><span class="p">(),</span>
                      <span class="nx">$area</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_area_</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">area</span> <span class="o">||</span> <span class="nx">$overlay</span> <span class="p">)),</span>
                      <span class="nx">rows</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span> <span class="o">||</span> <span class="mi">1</span>
                    <span class="nx">css</span><span class="p">(</span><span class="nx">___</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">klass</span><span class="p">),</span> <span class="p">{</span> <span class="nx">MozUserSelect</span><span class="o">:</span> <span class="nx">_none_</span><span class="p">,</span> <span class="nx">WebkitUserSelect</span><span class="o">:</span> <span class="nx">_none_</span> <span class="p">});</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">touchy</span><span class="p">){</span></pre></div>             </td>           </tr>                               <tr id='section-92'>             <td class="docs">                       <p>workaround for downsizing-sprites-bug-in-iPhoneOS inspired by Katrin Ackermann</p>             </td>             <td class="code">               <div class="highlight"><pre>                      <span class="nx">css</span><span class="p">(</span><span class="nx">___</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">klass</span><span class="p">),</span> <span class="p">{</span> <span class="nx">WebkitBackgroundSize</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_images_</span><span class="p">).</span><span class="nx">length</span>
                        <span class="o">?</span> <span class="o">!</span><span class="nx">stitched</span> <span class="o">?</span> <span class="kc">undefined</span> <span class="o">:</span> <span class="nx">px</span><span class="p">(</span><span class="nx">stitched</span><span class="p">)</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">px</span><span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
                        <span class="o">:</span> <span class="nx">stitched</span> <span class="o">&amp;&amp;</span> <span class="nx">px</span><span class="p">(</span><span class="nx">stitched</span><span class="p">)</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">px</span><span class="p">((</span><span class="nx">space</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">spacing</span><span class="p">)</span> <span class="o">*</span> <span class="nx">rows</span> <span class="o">-</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">spacing</span><span class="p">)</span>
                        <span class="o">||</span> <span class="nx">px</span><span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span><span class="p">)</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">px</span><span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_rows_</span><span class="p">)</span> <span class="o">*</span> <span class="nx">rows</span> <span class="o">*</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">directional</span><span class="o">?</span> <span class="mi">2</span><span class="o">:</span><span class="mi">1</span><span class="p">))</span>
                      <span class="p">});</span>
                      <span class="nx">$area</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">_touchstart_</span><span class="p">,</span> <span class="nx">press</span><span class="p">)</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                      <span class="kd">var</span>
                        <span class="nx">cursor</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">cursor</span><span class="p">,</span>
                        <span class="nx">cursor_up</span><span class="o">=</span> <span class="nx">cursor</span> <span class="o">==</span> <span class="nx">_hand_</span> <span class="o">?</span> <span class="nx">drag_cursor</span> <span class="o">:</span> <span class="nx">cursor</span> <span class="o">||</span> <span class="nx">reel_cursor</span><span class="p">,</span>
                        <span class="nx">cursor_down</span><span class="o">=</span> <span class="nx">cursor</span> <span class="o">==</span> <span class="nx">_hand_</span> <span class="o">?</span> <span class="nx">drag_cursor_down</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="s1">&#39;!important&#39;</span> <span class="o">:</span> <span class="kc">undefined</span>
                      <span class="nx">css</span><span class="p">(</span><span class="nx">__</span><span class="p">,</span> <span class="p">{</span> <span class="nx">cursor</span><span class="o">:</span> <span class="nx">cdn</span><span class="p">(</span><span class="nx">cursor_up</span><span class="p">)</span> <span class="p">});</span>
                      <span class="nx">css</span><span class="p">(</span><span class="nx">dot</span><span class="p">(</span><span class="nx">loading_klass</span><span class="p">),</span> <span class="p">{</span> <span class="nx">cursor</span><span class="o">:</span> <span class="s1">&#39;wait&#39;</span> <span class="p">});</span>
                      <span class="nx">css</span><span class="p">(</span><span class="nx">dot</span><span class="p">(</span><span class="nx">panning_klass</span><span class="p">)</span><span class="o">+</span><span class="nx">____</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">panning_klass</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; *&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">cursor</span><span class="o">:</span> <span class="nx">cdn</span><span class="p">(</span><span class="nx">cursor_down</span> <span class="o">||</span> <span class="nx">cursor_up</span><span class="p">)</span> <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
                      <span class="nx">$area</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">wheelable</span> <span class="o">?</span> <span class="nx">_mousewheel_</span> <span class="o">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">wheel</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">clickfree</span> <span class="o">?</span> <span class="nx">_mouseenter_</span> <span class="o">:</span> <span class="nx">_mousedown_</span><span class="p">,</span> <span class="nx">press</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;dragstart&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">false</span> <span class="p">})</span>
                    <span class="p">}</span>
                    <span class="kd">function</span> <span class="nx">press</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;down&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">finger</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">clientX</span><span class="p">,</span> <span class="nx">finger</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">clientY</span><span class="p">,</span> <span class="nx">e</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">give</span> <span class="p">}</span>
                    <span class="kd">function</span> <span class="nx">wheel</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">delta</span><span class="p">){</span> <span class="k">return</span> <span class="o">!</span><span class="nx">delta</span> <span class="o">||</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;wheel&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">delta</span><span class="p">,</span> <span class="nx">e</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">give</span> <span class="p">}</span>
                    <span class="nx">opt</span><span class="p">.</span><span class="nx">hint</span> <span class="o">&amp;&amp;</span> <span class="nx">$area</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">hint</span><span class="p">);</span>
                    <span class="nx">opt</span><span class="p">.</span><span class="nx">indicator</span> <span class="o">&amp;&amp;</span> <span class="nx">$overlay</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">indicator</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">));</span>
                    <span class="nx">rows</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">indicator</span> <span class="o">&amp;&amp;</span> <span class="nx">$overlay</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">indicator</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">));</span>
                    <span class="nx">opt</span><span class="p">.</span><span class="nx">monitor</span> <span class="o">&amp;&amp;</span> <span class="nx">$overlay</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$monitor</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="nx">_div_</span><span class="p">),</span> <span class="p">{</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nx">monitor_klass</span> <span class="p">}))</span>
                                <span class="o">&amp;&amp;</span> <span class="nx">css</span><span class="p">(</span><span class="nx">___</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">monitor_klass</span><span class="p">),</span> <span class="p">{</span> <span class="nx">position</span><span class="o">:</span> <span class="nx">_absolute_</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span> <span class="p">});</span>
                    <span class="nx">css</span><span class="p">(</span><span class="nx">___</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">cached_klass</span><span class="p">),</span> <span class="p">{</span> <span class="nx">display</span><span class="o">:</span> <span class="nx">_none_</span> <span class="p">});</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='preload-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#preload-Event">&#182;</a>                </div>                       <h3><code>preload</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>Reel keeps a cache of all images it needs for its operation. Either a sprite or all
sequence images. Physically, this cache is made up of a hidden <code>&lt;img&gt;</code> sibling for each
preloaded image. It first determines the order of requesting the images and then
asynchronously loads all of them.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">preload</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                  <span class="cm">/*</span>
<span class="cm">                  - preloads all frames and sprites</span>
<span class="cm">                  */</span>
                    <span class="kd">var</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">),</span>
                      <span class="nx">$overlay</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">parent</span><span class="p">(),</span>
                      <span class="nx">images</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_images_</span><span class="p">),</span>
                      <span class="nx">is_sprite</span><span class="o">=</span> <span class="o">!</span><span class="nx">images</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
                      <span class="nx">frames</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">),</span>
                      <span class="nx">footage</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span><span class="p">,</span>
                      <span class="nx">order</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">preload</span><span class="p">[</span><span class="nx">opt</span><span class="p">.</span><span class="nx">preload</span><span class="p">]</span> <span class="o">||</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">preload</span><span class="p">[</span><span class="nx">reel</span><span class="p">.</span><span class="nx">def</span><span class="p">.</span><span class="nx">preload</span><span class="p">],</span>
                      <span class="nx">preload</span><span class="o">=</span> <span class="nx">is_sprite</span> <span class="o">?</span> <span class="p">[</span><span class="nx">get</span><span class="p">(</span><span class="nx">_image_</span><span class="p">)]</span> <span class="o">:</span> <span class="nx">order</span><span class="p">(</span><span class="nx">images</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">get</span><span class="p">),</span>
                      <span class="nx">to_load</span><span class="o">=</span> <span class="nx">preload</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
                      <span class="nx">preloaded</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">,</span> <span class="nx">is_sprite</span> <span class="o">?</span> <span class="mf">0.5</span> <span class="o">:</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="nx">uris</span><span class="o">=</span> <span class="p">[]</span>
                    <span class="nx">$overlay</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">loading_klass</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">preloader</span><span class="p">());</span></pre></div>             </td>           </tr>                               <tr id='section-94'>             <td class="docs">                       <p>It also finalizes the instance stylesheet and prepends it to the head.</p>             </td>             <td class="code">               <div class="highlight"><pre>                    <span class="nx">set</span><span class="p">(</span><span class="nx">_style_</span><span class="p">,</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="o">+</span><span class="nx">_style_</span><span class="o">+</span><span class="s1">&#39; type=&quot;text/css&quot;&gt;&#39;</span><span class="o">+</span><span class="nx">css</span><span class="p">.</span><span class="nx">rules</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/&#39;</span><span class="o">+</span><span class="nx">_style_</span><span class="o">+</span><span class="s1">&#39;&gt;&#39;</span><span class="p">).</span><span class="nx">prependTo</span><span class="p">(</span><span class="nx">_head_</span><span class="p">));</span>
                    <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;stop&#39;</span><span class="p">);</span>
                    <span class="k">while</span><span class="p">(</span><span class="nx">preload</span><span class="p">.</span><span class="nx">length</span><span class="p">){</span>
                      <span class="kd">var</span>
                        <span class="nx">uri</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">path</span><span class="o">+</span><span class="nx">preload</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span>
                        <span class="nx">width</span><span class="o">=</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_sprite</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">footage</span><span class="p">),</span>
                        <span class="nx">height</span><span class="o">=</span> <span class="nx">space</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_sprite</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">frames</span> <span class="o">/</span> <span class="nx">footage</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">directional</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">2</span><span class="p">),</span>
                        <span class="nx">$img</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="nx">_img_</span><span class="p">)).</span><span class="nx">attr</span><span class="p">({</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nx">cached_klass</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">width</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">height</span> <span class="p">}).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$overlay</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id='section-95'>             <td class="docs">                       <p>Each image, which finishes the load triggers <code>"preloaded</code> Event.</p>             </td>             <td class="code">               <div class="highlight"><pre>                      <span class="nx">$img</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;load error abort&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
                        <span class="k">return</span> <span class="o">!!</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;preloaded&#39;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span><span class="p">;</span>
                      <span class="p">});</span>
                      <span class="nx">load</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">$img</span><span class="p">);</span>
                      <span class="nx">uris</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">uri</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="nx">set</span><span class="p">(</span><span class="nx">_cached_</span><span class="p">,</span> <span class="nx">uris</span><span class="p">);</span>
                    <span class="kd">function</span> <span class="nx">load</span><span class="p">(</span><span class="nx">uri</span><span class="p">,</span> <span class="nx">$img</span><span class="p">){</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                      <span class="nx">$img</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">$img</span><span class="p">.</span><span class="nx">attr</span><span class="p">({</span> <span class="nx">src</span><span class="o">:</span> <span class="nx">reen</span><span class="p">(</span><span class="nx">uri</span><span class="p">)</span> <span class="p">});</span>
                    <span class="p">},</span> <span class="p">(</span><span class="nx">to_load</span> <span class="o">-</span> <span class="nx">preload</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="p">}</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='preloaded-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#preloaded-Event">&#182;</a>                </div>                       <h3><code>preloaded</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>This event is fired by every preloaded image and adjusts the preloader indicator's
target position. Once all images are preloaded, <code>"loaded</code> Event is triggered.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">preloaded</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">images</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_images_</span><span class="p">).</span><span class="nx">length</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
                      <span class="nx">preloaded</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">,</span> <span class="nx">min</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">images</span><span class="p">))</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">preloaded</span> <span class="o">===</span> <span class="nx">images</span><span class="p">){</span>
                      <span class="nx">t</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">loading_klass</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">,</span> <span class="nx">on</span><span class="p">.</span><span class="nx">instance</span><span class="p">.</span><span class="nx">preloaded</span><span class="p">);</span>
                      <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;loaded&#39;</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">preloaded</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="kd">var</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;frameChange&#39;</span><span class="p">,</span> <span class="p">[</span><span class="kc">undefined</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">)])</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='loaded-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#loaded-Event">&#182;</a>                </div>                       <h3><code>loaded</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p><code>"loaded</code> Event is the one announcing when the instance is "locked and loaded".
At this time, all is prepared, preloaded and configured for user interaction
or animation.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">loaded</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="nx">get</span><span class="p">(</span><span class="nx">_images_</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">t</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span> <span class="nx">backgroundImage</span><span class="o">:</span> <span class="nx">url</span><span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">path</span><span class="o">+</span><span class="nx">get</span><span class="p">(</span><span class="nx">_image_</span><span class="p">))</span> <span class="p">}).</span><span class="nx">attr</span><span class="p">({</span> <span class="nx">src</span><span class="o">:</span> <span class="nx">cdn</span><span class="p">(</span><span class="nx">transparent</span><span class="p">)</span> <span class="p">});</span>
                    <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">attr</span><span class="p">({</span> <span class="nx">src</span><span class="o">:</span> <span class="nx">cdn</span><span class="p">(</span><span class="nx">transparent</span><span class="p">)</span> <span class="p">});</span>
                    <span class="nx">get</span><span class="p">(</span><span class="nx">_reeled_</span><span class="p">)</span> <span class="o">||</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_velocity_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">velocity</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Animation-Events'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Animation-Events">&#182;</a>                </div>                       <hr />

<h2>Animation Events</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='opening-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#opening-Event">&#182;</a>                </div>                       <h3><code>opening</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>When <a href="#Opening-Animation">opening animation</a> is configured for the instance, <code>"opening"</code>
event engages the animation by pre-calculating some of its properties, which will make
the tick handler</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">opening</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                  <span class="cm">/*</span>
<span class="cm">                  - initiates opening animation</span>
<span class="cm">                  - or simply plays the reel when without opening</span>
<span class="cm">                  */</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">opening</span><span class="p">)</span> <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;openingDone&#39;</span><span class="p">);</span>
                    <span class="kd">var</span>
                      <span class="nx">opening</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_opening_</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span>
                      <span class="nx">stopped</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_stopped_</span><span class="p">,</span> <span class="o">!</span><span class="nx">get</span><span class="p">(</span><span class="nx">_speed_</span><span class="p">)),</span>
                      <span class="nx">speed</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">entry</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">speed</span><span class="p">,</span>
                      <span class="nx">end</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">),</span>
                      <span class="nx">duration</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">opening</span><span class="p">,</span>
                      <span class="nx">start</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">end</span> <span class="o">-</span> <span class="nx">speed</span> <span class="o">*</span> <span class="nx">duration</span><span class="p">),</span>
                      <span class="nx">ticks</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_opening_ticks_</span><span class="p">,</span> <span class="nx">ceil</span><span class="p">(</span><span class="nx">duration</span> <span class="o">*</span> <span class="nx">leader</span><span class="p">(</span><span class="nx">_tempo_</span><span class="p">)))</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='openingDone-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#openingDone-Event">&#182;</a>                </div>                       <h3><code>openingDone</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p><code>"openingDone"</code> is fired onceWhen <a href="#Opening-Animation">opening animation</a> is configured for the instance, <code>"opening"</code>
event engages the animation by pre-calculating some of its properties, which will make
the tick handler</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">openingDone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">playing</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_playing_</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span>
                      <span class="nx">opening</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_opening_</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span>
                      <span class="nx">evnt</span><span class="o">=</span> <span class="nx">_tick_</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">_opening_</span><span class="p">)</span>
                    <span class="nx">pool</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">evnt</span><span class="p">,</span> <span class="nx">on</span><span class="p">.</span><span class="nx">pool</span><span class="p">[</span><span class="nx">evnt</span><span class="p">]);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">delay</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">delay</span><span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;play&#39;</span><span class="p">)</span> <span class="p">},</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">delay</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
                    <span class="k">else</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;play&#39;</span><span class="p">);</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Playback-Control-Events'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Playback-Control-Events">&#182;</a>                </div>                       <hr />

<h2>Playback Control Events</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='play-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#play-Event">&#182;</a>                </div>                       <h3><code>play</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p><code>"play"</code> event can optionally accept a <code>speed</code> parameter (in Hz) to change the animation
speed on the fly.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">play</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">speed</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">speed</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_speed_</span><span class="p">,</span> <span class="nx">speed</span> <span class="o">||</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_speed_</span><span class="p">)),</span>
                      <span class="nx">duration</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span>
                      <span class="nx">backwards</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">,</span> <span class="nx">speed</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="nx">playing</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_playing_</span><span class="p">,</span> <span class="o">!!</span><span class="nx">speed</span><span class="p">),</span>
                      <span class="nx">stopped</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_stopped_</span><span class="p">,</span> <span class="o">!</span><span class="nx">playing</span><span class="p">)</span>
                    <span class="nx">idle</span><span class="p">();</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='pause-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#pause-Event">&#182;</a>                </div>                       <h3><code>pause</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>Triggering <code>"pause"</code> event will halt the playback for a time period designated
by the <code>timeout</code> option. After this timenout, the playback is resumed again.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">pause</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="nx">unidle</span><span class="p">();</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='stop-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#stop-Event">&#182;</a>                </div>                       <h3><code>stop</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>After <code>"stop"</code> event is triggered, the playback stops and stays still until <code>"play"</code>ed again.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">stopped</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_stopped_</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span>
                      <span class="nx">playing</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_playing_</span><span class="p">,</span> <span class="o">!</span><span class="nx">stopped</span><span class="p">)</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Human-Interaction-Events'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Human-Interaction-Events">&#182;</a>                </div>                       <hr />

<h2>Human Interaction Events</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='down-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#down-Event">&#182;</a>                </div>                       <h3><code>down</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>Marks the very beginning of touch or mouse interaction. It receives <code>x</code> and <code>y</code>
coordinates in arguments. It:</p>

<ul>
<li>calibrates the center point (origin),</li>
<li>considers user active not idle,</li>
<li>flags the <code>&lt;html&gt;</code> tag with <code>.reel-panning</code> class name,</li>
<li>and binds dragging events for move and lift. These
are usually bound to the pool (document itself) to get a consistent treating regardless
the event target element. However in click-free mode, it binds directly to the instance.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">down</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">ev</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">ev</span> <span class="o">&amp;&amp;</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">button</span> <span class="o">!=</span> <span class="nx">DRAG_BUTTON</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">clickfree</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">draggable</span><span class="p">){</span>
                      <span class="kd">var</span>
                        <span class="nx">clicked</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">)),</span>
                        <span class="nx">clickfree</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">clickfree</span><span class="p">,</span>
                        <span class="nx">velocity</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_velocity_</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                        <span class="nx">origin</span><span class="o">=</span> <span class="nx">last</span><span class="o">=</span> <span class="nx">recenter_mouse</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_revolution_</span><span class="p">),</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
                      <span class="nx">touchy</span> <span class="o">||</span> <span class="nx">ev</span> <span class="o">&amp;&amp;</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
                      <span class="nx">unidle</span><span class="p">();</span>
                      <span class="nx">no_bias</span><span class="p">();</span>
                      <span class="nx">panned</span><span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                      <span class="nx">$</span><span class="p">(</span><span class="nx">_html_</span><span class="p">,</span> <span class="nx">pools</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">panning_klass</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id='section-107'>             <td class="docs">                       <p>Browser events differ for touch and mouse, but both of them are treated equally and
forwarded to the same <code>"pan"</code> or <code>"up</code> Events.</p>             </td>             <td class="code">               <div class="highlight"><pre>                      <span class="k">if</span> <span class="p">(</span><span class="nx">touchy</span><span class="p">){</span>
                        <span class="nx">pools</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">_touchmove_</span><span class="p">,</span> <span class="nx">drag</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">_touchend_</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">_touchcancel_</span><span class="p">,</span> <span class="nx">lift</span><span class="p">)</span>
                      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                        <span class="p">(</span><span class="nx">clickfree</span> <span class="o">?</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_area_</span><span class="p">)</span> <span class="o">:</span> <span class="nx">pools</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">_mousemove_</span><span class="p">,</span> <span class="nx">drag</span><span class="p">)</span>
                        <span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">clickfree</span> <span class="o">?</span> <span class="nx">_mouseleave_</span> <span class="o">:</span> <span class="nx">_mouseup_</span><span class="p">,</span> <span class="nx">lift</span><span class="p">)</span>
                      <span class="p">}</span>
                    <span class="p">}</span>
                    <span class="kd">function</span> <span class="nx">drag</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;pan&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">finger</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">clientX</span><span class="p">,</span> <span class="nx">finger</span><span class="p">(</span><span class="nx">e</span><span class="p">).</span><span class="nx">clientY</span><span class="p">,</span> <span class="nx">e</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">give</span> <span class="p">}</span>
                    <span class="kd">function</span> <span class="nx">lift</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">e</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">give</span> <span class="p">}</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='up-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#up-Event">&#182;</a>                </div>                       <h3><code>up</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>This marks the termination of user's interaction. She either released the mouse button
or lift the finger of the touch screen. This event handler:</p>

<ul>
<li>calculates the velocity of the drag at that very moment,</li>
<li>removes the <code>.reel-panning</code> class from <code>&lt;body&gt;</code>,</li>
<li>and unbinds dragging events from the pool.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">up</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">ev</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">clicked</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span>
                      <span class="nx">reeling</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_reeling_</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span>
                      <span class="nx">throwable</span> <span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">throwable</span><span class="p">,</span>
                      <span class="nx">biases</span><span class="o">=</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">bias</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">bias</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">60</span><span class="p">,</span>
                      <span class="nx">velocity</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_velocity_</span><span class="p">,</span> <span class="o">!</span><span class="nx">throwable</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">throwable</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">?</span> <span class="nx">biases</span> <span class="o">:</span> <span class="nx">min</span><span class="p">(</span><span class="nx">throwable</span><span class="p">,</span> <span class="nx">biases</span><span class="p">)),</span>
                      <span class="nx">brakes</span><span class="o">=</span> <span class="nx">braking</span><span class="o">=</span> <span class="nx">velocity</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span>
                    <span class="nx">unidle</span><span class="p">();</span>
                    <span class="nx">no_bias</span><span class="p">();</span>
                    <span class="nx">$</span><span class="p">(</span><span class="nx">_html_</span><span class="p">,</span> <span class="nx">pools</span><span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">panning_klass</span><span class="p">);</span>
                    <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">clickfree</span> <span class="o">?</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_area_</span><span class="p">)</span> <span class="o">:</span> <span class="nx">pools</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">pns</span><span class="p">);</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='pan-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#pan-Event">&#182;</a>                </div>                       <h3><code>pan</code> Event</h3>

<p>[RENAMED] <code>Event</code>, since 1.2</p>

<p>Regardles the actual source of movement (mouse or touch), this event is always triggered
in response and similar to the <code>"down</code> Event it receives <code>x</code> and <code>y</code> coordinates
in arguments and in addition it is passed a reference to the original browser event.
This handler:</p>

<ul>
<li>syncs with timer to achieve good performance,</li>
<li>calculates the distance from drag center and applies graph on it to get <code>fraction</code>,</li>
<li>recenters the drag when dragged over limits,</li>
<li>detects the direction of the motion,</li>
<li>and builds up inertial motion bias.</li>
</ul>

<p>Historically <code>pan</code> was once called <code>slide</code> (conflicted with Mootools - <a href="https://github.com/pisi/Reel/issues/51">GH-51</a>)
or <code>drag</code> (that conflicted with MSIE).</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">pan</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">ev</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">draggable</span> <span class="o">&amp;&amp;</span> <span class="nx">slidable</span><span class="p">){</span>
                      <span class="nx">slidable</span><span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                      <span class="nx">unidle</span><span class="p">();</span>
                      <span class="kd">var</span>
                        <span class="nx">rows</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span><span class="p">,</span>
                        <span class="nx">orbital</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span><span class="p">,</span>
                        <span class="nx">scrollable</span><span class="o">=</span> <span class="nx">touchy</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">get</span><span class="p">(</span><span class="nx">_reeling_</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">rows</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">orbital</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">scrollable</span><span class="p">,</span>
                        <span class="nx">delta</span><span class="o">=</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">last</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">last</span><span class="p">.</span><span class="nx">y</span> <span class="p">}</span>
                      <span class="k">if</span> <span class="p">(</span><span class="nx">ev</span> <span class="o">&amp;&amp;</span> <span class="nx">scrollable</span> <span class="o">&amp;&amp;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">delta</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">delta</span><span class="p">.</span><span class="nx">y</span><span class="p">))</span> <span class="k">return</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">give</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                      <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">delta</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">delta</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">){</span>
                        <span class="nx">ev</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ev</span><span class="p">.</span><span class="nx">give</span> <span class="o">=</span> <span class="kc">false</span><span class="p">);</span>
                        <span class="nx">panned</span><span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                        <span class="nx">last</span><span class="o">=</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span> <span class="p">};</span>
                        <span class="kd">var</span>
                          <span class="nx">revolution</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_revolution_</span><span class="p">),</span>
                          <span class="nx">origin</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_clicked_location_</span><span class="p">),</span>
                          <span class="nx">vertical</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_vertical_</span><span class="p">),</span>
                          <span class="nx">fraction</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">graph</span><span class="p">(</span><span class="nx">vertical</span> <span class="o">?</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_clicked_on_</span><span class="p">),</span> <span class="nx">revolution</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_lo_</span><span class="p">),</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_hi_</span><span class="p">),</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_cwish_</span><span class="p">),</span> <span class="nx">vertical</span> <span class="o">?</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">x</span><span class="p">)),</span>
                          <span class="nx">reeling</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_reeling_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_reeling_</span><span class="p">)</span> <span class="o">||</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">)</span> <span class="o">!=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_clicked_</span><span class="p">)),</span>
                          <span class="nx">motion</span><span class="o">=</span> <span class="nx">to_bias</span><span class="p">(</span><span class="nx">vertical</span> <span class="o">?</span> <span class="nx">delta</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="nx">delta</span><span class="p">.</span><span class="nx">x</span> <span class="o">||</span> <span class="mi">0</span><span class="p">),</span>
                          <span class="nx">backwards</span><span class="o">=</span> <span class="nx">motion</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">,</span> <span class="nx">motion</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">orbital</span> <span class="o">&amp;&amp;</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_center_</span><span class="p">))</span> <span class="kd">var</span>
                          <span class="nx">vertical</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_vertical_</span><span class="p">,</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">x</span><span class="p">)),</span>
                          <span class="nx">origin</span><span class="o">=</span> <span class="nx">recenter_mouse</span><span class="p">(</span><span class="nx">revolution</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
                        <span class="k">if</span> <span class="p">(</span><span class="nx">rows</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="kd">var</span>
                          <span class="nx">space_y</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">).</span><span class="nx">y</span><span class="p">,</span>
                          <span class="nx">revolution_y</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_revolution_y_</span><span class="p">),</span>
                          <span class="nx">start</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_clicked_tier_</span><span class="p">),</span>
                          <span class="nx">lo</span><span class="o">=</span> <span class="o">-</span> <span class="nx">start</span> <span class="o">*</span> <span class="nx">revolution_y</span><span class="p">,</span>
                          <span class="nx">tier</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_tier_</span><span class="p">,</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">math</span><span class="p">.</span><span class="nx">envelope</span><span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">revolution_y</span><span class="p">,</span> <span class="nx">lo</span><span class="p">,</span> <span class="nx">lo</span> <span class="o">+</span> <span class="nx">revolution_y</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
                        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">fraction</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">loops</span><span class="p">)</span> <span class="kd">var</span>
                          <span class="nx">origin</span><span class="o">=</span> <span class="nx">recenter_mouse</span><span class="p">(</span><span class="nx">revolution</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
                      <span class="p">}</span>
                    <span class="p">}</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='wheel-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#wheel-Event">&#182;</a>                </div>                       <h3><code>wheel</code> Event</h3>

<p><code>Event</code>, since 1.0</p>

<p>Maps Reel to mouse wheel position change event which is provided by a nifty plug-in
written by Brandon Aaron - the <a href="https://github.com/brandonaaron/jquery-mousewheel">Mousewheel plug-in</a>, which you will need to enable
the mousewheel wheel for reeling. You can also choose to use <a href="http://blog.threedubmedia.com/2008/08/eventspecialwheel.html">Wheel Special Event
plug-in</a> by Three Dub Media instead. Either way <code>"wheel</code> Event handler receives
the positive or negative wheeled distance in arguments. This event:</p>

<ul>
<li>calculates wheel input delta and adjusts the <code>fraction</code> using the graph,</li>
<li>recenters the "drag" each and every time,</li>
<li>detects motion direction,</li>
<li>and nullifies the velocity.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">wheel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">distance</span><span class="p">,</span> <span class="nx">ev</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">distance</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                    <span class="nx">wheeled</span><span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="kd">var</span>
                      <span class="nx">delta</span><span class="o">=</span> <span class="nx">ceil</span><span class="p">(</span><span class="nx">math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">distance</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span>
                      <span class="nx">delta</span><span class="o">=</span> <span class="nx">negative_when</span><span class="p">(</span><span class="nx">delta</span><span class="p">,</span> <span class="nx">distance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="nx">revolution</span><span class="o">=</span> <span class="mf">0.0833</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_revolution_</span><span class="p">),</span> <span class="c1">// Wheel&#39;s revolution is 1/12 of full revolution</span>
                      <span class="nx">origin</span><span class="o">=</span> <span class="nx">recenter_mouse</span><span class="p">(</span><span class="nx">revolution</span><span class="p">),</span>
                      <span class="nx">backwards</span><span class="o">=</span> <span class="nx">delta</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">,</span> <span class="nx">delta</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="nx">velocity</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_velocity_</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="nx">fraction</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">graph</span><span class="p">(</span><span class="nx">delta</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_clicked_on_</span><span class="p">),</span> <span class="nx">revolution</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_lo_</span><span class="p">),</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_hi_</span><span class="p">),</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_cwish_</span><span class="p">)))</span>
                    <span class="nx">ev</span> <span class="o">&amp;&amp;</span> <span class="nx">ev</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
                    <span class="nx">ev</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ev</span><span class="p">.</span><span class="nx">give</span> <span class="o">=</span> <span class="kc">false</span><span class="p">);</span>
                    <span class="nx">unidle</span><span class="p">();</span>
                    <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;up&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">ev</span><span class="p">]);</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Data-Change-Events'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Data-Change-Events">&#182;</a>                </div>                       <hr />

<h2>Data Change Events</h2>

<p>Besides Reel being event-driven, it also is data-driven respectively data-change-driven
meaning that there is a mechanism in place, which detects real changes in data being
stored with <code>.reel(name, value)</code>. Learn more about <a href="#Changes">data changes</a>.</p>

<p>These data change bindings are for internal use only and you don't ever trigger them
per se, you change data and that will trigger respective change event. If the value
being stored is the same as the one already stored, nothing will be triggered.
_For example to change Reel's <code>frame</code> you don't trigger <code>"frameChange"</code> and instead
you do:</p>

<pre><code>.reel("frame", 15)
</code></pre>

<p>Change events always receive the actual data key value in the third argument.
_For example this will log each viewed frame number into the developers console.</p>

<pre><code>.bind("frameChange", function(e, d, frame){
    console.log(frame)
})
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='fractionChange-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#fractionChange-Event">&#182;</a>                </div>                       <h3><code>fractionChange</code> Event</h3>

<p><code>Event</code>, since 1.0</p>

<p>Internally Reel doesn't really work with the frames you set it up with. It uses
<strong>fraction</strong>, which is a numeric value ranging from 0.0 to 1.0. When <code>fraction</code> changes
this handler basically calculates and sets new value of <code>frame</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">fractionChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">set_fraction</span><span class="p">,</span> <span class="nx">fraction</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">set_fraction</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="nx">deprecated</span><span class="p">(</span><span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">set_fraction</span><span class="p">));</span>
                    <span class="kd">var</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">floor</span><span class="p">(</span><span class="nx">fraction</span> <span class="o">/</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_bit_</span><span class="p">)),</span>
                      <span class="nx">multirow</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">,</span>
                      <span class="nx">orbital</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span><span class="p">,</span>
                      <span class="nx">center</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_center_</span><span class="p">,</span> <span class="o">!!</span><span class="nx">orbital</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">frame</span> <span class="o">&lt;=</span> <span class="nx">orbital</span> <span class="o">||</span> <span class="nx">frame</span> <span class="o">&gt;=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span> <span class="o">-</span> <span class="nx">orbital</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">multirow</span><span class="p">)</span> <span class="kd">var</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">frame</span> <span class="o">+</span> <span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_row_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">)</span>
                    <span class="kd">var</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">,</span> <span class="nx">frame</span><span class="p">)</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='tierChange-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#tierChange-Event">&#182;</a>                </div>                       <h3><code>tierChange</code> Event</h3>

<p><code>Event</code>, since 1.2</p>

<p>The situation of <code>tier</code> is very much similar to the one of <code>fraction</code>. In multi-row
movies, <strong>tier</strong> is an internal value for the vertical axis. Its value also ranges from
0.0 to 1.0. Handler calculates and sets new value of <code>frame</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">tierChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">deprecated_set</span><span class="p">,</span> <span class="nx">tier</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">deprecated_set</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="kd">var</span>
                      <span class="nx">row</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_row_</span><span class="p">,</span> <span class="nx">round</span><span class="p">(</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">tier</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span><span class="p">))),</span>
                      <span class="nx">frames</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">),</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">)</span> <span class="o">%</span> <span class="nx">frames</span> <span class="o">||</span> <span class="nx">frames</span><span class="p">,</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">,</span> <span class="nx">frame</span> <span class="o">+</span> <span class="nx">row</span> <span class="o">*</span> <span class="nx">frames</span> <span class="o">-</span> <span class="nx">frames</span><span class="p">)</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='rowChange-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#rowChange-Event">&#182;</a>                </div>                       <h3><code>rowChange</code> Event</h3>

<p><code>Event</code>, since 1.1</p>

<p>The physical vertical position of Reel is expressed in <strong>rows</strong> and ranges
from 1 to the total number of rows defined with <a href="#rows-Option"><code>rows</code></a>. This handler
only converts <code>row</code> value to <code>tier</code> and sets it.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">rowChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">set_row</span><span class="p">,</span> <span class="nx">row</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">set_row</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_row_</span><span class="p">,</span> <span class="nx">set_row</span><span class="p">);</span>
                    <span class="kd">var</span>
                      <span class="nx">tier</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_tier_</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='frameChange-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#frameChange-Event">&#182;</a>                </div>                       <h3><code>frameChange</code> Event</h3>

<p><code>Event</code>, since 1.0</p>

<p>The physical horizontal position of Reel is expressed in <strong>frames</strong> and ranges
from 1 to the total number of frames configured with <a href="#frames-Option"><code>frames</code></a>.
This handler converts <code>row</code> value to <code>tier</code> and sets it. This default handler:</p>

<ul>
<li>flags the instance's outter wrapper with <code>.frame-X</code> class name
(where <code>X</code> is the actual frame number),</li>
<li>calculates and eventually sets <code>fraction</code> (and <code>tier</code> for multi-rows) from given frame,</li>
<li>for sequences, it switches the <code>&lt;img&gt;</code>'s <code>src</code> to the right frame,</li>
<li>for sprites it recalculates sprite's 'background position shift and applies it.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">frameChange</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">set_frame</span><span class="p">,</span> <span class="nx">frame</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">set_frame</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="k">return</span> <span class="nx">deprecated</span><span class="p">(</span><span class="nx">set</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">,</span> <span class="nx">set_frame</span><span class="p">));</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">frame_klass</span><span class="p">,</span> <span class="nx">frame_klass</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">);</span>
                    <span class="kd">var</span>
                      <span class="nx">frames</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">),</span>
                      <span class="nx">rows</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span><span class="p">,</span>
                      <span class="nx">path</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">path</span><span class="p">,</span>
                      <span class="nx">base</span><span class="o">=</span> <span class="nx">frame</span> <span class="o">%</span> <span class="nx">frames</span> <span class="o">||</span> <span class="nx">frames</span><span class="p">,</span>
                      <span class="nx">ready</span><span class="o">=</span> <span class="o">!!</span><span class="nx">get</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">),</span>
                      <span class="nx">frame_row</span><span class="o">=</span> <span class="p">(</span><span class="nx">frame</span> <span class="o">-</span> <span class="nx">base</span><span class="p">)</span> <span class="o">/</span> <span class="nx">frames</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                      <span class="nx">frame_tier</span><span class="o">=</span> <span class="p">(</span><span class="nx">frame_row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">rows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
                      <span class="nx">tier_row</span><span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">frame_tier</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">rows</span><span class="p">)),</span>
                      <span class="nx">row</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_row_</span><span class="p">),</span>
                      <span class="nx">tier</span><span class="o">=</span> <span class="nx">ready</span> <span class="o">&amp;&amp;</span> <span class="nx">tier_row</span> <span class="o">===</span> <span class="nx">row</span> <span class="o">?</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_tier_</span><span class="p">)</span> <span class="o">:</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_tier_</span><span class="p">,</span> <span class="nx">frame_tier</span><span class="p">),</span>
                      <span class="nx">frame_fraction</span><span class="o">=</span> <span class="nx">min</span><span class="p">((</span><span class="nx">base</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">frames</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="mf">0.9999</span><span class="p">),</span>
                      <span class="nx">row_shift</span><span class="o">=</span> <span class="nx">row</span> <span class="o">*</span> <span class="nx">frames</span> <span class="o">-</span> <span class="nx">frames</span><span class="p">,</span>
                      <span class="nx">fraction_frame</span><span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">frame_fraction</span><span class="p">,</span> <span class="nx">row_shift</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">row_shift</span> <span class="o">+</span> <span class="nx">frames</span><span class="p">)),</span>
                      <span class="nx">same_spot</span><span class="o">=</span> <span class="nx">abs</span><span class="p">((</span><span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="nx">frame_fraction</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
                      <span class="nx">fraction</span><span class="o">=</span> <span class="nx">ready</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">fraction_frame</span> <span class="o">===</span> <span class="nx">frame</span> <span class="o">&amp;&amp;</span> <span class="nx">same_spot</span><span class="p">)</span> <span class="o">?</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)</span> <span class="o">:</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">frame_fraction</span><span class="p">),</span>
                      <span class="nx">footage</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span> <span class="o">&amp;&amp;</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_vertical_</span><span class="p">))</span> <span class="kd">var</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">inversed</span> <span class="o">?</span> <span class="nx">footage</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">frame</span> <span class="o">:</span> <span class="nx">frame</span><span class="p">,</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">frame</span> <span class="o">+</span> <span class="nx">footage</span>
                    <span class="kd">var</span>
                      <span class="nx">horizontal</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">horizontal</span><span class="p">,</span>
                      <span class="nx">stitched</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span><span class="p">,</span>
                      <span class="nx">images</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_images_</span><span class="p">),</span>
                      <span class="nx">is_sprite</span><span class="o">=</span> <span class="o">!</span><span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span><span class="p">,</span>
                      <span class="nx">spacing</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_spacing_</span><span class="p">),</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">is_sprite</span><span class="p">){</span>
                      <span class="kd">var</span>
                        <span class="nx">frameshot</span><span class="o">=</span> <span class="nx">images</span><span class="p">[</span><span class="nx">frame</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                      <span class="nx">ready</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">attr</span><span class="p">({</span> <span class="nx">src</span><span class="o">:</span> <span class="nx">reen</span><span class="p">(</span><span class="nx">path</span> <span class="o">+</span> <span class="nx">frameshot</span><span class="p">)</span> <span class="p">})</span>
                    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
                      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">stitched</span><span class="p">)</span> <span class="kd">var</span>
                        <span class="nx">minor</span><span class="o">=</span> <span class="p">(</span><span class="nx">frame</span> <span class="o">%</span> <span class="nx">footage</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="nx">minor</span><span class="o">=</span> <span class="nx">minor</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">footage</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">minor</span><span class="p">,</span>
                        <span class="nx">major</span><span class="o">=</span> <span class="nx">floor</span><span class="p">((</span><span class="nx">frame</span> <span class="o">-</span> <span class="mf">0.1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">footage</span><span class="p">),</span>
                        <span class="nx">major</span><span class="o">=</span> <span class="nx">major</span> <span class="o">+</span> <span class="p">(</span><span class="nx">rows</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_rows_</span><span class="p">))),</span>
                        <span class="nx">a</span><span class="o">=</span> <span class="nx">major</span> <span class="o">*</span> <span class="p">((</span><span class="nx">horizontal</span> <span class="o">?</span> <span class="nx">space</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="nx">spacing</span><span class="p">),</span>
                        <span class="nx">b</span><span class="o">=</span> <span class="nx">minor</span> <span class="o">*</span> <span class="p">((</span><span class="nx">horizontal</span> <span class="o">?</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span> <span class="o">:</span> <span class="nx">space</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">+</span> <span class="nx">spacing</span><span class="p">),</span>
                        <span class="nx">shift</span><span class="o">=</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">horizontal</span> <span class="o">?</span> <span class="p">[</span><span class="nx">px</span><span class="p">(</span><span class="o">-</span><span class="nx">b</span><span class="p">),</span> <span class="nx">px</span><span class="p">(</span><span class="o">-</span><span class="nx">a</span><span class="p">)]</span> <span class="o">:</span> <span class="p">[</span><span class="nx">px</span><span class="p">(</span><span class="o">-</span><span class="nx">a</span><span class="p">),</span> <span class="nx">px</span><span class="p">(</span><span class="o">-</span><span class="nx">b</span><span class="p">)]</span>
                      <span class="k">else</span><span class="p">{</span>
                        <span class="kd">var</span>
                          <span class="nx">x</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_stitched_shift_</span><span class="p">,</span> <span class="nx">round</span><span class="p">(</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">frame_fraction</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_stitched_travel_</span><span class="p">)))</span> <span class="o">%</span> <span class="nx">stitched</span><span class="p">),</span>
                          <span class="nx">y</span><span class="o">=</span> <span class="nx">rows</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span><span class="nx">space</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">spacing</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">rows</span> <span class="o">-</span> <span class="nx">row</span><span class="p">),</span>
                          <span class="nx">shift</span><span class="o">=</span> <span class="p">[</span><span class="nx">px</span><span class="p">(</span><span class="o">-</span><span class="nx">x</span><span class="p">),</span> <span class="nx">px</span><span class="p">(</span><span class="o">-</span><span class="nx">y</span><span class="p">)],</span>
                          <span class="nx">image</span><span class="o">=</span> <span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">images</span><span class="p">[</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                        <span class="nx">image</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s1">&#39;backgroundImage&#39;</span><span class="p">).</span><span class="nx">search</span><span class="p">(</span><span class="nx">path</span><span class="o">+</span><span class="nx">image</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span> <span class="nx">backgroundImage</span><span class="o">:</span> <span class="nx">url</span><span class="p">(</span><span class="nx">path</span><span class="o">+</span><span class="nx">image</span><span class="p">)</span> <span class="p">})</span>
                      <span class="p">}</span>
                      <span class="nx">t</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span> <span class="nx">backgroundPosition</span><span class="o">:</span> <span class="nx">shift</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">___</span><span class="p">)</span> <span class="p">})</span>
                    <span class="p">}</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Indicator'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Indicator">&#182;</a>                </div>                       <hr />

<h2>Indicator</h2>

<p>When configured with the <a href="#indicator-Option"><code>indicator</code></a> option, Reel adds to the scene
a visual indicator in a form of a black rectangle traveling along the bottom edge
of the image. It bears two distinct messages:</p>

<ul>
<li>its horizontal position accurately reflects actual <code>fraction</code></li>
<li>and its width reflect one frame's share on the whole (more frames mean narrower
indicator).</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;fractionChange.indicator&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">deprecated_set</span><span class="p">,</span> <span class="nx">fraction</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">deprecated_set</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">indicator</span><span class="p">)</span> <span class="kd">var</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">),</span>
                      <span class="nx">size</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">indicator</span><span class="p">,</span>
                      <span class="nx">orbital</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span><span class="p">,</span>
                      <span class="nx">travel</span><span class="o">=</span> <span class="nx">orbital</span> <span class="o">&amp;&amp;</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_vertical_</span><span class="p">)</span> <span class="o">?</span> <span class="nx">space</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                      <span class="nx">slots</span><span class="o">=</span> <span class="nx">orbital</span> <span class="o">?</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span> <span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">),</span>
                      <span class="nx">weight</span><span class="o">=</span> <span class="nx">ceil</span><span class="p">(</span><span class="nx">travel</span> <span class="o">/</span> <span class="nx">slots</span><span class="p">),</span>
                      <span class="nx">travel</span><span class="o">=</span> <span class="nx">travel</span> <span class="o">-</span> <span class="nx">weight</span><span class="p">,</span>
                      <span class="nx">indicate</span><span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">fraction</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">travel</span><span class="p">)),</span>
                      <span class="nx">indicate</span><span class="o">=</span> <span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">cw</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span> <span class="o">?</span> <span class="nx">indicate</span> <span class="o">:</span> <span class="nx">travel</span> <span class="o">-</span> <span class="nx">indicate</span><span class="p">,</span>
                      <span class="nx">$indicator</span><span class="o">=</span> <span class="nx">indicator</span><span class="p">.</span><span class="nx">$x</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_vertical_</span><span class="p">)</span>
                      <span class="o">?</span> <span class="p">{</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">px</span><span class="p">(</span><span class="nx">indicate</span><span class="p">),</span> <span class="nx">bottom</span><span class="o">:</span> <span class="nx">_auto_</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">size</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">weight</span> <span class="p">}</span>
                      <span class="o">:</span> <span class="p">{</span> <span class="nx">bottom</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="nx">px</span><span class="p">(</span><span class="nx">indicate</span><span class="p">),</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">_auto_</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">weight</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">size</span> <span class="p">})</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-117'>             <td class="docs">                       <p>For multi-row object movies, there's a second indicator sticked to the left edge
and communicates:</p>

<ul>
<li>its vertical position accurately reflects actual <code>tier</code></li>
<li>and its height reflect one row's share on the whole (more rows mean narrower
indicator).</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;tierChange.indicator&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">deprecated_set</span><span class="p">,</span> <span class="nx">tier</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">deprecated_set</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">indicator</span><span class="p">)</span> <span class="kd">var</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">),</span>
                      <span class="nx">travel</span><span class="o">=</span> <span class="nx">space</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
                      <span class="nx">slots</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span><span class="p">,</span>
                      <span class="nx">size</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">indicator</span><span class="p">,</span>
                      <span class="nx">weight</span><span class="o">=</span> <span class="nx">ceil</span><span class="p">(</span><span class="nx">travel</span> <span class="o">/</span> <span class="nx">slots</span><span class="p">),</span>
                      <span class="nx">travel</span><span class="o">=</span> <span class="nx">travel</span> <span class="o">-</span> <span class="nx">weight</span><span class="p">,</span>
                      <span class="nx">indicate</span><span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nx">tier</span> <span class="o">*</span> <span class="nx">travel</span><span class="p">),</span>
                      <span class="nx">$yindicator</span><span class="o">=</span> <span class="nx">indicator</span><span class="p">.</span><span class="nx">$y</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">indicate</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">size</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">weight</span> <span class="p">})</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-118'>             <td class="docs">                       <p>Indicators are bound to <code>fraction</code> or <code>row</code> changes, meaning they alone can consume
more CPU resources than the entire Reel scene. Use them for development only.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='Annotations'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Annotations">&#182;</a>                </div>                       <hr />

<h2>[NEW] Annotations</h2>

<p>If you want to annotate features of your scene to better describe the subject,
there's annotations for you. Annotations feature allows you to place virtually any
HTML content over or into the image and have its position and visibility synchronized
with the position of Reel. These two easy looking handlers do a lot more than to fit
in here.</p>

<p>Learn more about <a href="https://github.com/pisi/Reel/wiki/Annotations">Annotations</a> in the wiki, where a great care has been taken
to in-depth explain this new exciting functionality.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;setup.annotations&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">),</span>
                      <span class="nx">$overlay</span><span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">parent</span><span class="p">(),</span>
                      <span class="nx">film_css</span><span class="o">=</span> <span class="p">{</span> <span class="nx">position</span><span class="o">:</span> <span class="nx">_absolute_</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="nx">space</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span>
                    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_annotations_</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ida</span><span class="p">,</span> <span class="nx">note</span><span class="p">){</span>
                      <span class="kd">var</span>
                        <span class="nx">$note</span><span class="o">=</span> <span class="k">typeof</span> <span class="nx">note</span><span class="p">.</span><span class="nx">node</span> <span class="o">==</span> <span class="nx">_string_</span> <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">node</span><span class="p">)</span> <span class="o">:</span> <span class="nx">note</span><span class="p">.</span><span class="nx">node</span> <span class="o">||</span> <span class="p">{},</span>
                        <span class="nx">$note</span><span class="o">=</span> <span class="nx">$note</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">?</span> <span class="nx">$note</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="nx">_div_</span><span class="p">),</span> <span class="nx">$note</span><span class="p">),</span>
                        <span class="nx">$note</span><span class="o">=</span> <span class="nx">$note</span><span class="p">.</span><span class="nx">attr</span><span class="p">({</span> <span class="nx">id</span><span class="o">:</span> <span class="nx">ida</span> <span class="p">}).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">annotation_klass</span><span class="p">),</span>
                        <span class="nx">$image</span><span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">image</span> <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="nx">_img_</span><span class="p">),</span> <span class="nx">note</span><span class="p">.</span><span class="nx">image</span><span class="p">)</span> <span class="o">:</span> <span class="nx">$</span><span class="p">(),</span>
                        <span class="nx">$link</span><span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">link</span> <span class="o">?</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="nx">note</span><span class="p">.</span><span class="nx">link</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="kc">false</span> <span class="p">})</span> <span class="o">:</span> <span class="nx">$</span><span class="p">()</span>
                      <span class="nx">css</span><span class="p">(</span><span class="nx">hash</span><span class="p">(</span><span class="nx">ida</span><span class="p">),</span> <span class="p">{</span> <span class="nx">display</span><span class="o">:</span> <span class="nx">_none_</span><span class="p">,</span> <span class="nx">position</span><span class="o">:</span> <span class="nx">_absolute_</span> <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
                      <span class="nx">note</span><span class="p">.</span><span class="nx">image</span> <span class="o">||</span> <span class="nx">note</span><span class="p">.</span><span class="nx">link</span> <span class="o">&amp;&amp;</span> <span class="nx">$note</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$link</span><span class="p">);</span>
                      <span class="nx">note</span><span class="p">.</span><span class="nx">link</span> <span class="o">||</span> <span class="nx">note</span><span class="p">.</span><span class="nx">image</span> <span class="o">&amp;&amp;</span> <span class="nx">$note</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$image</span><span class="p">);</span>
                      <span class="nx">note</span><span class="p">.</span><span class="nx">link</span> <span class="o">&amp;&amp;</span> <span class="nx">note</span><span class="p">.</span><span class="nx">image</span> <span class="o">&amp;&amp;</span> <span class="nx">$note</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$link</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$image</span><span class="p">));</span>
                      <span class="nx">$note</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">$overlay</span><span class="p">);</span>
                    <span class="p">});</span>
                  <span class="p">},</span>
                  <span class="s1">&#39;frameChange.annotations&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">deprecation</span><span class="p">,</span> <span class="nx">frame</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">),</span>
                      <span class="nx">stitched</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span><span class="p">,</span>
                      <span class="nx">ss</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_stitched_shift_</span><span class="p">)</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">get</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">deprecation</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_annotations_</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ida</span><span class="p">,</span> <span class="nx">note</span><span class="p">){</span>
                      <span class="kd">var</span>
                        <span class="nx">$note</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">hash</span><span class="p">(</span><span class="nx">ida</span><span class="p">)),</span>
                        <span class="nx">start</span><span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">start</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="nx">end</span><span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">end</span><span class="p">,</span>
                        <span class="nx">offset</span><span class="o">=</span> <span class="nx">frame</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="nx">at</span><span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">at</span> <span class="o">?</span> <span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">at</span><span class="p">[</span><span class="nx">offset</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                        <span class="nx">offset</span><span class="o">=</span> <span class="nx">note</span><span class="p">.</span><span class="nx">at</span> <span class="o">?</span> <span class="nx">offset</span> <span class="o">:</span> <span class="nx">offset</span> <span class="o">-</span> <span class="nx">start</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="nx">x</span><span class="o">=</span> <span class="k">typeof</span> <span class="nx">note</span><span class="p">.</span><span class="nx">x</span><span class="o">!=</span><span class="nx">_object_</span> <span class="o">?</span> <span class="nx">note</span><span class="p">.</span><span class="nx">x</span> <span class="o">:</span> <span class="nx">note</span><span class="p">.</span><span class="nx">x</span><span class="p">[</span><span class="nx">offset</span><span class="p">],</span>
                        <span class="nx">y</span><span class="o">=</span> <span class="k">typeof</span> <span class="nx">note</span><span class="p">.</span><span class="nx">y</span><span class="o">!=</span><span class="nx">_object_</span> <span class="o">?</span> <span class="nx">note</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="nx">note</span><span class="p">.</span><span class="nx">y</span><span class="p">[</span><span class="nx">offset</span><span class="p">],</span>
                        <span class="nx">placed</span><span class="o">=</span> <span class="nx">x</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">,</span>
                        <span class="nx">visible</span><span class="o">=</span> <span class="nx">placed</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">note</span><span class="p">.</span><span class="nx">at</span> <span class="o">?</span> <span class="nx">at</span> <span class="o">:</span> <span class="p">(</span><span class="nx">offset</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">end</span> <span class="o">||</span> <span class="nx">offset</span> <span class="o">&lt;=</span> <span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)))</span>
                      <span class="k">if</span> <span class="p">(</span><span class="nx">stitched</span><span class="p">)</span> <span class="kd">var</span>
                        <span class="nx">on_edge</span><span class="o">=</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">ss</span> <span class="o">&gt;</span> <span class="nx">stitched</span> <span class="o">-</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                        <span class="nx">after_edge</span><span class="o">=</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">stitched</span> <span class="o">-</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">ss</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">ss</span> <span class="o">&lt;</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
                        <span class="nx">x</span><span class="o">=</span> <span class="o">!</span><span class="nx">on_edge</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">stitched</span><span class="p">,</span>
                        <span class="nx">x</span><span class="o">=</span> <span class="o">!</span><span class="nx">after_edge</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">stitched</span><span class="p">,</span>
                        <span class="nx">x</span><span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">ss</span>
                      <span class="kd">var</span>
                        <span class="nx">style</span><span class="o">=</span> <span class="p">{</span> <span class="nx">display</span><span class="o">:</span> <span class="nx">visible</span> <span class="o">?</span> <span class="nx">_block_</span><span class="o">:</span><span class="nx">_none_</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="nx">px</span><span class="p">(</span><span class="nx">x</span><span class="p">),</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">px</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">}</span>
                      <span class="nx">$note</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">style</span><span class="p">);</span>
                    <span class="p">});</span>
                  <span class="p">},</span>
                  <span class="s1">&#39;up.annotations&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">ev</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">panned</span> <span class="o">||</span> <span class="nx">wheeled</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                    <span class="kd">var</span>
                      <span class="nx">$target</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">ev</span><span class="p">.</span><span class="nx">target</span><span class="p">),</span>
                      <span class="nx">$link</span><span class="o">=</span> <span class="p">(</span><span class="nx">$target</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">$target</span> <span class="o">:</span> <span class="nx">$target</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)),</span>
                      <span class="nx">href</span><span class="o">=</span> <span class="nx">$link</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">),</span>
                      <span class="nx">target</span><span class="o">=</span> <span class="nx">$link</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;target&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="s1">&#39;self&#39;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">href</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">target</span> <span class="o">==</span> <span class="s1">&#39;_blank&#39;</span><span class="p">)</span> <span class="nx">panned</span><span class="o">=</span> <span class="o">!!</span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">href</span><span class="p">)</span>
                    <span class="k">else</span> <span class="nx">panned</span><span class="o">=</span> <span class="o">!!</span><span class="p">(</span><span class="nb">window</span><span class="p">[</span><span class="nx">target</span><span class="p">].</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="o">=</span> <span class="nx">href</span><span class="p">)</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Click-Stepping-Events'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Click-Stepping-Events">&#182;</a>                </div>                       <hr />

<h2>[NEW] Click Stepping Events</h2>

<p>For devices without drag support or for developers, who want to use some sort
of left &amp; right buttons on their site to control your instance from outside, Reel
supports ordinary click with added detection of left half or right half and resulting
triggering of <code>stepLeft</code> and <code>stepRight</code> events respectively.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-121'>             <td class="docs">                       <p>This behavior can be disabled by the <a href="#steppable-Option"><code>steppable</code></a> option.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;up.steppable&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">ev</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">panned</span> <span class="o">||</span> <span class="nx">wheeled</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                    <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_clicked_location_</span><span class="p">).</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">t</span><span class="p">.</span><span class="nx">offset</span><span class="p">().</span><span class="nx">left</span> <span class="o">&gt;</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">).</span><span class="nx">x</span> <span class="o">?</span> <span class="s1">&#39;stepRight&#39;</span> <span class="o">:</span> <span class="s1">&#39;stepLeft&#39;</span><span class="p">)</span>
                  <span class="p">},</span>
                  <span class="s1">&#39;stepLeft stepRight&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="nx">unidle</span><span class="p">();</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='stepLeft-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#stepLeft-Event">&#182;</a>                </div>                       <h3><code>stepLeft</code> Event</h3>

<p><code>Event</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">stepLeft</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="nx">set</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
                    <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)</span> <span class="o">-</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_bit_</span><span class="p">)</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_cwish_</span><span class="p">));</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='stepRight-Event'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#stepRight-Event">&#182;</a>                </div>                       <h3><code>stepRight</code> Event</h3>

<p><code>Event</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="nx">stepRight</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="nx">set</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                    <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)</span> <span class="o">+</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_bit_</span><span class="p">)</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_cwish_</span><span class="p">));</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Follow-up-Events'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Follow-up-Events">&#182;</a>                </div>                       <hr />

<h2>Follow-up Events</h2>

<p>When some event as a result triggers another event, it preferably is not triggered
directly, because it would disallow preventing the event propagation / chaining
to happen. Instead a followup handler is bound to the first event and it triggers the
second one.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;setup.fu&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">frame</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_frame_</span><span class="p">,</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">frame</span> <span class="o">+</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">))</span>
                    <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;preload&#39;</span><span class="p">)</span>
                  <span class="p">},</span>
                  <span class="s1">&#39;wheel.fu&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">wheeled</span><span class="o">=</span> <span class="kc">false</span> <span class="p">},</span>
                  <span class="s1">&#39;clean.fu&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;teardown&#39;</span><span class="p">)</span> <span class="p">},</span>
                  <span class="s1">&#39;loaded.fu&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;opening&#39;</span><span class="p">)</span> <span class="p">}</span>
                <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Tick-Handlers'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Tick-Handlers">&#182;</a>                </div>                       <hr />

<h2>Tick Handlers</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-126'>             <td class="docs">                       <p>As opposed to the events bound to the instance itself, there is a <a href="#Ticker">ticker</a>
in place, which emits <code>tick.reel</code> event on the document level by default every 1/36
of a second and drives all the animations. Three handlers currently bind each instance
to the tick.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">pool</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='section-127'>             <td class="docs">                       <p>This handler has a responsibility of continuously updating the preloading indicator
until all images are loaded and to unbind itself then.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;tick.reel.preload&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">space</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">),</span>
                      <span class="nx">current</span><span class="o">=</span> <span class="nx">number</span><span class="p">(</span><span class="nx">preloader</span><span class="p">.</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">_width_</span><span class="p">)),</span>
                      <span class="nx">images</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_images_</span><span class="p">).</span><span class="nx">length</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
                      <span class="nx">target</span><span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nx">images</span> <span class="o">*</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">)</span> <span class="o">*</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
                    <span class="nx">preloader</span><span class="p">.</span><span class="nx">$</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span> <span class="nx">width</span><span class="o">:</span> <span class="nx">current</span> <span class="o">+</span> <span class="p">(</span><span class="nx">target</span> <span class="o">-</span> <span class="nx">current</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">})</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_preloaded_</span><span class="p">)</span> <span class="o">===</span> <span class="nx">images</span> <span class="o">&amp;&amp;</span> <span class="nx">current</span> <span class="o">&gt;</span> <span class="nx">space</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">){</span>
                      <span class="nx">preloader</span><span class="p">.</span><span class="nx">$</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">preloader</span><span class="p">.</span><span class="nx">$</span><span class="p">.</span><span class="nx">remove</span><span class="p">()</span> <span class="p">});</span>
                      <span class="nx">pool</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">_tick_</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">_preload_</span><span class="p">),</span> <span class="nx">on</span><span class="p">.</span><span class="nx">pool</span><span class="p">[</span><span class="nx">_tick_</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">_preload_</span><span class="p">)]);</span>
                    <span class="p">}</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-128'>             <td class="docs">                       <p>This handler binds to the document's ticks at all times, regardless the situation.
It serves several tasks:</p>

<ul>
<li>keeps track of how long the instance is being operated by the user,</li>
<li>or for how long it is braking the velocity inertia,</li>
<li>decreases gained velocity by applying power of the <a href="#brake-Option"><code>brake</code></a> option,</li>
<li>flags the instance as <code>slidable</code> again, so that <code>pan</code> event handler can be executed
again,</li>
<li>updates the <a href="#monitor-Option"><code>monitor</code></a> value,</li>
<li>bounces off the edges for non-looping panoramas,</li>
<li>and most importantly it animates the Reel if <a href="#speed-Option"><code>speed</code></a> is configured.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;tick.reel&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="kd">var</span>
                      <span class="nx">velocity</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_velocity_</span><span class="p">),</span>
                      <span class="nx">leader_tempo</span><span class="o">=</span> <span class="nx">leader</span><span class="p">(</span><span class="nx">_tempo_</span><span class="p">),</span>
                      <span class="nx">monitor</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">monitor</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">braking</span><span class="p">)</span> <span class="kd">var</span>
                      <span class="nx">braked</span><span class="o">=</span> <span class="nx">velocity</span> <span class="o">-</span> <span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_brake_</span><span class="p">)</span> <span class="o">/</span> <span class="nx">leader_tempo</span> <span class="o">*</span> <span class="nx">braking</span><span class="p">),</span>
                      <span class="nx">velocity</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_velocity_</span><span class="p">,</span> <span class="nx">braked</span> <span class="o">&gt;</span> <span class="mf">0.1</span> <span class="o">?</span> <span class="nx">braked</span> <span class="o">:</span> <span class="p">(</span><span class="nx">braking</span><span class="o">=</span> <span class="nx">operated</span><span class="o">=</span> <span class="mi">0</span><span class="p">))</span>
                    <span class="nx">monitor</span> <span class="o">&amp;&amp;</span> <span class="nx">$monitor</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">monitor</span><span class="p">));</span>
                    <span class="nx">velocity</span> <span class="o">&amp;&amp;</span> <span class="nx">braking</span><span class="o">++</span><span class="p">;</span>
                    <span class="nx">operated</span> <span class="o">&amp;&amp;</span> <span class="nx">operated</span><span class="o">++</span><span class="p">;</span>
                    <span class="nx">to_bias</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
                    <span class="nx">slidable</span><span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">operated</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">velocity</span><span class="p">)</span> <span class="k">return</span> <span class="nx">mute</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_clicked_</span><span class="p">))</span> <span class="k">return</span> <span class="nx">mute</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">unidle</span><span class="p">());</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_opening_ticks_</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">loops</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rebound</span><span class="p">)</span> <span class="kd">var</span>
                      <span class="nx">edgy</span><span class="o">=</span> <span class="o">!</span><span class="nx">operated</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="nx">on_edge</span><span class="o">++</span> <span class="o">:</span> <span class="p">(</span><span class="nx">on_edge</span><span class="o">=</span> <span class="mi">0</span><span class="p">),</span>
                      <span class="nx">bounce</span><span class="o">=</span> <span class="nx">on_edge</span> <span class="o">&gt;=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rebound</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">/</span> <span class="nx">leader_tempo</span><span class="p">,</span>
                      <span class="nx">backwards</span><span class="o">=</span> <span class="nx">bounce</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">,</span> <span class="o">!</span><span class="nx">get</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">))</span>
                    <span class="kd">var</span>
                      <span class="nx">direction</span><span class="o">=</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_cwish_</span><span class="p">)</span> <span class="o">*</span> <span class="nx">negative_when</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_backwards_</span><span class="p">)),</span>
                      <span class="nx">step</span><span class="o">=</span> <span class="p">(</span><span class="o">!</span><span class="nx">get</span><span class="p">(</span><span class="nx">_playing_</span><span class="p">)</span> <span class="o">?</span> <span class="nx">velocity</span> <span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">get</span><span class="p">(</span><span class="nx">_speed_</span><span class="p">))</span> <span class="o">+</span> <span class="nx">velocity</span><span class="p">)</span> <span class="o">/</span> <span class="nx">leader</span><span class="p">(</span><span class="nx">_tempo_</span><span class="p">),</span>
                      <span class="nx">fraction</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)</span> <span class="o">-</span> <span class="nx">step</span> <span class="o">*</span> <span class="nx">direction</span><span class="p">)</span>
                  <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-129'>             <td class="docs">                       <p>This handler performs the opening animation duty when during it the normal animation
is halted until the opening finishes.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="s1">&#39;tick.reel.opening&#39;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
                    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">get</span><span class="p">(</span><span class="nx">_opening_</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
                    <span class="kd">var</span>
                      <span class="nx">speed</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">entry</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">speed</span><span class="p">,</span>
                      <span class="nx">step</span><span class="o">=</span> <span class="nx">speed</span> <span class="o">/</span> <span class="nx">leader</span><span class="p">(</span><span class="nx">_tempo_</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">cw</span><span class="o">?</span> <span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">1</span><span class="p">),</span>
                      <span class="nx">ticks</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_opening_ticks_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_opening_ticks_</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span>
                      <span class="nx">fraction</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)</span> <span class="o">+</span> <span class="nx">step</span><span class="p">)</span>
                    <span class="nx">ticks</span> <span class="o">||</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;openingDone&#39;</span><span class="p">);</span>
                  <span class="p">}</span>
                <span class="p">}</span>
              <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Instance-Private-Helpers'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Instance-Private-Helpers">&#182;</a>                </div>                       <hr />

<h2>Instance Private Helpers</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-131'>             <td class="docs">                       <ul>
<li>Events propagation stopper / muter</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">mute</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">result</span><span class="p">){</span> <span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopImmediatePropagation</span><span class="p">()</span> <span class="o">||</span> <span class="nx">result</span> <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-132'>             <td class="docs">                       <ul>
<li>User idle control</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">operated</span><span class="p">,</span>
              <span class="nx">braking</span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">idle</span><span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="nx">operated</span><span class="o">=</span> <span class="mi">0</span> <span class="p">},</span>
              <span class="nx">unidle</span><span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
                <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">delay</span><span class="p">);</span>
                <span class="nx">pool</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">_tick_</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">_opening_</span><span class="p">),</span> <span class="nx">on</span><span class="p">.</span><span class="nx">pool</span><span class="p">[</span><span class="nx">_tick_</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">_opening_</span><span class="p">)]);</span>
                <span class="nx">set</span><span class="p">(</span><span class="nx">_opening_ticks_</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                <span class="nx">set</span><span class="p">(</span><span class="nx">_reeled_</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
                <span class="k">return</span> <span class="nx">operated</span><span class="o">=</span> <span class="o">-</span><span class="nx">opt</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">*</span> <span class="nx">leader</span><span class="p">(</span><span class="nx">_tempo_</span><span class="p">)</span>
              <span class="p">},</span>
              <span class="nx">panned</span><span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">wheeled</span><span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
              <span class="nx">delay</span><span class="p">,</span> <span class="c1">// openingDone&#39;s delayed play pointer</span></pre></div>             </td>           </tr>                               <tr id='section-133'>             <td class="docs">                       <ul>
<li>Constructors of UI elements</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">$monitor</span><span class="o">=</span> <span class="nx">$</span><span class="p">(),</span>
              <span class="nx">preloader</span><span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
                <span class="kd">var</span>
                  <span class="nx">size</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">preloader</span>
                <span class="nx">css</span><span class="p">(</span><span class="nx">___</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">preloader_klass</span><span class="p">),</span> <span class="p">{</span>
                  <span class="nx">position</span><span class="o">:</span> <span class="nx">_absolute_</span><span class="p">,</span>
                  <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_dimensions_</span><span class="p">).</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">size</span><span class="p">,</span>
                  <span class="nx">height</span><span class="o">:</span> <span class="nx">size</span><span class="p">,</span>
                  <span class="nx">overflow</span><span class="o">:</span> <span class="nx">_hidden_</span><span class="p">,</span>
                  <span class="nx">backgroundColor</span><span class="o">:</span> <span class="s1">&#39;#000&#39;</span>
                <span class="p">});</span>
                <span class="k">return</span> <span class="nx">preloader</span><span class="p">.</span><span class="nx">$</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="nx">_div_</span><span class="p">),</span> <span class="p">{</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nx">preloader_klass</span> <span class="p">})</span>
              <span class="p">},</span>
              <span class="nx">indicator</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">axis</span><span class="p">){</span>
                <span class="nx">css</span><span class="p">(</span><span class="nx">___</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">indicator_klass</span><span class="p">)</span><span class="o">+</span><span class="nx">dot</span><span class="p">(</span><span class="nx">axis</span><span class="p">),</span> <span class="p">{</span>
                  <span class="nx">position</span><span class="o">:</span> <span class="nx">_absolute_</span><span class="p">,</span>
                  <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="nx">overflow</span><span class="o">:</span> <span class="nx">_hidden_</span><span class="p">,</span>
                  <span class="nx">backgroundColor</span><span class="o">:</span> <span class="s1">&#39;#000&#39;</span>
                <span class="p">});</span>
                <span class="k">return</span> <span class="nx">indicator</span><span class="p">[</span><span class="s1">&#39;$&#39;</span><span class="o">+</span><span class="nx">axis</span><span class="p">]</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="nx">_div_</span><span class="p">),</span> <span class="p">{</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nx">indicator_klass</span><span class="o">+</span><span class="nx">___</span><span class="o">+</span><span class="nx">axis</span> <span class="p">})</span>
              <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-134'>             <td class="docs">                       <ul>
<li>CSS rules &amp; stylesheet</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">css</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">definition</span><span class="p">,</span> <span class="nx">global</span><span class="p">){</span>
                <span class="kd">var</span>
                  <span class="nx">stage</span><span class="o">=</span> <span class="nx">global</span> <span class="o">?</span> <span class="nx">__</span> <span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_stage_</span><span class="p">),</span>
                  <span class="nx">selector</span><span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^/</span><span class="p">,</span> <span class="nx">stage</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">____</span><span class="p">,</span> <span class="nx">____</span><span class="o">+</span><span class="nx">stage</span><span class="p">)</span>
                <span class="k">return</span> <span class="nx">css</span><span class="p">.</span><span class="nx">rules</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">selector</span><span class="o">+</span><span class="nx">cssize</span><span class="p">(</span><span class="nx">definition</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">definition</span>
                <span class="kd">function</span> <span class="nx">cssize</span><span class="p">(</span><span class="nx">values</span><span class="p">){</span>
                  <span class="kd">var</span> <span class="nx">rules</span><span class="o">=</span> <span class="p">[];</span>
                  <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span> <span class="nx">rules</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([A-Z])/g</span><span class="p">,</span> <span class="s1">&#39;-$1&#39;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39;:&#39;</span><span class="o">+</span><span class="nx">px</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;;&#39;</span><span class="p">)</span> <span class="p">});</span>
                  <span class="k">return</span> <span class="s1">&#39;{&#39;</span><span class="o">+</span><span class="nx">rules</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;}&#39;</span>
                <span class="p">}</span>
              <span class="p">},</span>
              <span class="nx">$style</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-135'>             <td class="docs">                       <ul>
<li>Inertia rotation control</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">on_edge</span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">last</span><span class="o">=</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span> <span class="p">},</span>
              <span class="nx">to_bias</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span> <span class="k">return</span> <span class="nx">bias</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">bias</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="p">},</span>
              <span class="nx">no_bias</span><span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="nx">bias</span><span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span> <span class="p">},</span>
              <span class="nx">bias</span><span class="o">=</span> <span class="nx">no_bias</span><span class="p">(),</span></pre></div>             </td>           </tr>                               <tr id='section-136'>             <td class="docs">                       <ul>
<li>Graph function to be used</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">graph</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">graph</span> <span class="o">||</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">math</span><span class="p">[</span><span class="nx">opt</span><span class="p">.</span><span class="nx">loops</span> <span class="o">?</span> <span class="s1">&#39;hatch&#39;</span> <span class="o">:</span> <span class="s1">&#39;envelope&#39;</span><span class="p">],</span>
              <span class="nx">normal</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">normal</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-137'>             <td class="docs">                       <ul>
<li>Interaction graph's zero point reset</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">recenter_mouse</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">revolution</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
                <span class="kd">var</span>
                  <span class="nx">fraction</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_on_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_fraction_</span><span class="p">)),</span>
                  <span class="nx">tier</span><span class="o">=</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_tier_</span><span class="p">,</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_tier_</span><span class="p">)),</span>
                  <span class="nx">loops</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">loops</span>
                <span class="nx">set</span><span class="p">(</span><span class="nx">_lo_</span><span class="p">,</span> <span class="nx">loops</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="o">-</span> <span class="nx">fraction</span> <span class="o">*</span> <span class="nx">revolution</span><span class="p">);</span>
                <span class="nx">set</span><span class="p">(</span><span class="nx">_hi_</span><span class="p">,</span> <span class="nx">loops</span> <span class="o">?</span> <span class="nx">revolution</span> <span class="o">:</span> <span class="nx">revolution</span> <span class="o">-</span> <span class="nx">fraction</span> <span class="o">*</span> <span class="nx">revolution</span><span class="p">);</span>
                <span class="k">return</span> <span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">(</span><span class="nx">_clicked_location_</span><span class="p">,</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span> <span class="p">})</span> <span class="o">||</span> <span class="kc">undefined</span>
              <span class="p">},</span>
              <span class="nx">slidable</span><span class="o">=</span> <span class="kc">true</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-138'>             <td class="docs">                       <p>~~~</p>

<p>Global events are bound to the pool (<code>document</code>), but to make it work inside an <code>&lt;iframe&gt;</code>
we need to bind to the parent document too to maintain the dragging even outside the area
of the <code>&lt;iframe&gt;</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="nx">pools</span><span class="o">=</span> <span class="nx">pool</span>
            <span class="k">try</span><span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">pool</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">top</span><span class="p">.</span><span class="nb">document</span><span class="p">)</span> <span class="nx">pools</span><span class="o">=</span> <span class="nx">pool</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">top</span><span class="p">.</span><span class="nb">document</span><span class="p">)</span> <span class="p">}</span>
            <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){}</span></pre></div>             </td>           </tr>                               <tr id='section-139'>             <td class="docs">                       <p>A private flag <code>$iframe</code> is established to indicate Reel being viewed inside <code>&lt;iframe&gt;</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="kd">var</span>
              <span class="nx">$iframe</span><span class="o">=</span> <span class="nx">top</span> <span class="o">===</span> <span class="nx">self</span> <span class="o">?</span> <span class="nx">$</span><span class="p">()</span> <span class="o">:</span> <span class="p">(</span><span class="kd">function</span> <span class="nx">sense_iframe</span><span class="p">(</span><span class="nx">$ifr</span><span class="p">){</span>
                <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;iframe&#39;</span><span class="p">,</span> <span class="nx">pools</span><span class="p">.</span><span class="nx">last</span><span class="p">()).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
                  <span class="k">try</span><span class="p">{</span> <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">contents</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="nx">_head_</span><span class="p">).</span><span class="nx">html</span><span class="p">()</span> <span class="o">==</span> <span class="nx">$</span><span class="p">(</span><span class="nx">_head_</span><span class="p">).</span><span class="nx">html</span><span class="p">())</span> <span class="k">return</span> <span class="p">(</span><span class="nx">$ifr</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="kc">false</span> <span class="p">}</span>
                  <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){}</span>
                <span class="p">})</span>
                <span class="k">return</span> <span class="nx">$ifr</span>
              <span class="p">})()</span>
            <span class="nx">css</span><span class="p">.</span><span class="nx">rules</span><span class="o">=</span> <span class="p">[];</span>
            <span class="nx">on</span><span class="p">.</span><span class="nx">setup</span><span class="p">();</span>
          <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id='section-140'>             <td class="docs">                       <p>~~~</p>

<p>Reel maintains a ticker, which guides all animations. There's only one ticker per document
and all instances bind to it. Ticker's mechanism measures and compares times before and after
the <code>tick.reel</code> event trigger to estimate the time spent on executing <code>tick.reel</code>'s handlers.
The actual timeout time is then adjusted by the amount to run as close to expected tempo
as possible.</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">ticker</span><span class="o">=</span> <span class="nx">ticker</span> <span class="o">||</span> <span class="p">(</span><span class="kd">function</span> <span class="nx">tick</span><span class="p">(){</span>
            <span class="kd">var</span>
              <span class="nx">start</span><span class="o">=</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span>
              <span class="nx">tempo</span><span class="o">=</span> <span class="nx">leader</span><span class="p">(</span><span class="nx">_tempo_</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">tempo</span><span class="p">)</span> <span class="k">return</span> <span class="nx">ticker</span><span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="nx">pool</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="nx">_tick_</span><span class="p">);</span>
            <span class="nx">reel</span><span class="p">.</span><span class="nx">cost</span><span class="o">=</span> <span class="p">(</span><span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()</span> <span class="o">+</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">cost</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
            <span class="k">return</span> <span class="nx">ticker</span><span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">tick</span><span class="p">,</span> <span class="nx">max</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1000</span> <span class="o">/</span> <span class="nx">tempo</span> <span class="o">-</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">cost</span><span class="p">));</span>
          <span class="p">})();</span>

          <span class="k">return</span> <span class="nx">$</span><span class="p">(</span><span class="nx">instances</span><span class="p">);</span>
          <span class="p">}</span><span class="k">else</span><span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='Data'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Data">&#182;</a>                </div>                       <hr />

<h2>Data</h2>

<p>Reel stores all its inner state values with the standard DOM <a href="http://api.jquery.com/data">data interface</a> interface
while adding an additional change-detecting event layer, which makes Reel entirely data-driven.</p>

<p><em>For example let's find out on what frame a Reel instance currently is:</em></p>

<pre><code>.reel('frame') // Returns the frame number
</code></pre>

<p>Think of <code>.reel()</code> as a synonym for <code>.data()</code>. Note, that you can therefore easily inspect
the entire datastore with <code>.data()</code> (without arguments). Use it for debugging only.
For real-time data watch use <a href="#Monitor"><code>monitor</code></a> option instead of manually hooking into
the data.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-name'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-name">&#182;</a>                </div>                       <h4><code>.reel( name )</code></h4>

<p>can return anything, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span><span class="p">){</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">){</span>
                <span class="kd">var</span>
                  <span class="nx">value</span><span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>
                <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;recall&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">]);</span>
                <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
              <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id='Write-Access'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Write-Access">&#182;</a>                </div>                       <hr />

<h3>Write Access</h3>

<p>You can store any value the very same way by passing the value as the second function
argument. <em>For example let's say you want to jump to frame 12:</em></p>

<pre><code>.reel('frame', 12)
</code></pre>

<p>Only a handful of data keys is suitable for external manipulation. These include <code>area</code>,
<code>backwards</code>, <code>brake</code>, <strong><code>fraction</code></strong>, <strong><code>frame</code></strong>, <code>playing</code>, <code>reeling</code>, <strong><code>row</code></strong>, <code>speed</code>,
<code>stopped</code>, <code>velocity</code> and <code>vertical</code>. Use the rest of the keys for reading only, you can
mess up easily changing them.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-name-value'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-name-value">&#182;</a>                </div>                       <h4><code>.reel( name, value )</code></h4>

<p>returns <code>jQuery</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="k">else</span><span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">){</span>
                  <span class="nx">reel</span><span class="p">.</span><span class="nx">normal</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">value</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">normal</span><span class="p">[</span><span class="nx">name</span><span class="p">](</span><span class="nx">value</span><span class="p">,</span> <span class="nx">data</span><span class="p">));</span></pre></div>             </td>           </tr>                               <tr id='Changes'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Changes">&#182;</a>                </div>                       <hr />

<h3>Changes</h3>

<p>Any value that does not equal (<code>===</code>) the old value is considered <em>new value</em> and
in such a case Reel will trigger a <em>change event</em> to announce the change. The event
type takes form of <em><code>key</code></em><code>Change</code>, where <em><code>key</code></em> will be the data key/name you've
just assigned.
<em>For example, setting <code>"frame"</code> to <code>12</code> in the above example will trigger
<code>"frameChange"</code>.</em></p>

<p>Some of these <em>change events</em> (like <code>frame</code> or <code>fraction</code>) have a
default handler attached.</p>

<p>You can easily bind to any of the data key change with standard event
binding methods. <em>For example, let's say you want to react on instance
being manipulated by the user - whether it is <strong>reeling</strong>:</em></p>

<pre><code>.bind('reelingChange', function(evnt, nothing, reeling){
  if (reeling) console.log('Rock &amp; reel!')
  else console.log('Not reeling...')
})
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-146'>             <td class="docs">                       <p>The handler function will be executed every time the value changes and
it will be supplied with three arguments. First one is the event object
as usual, second is <code>undefined</code> and the third will be the actual value.
In this case it was a boolean type value.
If the second argument is not <code>undefined</code> it is the backward compatible
"before" event triggered from outside Reel.</p>             </td>             <td class="code">               <div class="highlight"><pre>                  <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">value</span><span class="p">)</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="nx">name</span><span class="o">+</span><span class="s1">&#39;Change&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span><span class="o">=</span> <span class="nx">value</span> <span class="p">]);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;store&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">]);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Destruction'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Destruction">&#182;</a>                </div>                       <hr />

<h2>Destruction</h2>

<p>The evil-twin of <code>.reel()</code>. Tears down and wipes off entire instance.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='unreel-Method'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#unreel-Method">&#182;</a>                </div>                       <h3><code>.unreel()</code> Method</h3>

<p>returns <code>jQuery</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">unreel</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;teardown&#39;</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Regular-Expressions'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Regular-Expressions">&#182;</a>                </div>                       <hr />

<h2>Regular Expressions</h2>

<p>Few regular expressions is used here and there mostly for options validation and verification
levels of user agent's capabilities.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-re'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-re">&#182;</a>                </div>                       <h3><code>$.reel.re</code></h3>

<p><code>RegExp</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">re</span><span class="o">:</span> <span class="p">{</span>
        <span class="cm">/* Valid image file format */</span>
        <span class="nx">image</span><span class="o">:</span>         <span class="sr">/^(.*)\.(jpg|jpeg|png|gif)\??.*$/i</span><span class="p">,</span>
        <span class="cm">/* User agent failsafe stack */</span>
        <span class="nx">ua</span><span class="o">:</span> <span class="p">[</span>
                       <span class="sr">/(msie|opera|firefox|chrome|safari)[ \/:]([\d.]+)/i</span><span class="p">,</span>
                       <span class="sr">/(webkit)\/([\d.]+)/i</span><span class="p">,</span>
                       <span class="sr">/(mozilla)\/([\d.]+)/i</span>
        <span class="p">],</span>
        <span class="cm">/* Multi touch devices */</span>
        <span class="nx">touchy_agent</span><span class="o">:</span>  <span class="sr">/iphone|ipod|ipad|android|fennec|rim tablet/i</span><span class="p">,</span>
        <span class="cm">/* Lazy (low-CPU mobile devices) */</span>
        <span class="nx">lazy_agent</span><span class="o">:</span>    <span class="sr">/\(iphone|ipod|android|fennec|blackberry/i</span><span class="p">,</span>
        <span class="cm">/* Format of frame class flag on the instance */</span>
        <span class="nx">frame_klass</span><span class="o">:</span>   <span class="sr">/frame-\d+/</span><span class="p">,</span>
        <span class="cm">/* [Sequence](#Sequence) string format */</span>
        <span class="nx">sequence</span><span class="o">:</span>      <span class="sr">/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\.\.([0-9]+))($|[|]([0-9]+)$)/</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Content-Delivery-Network'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Content-Delivery-Network">&#182;</a>                </div>                       <hr />

<h2>Content Delivery Network</h2>

<p><a href="https://github.com/pisi/Reel/wiki/CDN">CDN</a> is used for distributing mouse cursors to all instances running world-wide. It runs
on Google cloud infrastructure. If you want to ease up on the servers, please consider setting up
your own location with the cursors.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-cdn'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-cdn">&#182;</a>                </div>                       <h3><code>$.reel.cdn</code></h3>

<p><code>String</code> (URL path), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">cdn</span><span class="o">:</span> <span class="s1">&#39;http://code.vostrel.cz/&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Math-Behind'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Math-Behind">&#182;</a>                </div>                       <hr />

<h2>Math Behind</h2>

<p>Surprisingly there's very little math behind Reel, just two equations (graph functions). These two
functions receive the same set of options.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-math'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-math">&#182;</a>                </div>                       <h3><code>$.reel.math</code></h3>

<p><code>Object</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">math</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='section-155'>             <td class="docs">                       <pre><code>1 |  ********
  |          **
  |            **
  |              **
  |                **
  |                  ********
0  ----------------------------âº
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">envelope</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">revolution</span><span class="p">,</span> <span class="nx">lo</span><span class="p">,</span> <span class="nx">hi</span><span class="p">,</span> <span class="nx">cwness</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
          <span class="k">return</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">min_max</span><span class="p">(</span><span class="nx">lo</span><span class="p">,</span> <span class="nx">hi</span><span class="p">,</span> <span class="o">-</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">cwness</span><span class="p">)</span> <span class="o">/</span> <span class="nx">revolution</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-156'>             <td class="docs">                       <pre><code>1 |        **          **
  |          **          **
  |            **          **
  |  **          **
  |    **          **
  |      **          **
0  ----------------------------âº
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">hatch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">revolution</span><span class="p">,</span> <span class="nx">lo</span><span class="p">,</span> <span class="nx">hi</span><span class="p">,</span> <span class="nx">cwness</span><span class="p">,</span> <span class="nx">y</span><span class="p">){</span>
          <span class="kd">var</span>
            <span class="nx">x</span><span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">lo</span> <span class="o">?</span> <span class="nx">hi</span> <span class="o">:</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">%</span> <span class="nx">hi</span><span class="p">,</span> <span class="c1">// Looping</span>
            <span class="nx">fraction</span><span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="p">(</span><span class="o">-</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">cwness</span><span class="p">)</span> <span class="o">/</span> <span class="nx">revolution</span>
          <span class="k">return</span> <span class="nx">fraction</span> <span class="o">-</span> <span class="nx">floor</span><span class="p">(</span><span class="nx">fraction</span><span class="p">)</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-157'>             <td class="docs">                       <p>And an equation for interpolating <code>fraction</code> (and <code>tier</code>) value into <code>frame</code> and <code>row</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interpolate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fraction</span><span class="p">,</span> <span class="nx">lo</span><span class="p">,</span> <span class="nx">hi</span><span class="p">){</span>
          <span class="k">return</span> <span class="nx">lo</span> <span class="o">+</span> <span class="nx">fraction</span> <span class="o">*</span> <span class="p">(</span><span class="nx">hi</span> <span class="o">-</span> <span class="nx">lo</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Preloading-Modes'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Preloading-Modes">&#182;</a>                </div>                       <hr />

<h2>Preloading Modes</h2>

<p>Reel doesn't load frames in a linear manner from first to last (alhough it can if configured
that way with the <a href="#preload-Option"><code>preload</code></a> option). Reel will take the linear configured
sequence and hand it over to one of <code>$.reel.preload</code> functions, along with reference to options
and the RO data intearface, and it expects the function to reorder the incoming Array and return
it back.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-preload'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-preload">&#182;</a>                </div>                       <h3><code>$.reel.preload</code></h3>

<p><code>Object</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">preload</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id='section-160'>             <td class="docs">                       <p>The best (and default) option is the <code>fidelity</code> processor, which is designed for a faster and
better perceived loading.</p>

<p><img src="https://camo.githubapp.com/74b73060a50f3cbaf522ec31530d34e3fa5cbcb9/687474703a2f2f6a71756572792e766f737472656c2e637a2f7265656c2f7363617474657265642e6c6f6164696e672e676966" alt="Example" title="" /></p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">fidelity</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sequence</span><span class="p">,</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">get</span><span class="p">){</span>
          <span class="kd">var</span>
            <span class="nx">orbital</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span><span class="p">,</span>
            <span class="nx">rows</span><span class="o">=</span> <span class="nx">orbital</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nx">frames</span><span class="o">=</span> <span class="nx">orbital</span> <span class="o">?</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span> <span class="o">:</span> <span class="nx">get</span><span class="p">(</span><span class="nx">_frames_</span><span class="p">),</span>
            <span class="nx">start</span><span class="o">=</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">row</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">frames</span><span class="p">,</span>
            <span class="nx">values</span><span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">().</span><span class="nx">concat</span><span class="p">(</span><span class="nx">sequence</span><span class="p">),</span>
            <span class="nx">present</span><span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">sequence</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
            <span class="nx">priority</span><span class="o">=</span> <span class="nx">rows</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="p">[]</span> <span class="o">:</span> <span class="nx">values</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">frames</span><span class="p">)</span>
          <span class="k">return</span> <span class="nx">spread</span><span class="p">(</span><span class="nx">priority</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">start</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">spread</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">rows</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

          <span class="kd">function</span> <span class="nx">spread</span><span class="p">(</span><span class="nx">sequence</span><span class="p">,</span> <span class="nx">rows</span><span class="p">,</span> <span class="nx">offset</span><span class="p">){</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sequence</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>
            <span class="kd">var</span>
              <span class="nx">order</span><span class="o">=</span> <span class="p">[],</span>
              <span class="nx">passes</span><span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="nx">rows</span><span class="p">,</span>
              <span class="nx">start</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">frame</span><span class="p">,</span>
              <span class="nx">frames</span><span class="o">=</span> <span class="nx">sequence</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
              <span class="nx">plus</span><span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
              <span class="nx">granule</span><span class="o">=</span> <span class="nx">frames</span> <span class="o">/</span> <span class="nx">passes</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">passes</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
              <span class="nx">add</span><span class="p">(</span><span class="nx">start</span> <span class="o">+</span> <span class="nx">round</span><span class="p">(</span><span class="nx">i</span> <span class="o">*</span> <span class="nx">granule</span><span class="p">));</span>
            <span class="k">while</span><span class="p">(</span><span class="nx">granule</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
              <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span><span class="o">=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">granule</span><span class="o">=</span> <span class="nx">granule</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">p</span><span class="o">=</span> <span class="nx">plus</span><span class="o">=</span> <span class="o">!</span><span class="nx">plus</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
                <span class="nx">add</span><span class="p">(</span><span class="nx">order</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nx">plus</span><span class="o">?</span> <span class="mi">1</span><span class="o">:-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">round</span><span class="p">(</span><span class="nx">granule</span><span class="p">));</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">frames</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">add</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">order</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
              <span class="nx">order</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="o">=</span> <span class="nx">sequence</span><span class="p">[</span><span class="nx">order</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
            <span class="k">return</span> <span class="nx">order</span>
            <span class="kd">function</span> <span class="nx">add</span><span class="p">(</span><span class="nx">frame</span><span class="p">){</span>
              <span class="k">while</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">frame</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">frame</span> <span class="o">&lt;=</span> <span class="nx">frames</span><span class="p">))</span>
                <span class="nx">frame</span><span class="o">+=</span> <span class="nx">frame</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="o">+</span><span class="nx">frames</span> <span class="o">:</span> <span class="o">-</span><span class="nx">frames</span><span class="p">;</span>
              <span class="k">return</span> <span class="nx">present</span><span class="p">[</span><span class="nx">offset</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">present</span><span class="p">[</span><span class="nx">offset</span> <span class="o">+</span> <span class="nx">frame</span><span class="p">]</span><span class="o">=</span> <span class="o">!!</span><span class="nx">order</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">frame</span><span class="p">))</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='section-161'>             <td class="docs">                       <p>~~~</p>

<p>You can opt for a <code>linear</code> loading order too, but that has a drawback of leaving large gap
of unloaded frames.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">linear</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sequence</span><span class="p">,</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">get</span><span class="p">){</span>
          <span class="k">return</span> <span class="nx">sequence</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Data-Value-Normalization'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Data-Value-Normalization">&#182;</a>                </div>                       <hr />

<h2>Data Value Normalization</h2>

<p>On all data values being stored with <code>.reel()</code> an attempt is made to normalize the value. Like
for example normalization of frame <code>55</code> when there's just <code>45</code> frames total. These are the built-in
normalizations. Normalization function has the same name as the data key it is assigned to
and is given the raw value in arguments, along with reference to the instances data object,
and it has to return the normalized value.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-normal'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-normal">&#182;</a>                </div>                       <h3><code>$.reel.normal</code></h3>

<p><code>Object</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">normal</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">fraction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fraction</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
          <span class="k">return</span> <span class="nx">data</span><span class="p">[</span><span class="nx">_options_</span><span class="p">].</span><span class="nx">loops</span> <span class="o">?</span> <span class="nx">fraction</span> <span class="o">-</span> <span class="nx">floor</span><span class="p">(</span><span class="nx">fraction</span><span class="p">)</span> <span class="o">:</span> <span class="nx">min_max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">fraction</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="nx">tier</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">tier</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
          <span class="k">return</span> <span class="nx">min_max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">tier</span><span class="p">)</span>
        <span class="p">},</span>
        <span class="nx">row</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
          <span class="k">return</span> <span class="nx">round</span><span class="p">(</span><span class="nx">min_max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span><span class="nx">_options_</span><span class="p">].</span><span class="nx">rows</span><span class="p">,</span> <span class="nx">row</span><span class="p">))</span>
        <span class="p">},</span>
        <span class="nx">frame</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">frame</span><span class="p">,</span> <span class="nx">data</span><span class="p">){</span>
          <span class="kd">var</span>
            <span class="nx">opt</span><span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">_options_</span><span class="p">],</span>
            <span class="nx">frames</span><span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">_frames_</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span> <span class="o">||</span> <span class="mi">1</span><span class="p">),</span>
            <span class="nx">result</span><span class="o">=</span> <span class="nx">round</span><span class="p">(</span><span class="nx">opt</span><span class="p">.</span><span class="nx">loops</span> <span class="o">?</span> <span class="nx">frame</span> <span class="o">%</span> <span class="nx">frames</span> <span class="o">||</span> <span class="nx">frames</span> <span class="o">:</span> <span class="nx">min_max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">frames</span><span class="p">,</span> <span class="nx">frame</span><span class="p">))</span>
          <span class="k">return</span> <span class="nx">result</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">result</span> <span class="o">+</span> <span class="nx">frames</span> <span class="o">:</span> <span class="nx">result</span>
        <span class="p">}</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Sequence-Build-up'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Sequence-Build-up">&#182;</a>                </div>                       <hr />

<h2>Sequence Build-up</h2>

<p>When configured with a String value for <a href="#images-Option"><code>images</code></a> like <code>image##.jpg</code>, it first has
to be converted into an actual Array by engaging the counter placeholder.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-sequence'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-sequence">&#182;</a>                </div>                       <h3><code>$.reel.sequence()</code></h3>

<p><code>Function</code>, since 1.2</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">sequence</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sequence</span><span class="p">,</span> <span class="nx">opt</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">sequence</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">images</span><span class="p">;</span>
        <span class="kd">var</span>
          <span class="nx">images</span><span class="o">=</span> <span class="p">[],</span>
          <span class="nx">orbital</span><span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">orbital</span><span class="p">,</span>
          <span class="nx">url</span><span class="o">=</span> <span class="nx">sequence</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
          <span class="nx">placeholder</span><span class="o">=</span> <span class="nx">sequence</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
          <span class="nx">start</span><span class="o">=</span> <span class="o">+</span><span class="nx">sequence</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nx">rows</span><span class="o">=</span> <span class="nx">orbital</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">rows</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nx">frames</span><span class="o">=</span> <span class="nx">orbital</span> <span class="o">?</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">footage</span> <span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">stitched</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">frames</span><span class="p">,</span>
          <span class="nx">end</span><span class="o">=</span> <span class="o">+</span><span class="p">(</span><span class="nx">sequence</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">||</span> <span class="nx">rows</span> <span class="o">*</span> <span class="nx">frames</span><span class="p">),</span>
          <span class="nx">total</span><span class="o">=</span> <span class="nx">end</span> <span class="o">-</span> <span class="nx">start</span><span class="p">,</span>
          <span class="nx">increment</span><span class="o">=</span> <span class="o">+</span><span class="nx">sequence</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nx">counter</span><span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span><span class="p">(</span><span class="nx">counter</span> <span class="o">&lt;=</span> <span class="nx">total</span><span class="p">){</span>
          <span class="nx">images</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">placeholder</span><span class="p">,</span> <span class="nx">pad</span><span class="p">((</span><span class="nx">start</span> <span class="o">+</span> <span class="nx">counter</span> <span class="o">+</span> <span class="nx">__</span><span class="p">),</span> <span class="nx">placeholder</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">)));</span>
          <span class="nx">counter</span><span class="o">+=</span> <span class="nx">increment</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">images</span><span class="p">;</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Reel-Instances'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Reel-Instances">&#182;</a>                </div>                       <hr />

<h2>Reel Instances</h2>

<p><code>$.reel.instances</code> holds an inventory of all running instances in the DOM document.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-instances'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-instances">&#182;</a>                </div>                       <h3><code>$.reel.instances</code></h3>

<p><code>jQuery</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">instances</span><span class="o">:</span> <span class="nx">$</span><span class="p">(),</span></pre></div>             </td>           </tr>                               <tr id='section-168'>             <td class="docs">                       <p>For ticker-synchronization-related purposes Reel maintains a reference to the leaders data object
all the time.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-leader'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-leader">&#182;</a>                </div>                       <h3><code>$.reel.leader</code></h3>

<p><code>Object</code> (DOM data), since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">leader</span><span class="o">:</span> <span class="nx">leader</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-170'>             <td class="docs">                       <p><code>$.reel.cost</code> holds document-wide costs in miliseconds of running all Reel instances. It is used
to adjust actual timeout of the ticker.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='reel-cost'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#reel-cost">&#182;</a>                </div>                       <h3><code>$.reel.cost</code></h3>

<p><code>Number</code>, since 1.1</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">cost</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id='Private-scoped-Variables'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Private-scoped-Variables">&#182;</a>                </div>                       <hr />

<h2>Private-scoped Variables</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">pool</span><span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">),</span>
    <span class="nx">client</span><span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">,</span>
    <span class="nx">browser</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">ua</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">exec</span><span class="p">(</span><span class="nx">client</span><span class="p">)</span> <span class="o">||</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">ua</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">exec</span><span class="p">(</span><span class="nx">client</span><span class="p">)</span> <span class="o">||</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">ua</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">exec</span><span class="p">(</span><span class="nx">client</span><span class="p">),</span>
    <span class="nx">browser_version</span><span class="o">=</span> <span class="o">+</span><span class="nx">browser</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">),</span>
    <span class="nx">ie</span><span class="o">=</span> <span class="nx">browser</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;MSIE&#39;</span><span class="p">,</span>
    <span class="nx">knows_data_urls</span><span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">ie</span> <span class="o">&amp;&amp;</span> <span class="nx">browser_version</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">),</span>
    <span class="nx">ticker</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='CSS-Class-Names'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#CSS-Class-Names">&#182;</a>                </div>                       <hr />

<h2>CSS Class Names</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-174'>             <td class="docs">                       <p>These are all the class names assigned by Reel to various DOM elements during initialization of the UI
and they all share same base <code>"reel"</code>, which in isolation also is the class of the <code>&lt;img&gt;</code> node you
converted into Reel.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">klass</span><span class="o">=</span> <span class="s1">&#39;reel&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-175'>             <td class="docs">                       <p>Rest of the class names only extend this base class forming for example <code>.reel-overlay</code>, a class
assigned to the outter instance wrapper (<code>&lt;img&gt;</code>'s injected parent).</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">overlay_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-overlay&#39;</span><span class="p">,</span>
    <span class="nx">indicator_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-indicator&#39;</span><span class="p">,</span>
    <span class="nx">preloader_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-preloader&#39;</span><span class="p">,</span>
    <span class="nx">cached_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-cached&#39;</span><span class="p">,</span>
    <span class="nx">monitor_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-monitor&#39;</span><span class="p">,</span>
    <span class="nx">annotation_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-annotation&#39;</span><span class="p">,</span>
    <span class="nx">panning_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-panning&#39;</span><span class="p">,</span>
    <span class="nx">loading_klass</span><span class="o">=</span> <span class="nx">klass</span> <span class="o">+</span> <span class="s1">&#39;-loading&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-176'>             <td class="docs">                       <p>The instance wrapper is flagged with actual frame number using a this class. _For example Reel
on frame 10 will bear a class name <code>.frame-10</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">frame_klass</span><span class="o">=</span> <span class="s1">&#39;frame-&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Shortcuts-And-Minification-Cache'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Shortcuts-And-Minification-Cache">&#182;</a>                </div>                       <hr />

<h2>Shortcuts And Minification Cache</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-178'>             <td class="docs">                       <p>Several math functions are referenced inside the private scope to yield smaller filesize
when the code is minified.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">math</span><span class="o">=</span> <span class="nb">Math</span><span class="p">,</span>
    <span class="nx">round</span><span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">round</span><span class="p">,</span> <span class="nx">floor</span><span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">floor</span><span class="p">,</span> <span class="nx">ceil</span><span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">,</span>
    <span class="nx">min</span><span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">max</span><span class="p">,</span> <span class="nx">abs</span><span class="o">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">abs</span><span class="p">,</span>
    <span class="nx">number</span><span class="o">=</span> <span class="nb">parseInt</span><span class="p">,</span>
    <span class="nx">interpolate</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">math</span><span class="p">.</span><span class="nx">interpolate</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-179'>             <td class="docs">                       <p>For the very same reason all storage key Strings are cached into local vars.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_annotations_</span><span class="o">=</span> <span class="s1">&#39;annotations&#39;</span><span class="p">,</span>
    <span class="nx">_area_</span><span class="o">=</span> <span class="s1">&#39;area&#39;</span><span class="p">,</span> <span class="nx">_auto_</span><span class="o">=</span> <span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="nx">_backup_</span><span class="o">=</span> <span class="s1">&#39;backup&#39;</span><span class="p">,</span> <span class="nx">_backwards_</span><span class="o">=</span> <span class="s1">&#39;backwards&#39;</span><span class="p">,</span> <span class="nx">_bit_</span><span class="o">=</span> <span class="s1">&#39;bit&#39;</span><span class="p">,</span> <span class="nx">_brake_</span><span class="o">=</span> <span class="s1">&#39;brake&#39;</span><span class="p">,</span> <span class="nx">_cached_</span><span class="o">=</span> <span class="s1">&#39;cached&#39;</span><span class="p">,</span> <span class="nx">_center_</span><span class="o">=</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
    <span class="nx">_clicked_</span><span class="o">=</span> <span class="s1">&#39;clicked&#39;</span><span class="p">,</span> <span class="nx">_clicked_location_</span><span class="o">=</span> <span class="s1">&#39;clicked_location&#39;</span><span class="p">,</span> <span class="nx">_clicked_on_</span><span class="o">=</span> <span class="s1">&#39;clicked_on&#39;</span><span class="p">,</span> <span class="nx">_clicked_tier_</span><span class="o">=</span> <span class="s1">&#39;clicked_tier&#39;</span><span class="p">,</span>
    <span class="nx">_cwish_</span><span class="o">=</span> <span class="s1">&#39;cwish&#39;</span><span class="p">,</span> <span class="nx">_dimensions_</span><span class="o">=</span> <span class="s1">&#39;dimensions&#39;</span><span class="p">,</span> <span class="nx">_fraction_</span><span class="o">=</span> <span class="s1">&#39;fraction&#39;</span><span class="p">,</span> <span class="nx">_frame_</span><span class="o">=</span> <span class="s1">&#39;frame&#39;</span><span class="p">,</span>
    <span class="nx">_frames_</span><span class="o">=</span> <span class="s1">&#39;frames&#39;</span><span class="p">,</span> <span class="nx">_hi_</span><span class="o">=</span> <span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="nx">_hidden_</span><span class="o">=</span> <span class="s1">&#39;hidden&#39;</span><span class="p">,</span> <span class="nx">_image_</span><span class="o">=</span> <span class="s1">&#39;image&#39;</span><span class="p">,</span> <span class="nx">_images_</span><span class="o">=</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="nx">_opening_</span><span class="o">=</span> <span class="s1">&#39;opening&#39;</span><span class="p">,</span> <span class="nx">_opening_ticks_</span><span class="o">=</span> <span class="nx">_opening_</span><span class="o">+</span><span class="s1">&#39;_ticks&#39;</span><span class="p">,</span>
    <span class="nx">_lo_</span><span class="o">=</span> <span class="s1">&#39;lo&#39;</span><span class="p">,</span> <span class="nx">_options_</span><span class="o">=</span> <span class="s1">&#39;options&#39;</span><span class="p">,</span> <span class="nx">_playing_</span><span class="o">=</span> <span class="s1">&#39;playing&#39;</span><span class="p">,</span> <span class="nx">_preloaded_</span><span class="o">=</span> <span class="s1">&#39;preloaded&#39;</span><span class="p">,</span> <span class="nx">_reeling_</span><span class="o">=</span> <span class="s1">&#39;reeling&#39;</span><span class="p">,</span> <span class="nx">_reeled_</span><span class="o">=</span> <span class="s1">&#39;reeled&#39;</span><span class="p">,</span> <span class="nx">_revolution_</span><span class="o">=</span> <span class="s1">&#39;revolution&#39;</span><span class="p">,</span>
    <span class="nx">_revolution_y_</span><span class="o">=</span> <span class="s1">&#39;revolution_y&#39;</span><span class="p">,</span> <span class="nx">_row_</span><span class="o">=</span> <span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="nx">_rows_</span><span class="o">=</span> <span class="s1">&#39;rows&#39;</span><span class="p">,</span> <span class="nx">_spacing_</span><span class="o">=</span> <span class="s1">&#39;spacing&#39;</span><span class="p">,</span> <span class="nx">_speed_</span><span class="o">=</span> <span class="s1">&#39;speed&#39;</span><span class="p">,</span> <span class="nx">_stage_</span><span class="o">=</span> <span class="s1">&#39;stage&#39;</span><span class="p">,</span>
    <span class="nx">_stitched_shift_</span><span class="o">=</span> <span class="s1">&#39;stitched_shift&#39;</span><span class="p">,</span> <span class="nx">_stitched_travel_</span><span class="o">=</span> <span class="s1">&#39;stitched_travel&#39;</span><span class="p">,</span> <span class="nx">_stopped_</span><span class="o">=</span> <span class="s1">&#39;stopped&#39;</span><span class="p">,</span> <span class="nx">_style_</span><span class="o">=</span> <span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="nx">_tempo_</span><span class="o">=</span> <span class="s1">&#39;tempo&#39;</span><span class="p">,</span> <span class="nx">_tier_</span><span class="o">=</span> <span class="s1">&#39;tier&#39;</span><span class="p">,</span>
    <span class="nx">_velocity_</span><span class="o">=</span> <span class="s1">&#39;velocity&#39;</span><span class="p">,</span> <span class="nx">_vertical_</span><span class="o">=</span> <span class="s1">&#39;vertical&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-180'>             <td class="docs">                       <p>And the same goes for browser events too.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">ns</span><span class="o">=</span> <span class="nx">dot</span><span class="p">(</span><span class="nx">klass</span><span class="p">),</span>
    <span class="nx">pns</span><span class="o">=</span> <span class="nx">dot</span><span class="p">(</span><span class="s1">&#39;pan&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">ns</span><span class="p">,</span>
    <span class="nx">_touch_</span><span class="o">=</span> <span class="s1">&#39;touch&#39;</span><span class="p">,</span> <span class="nx">_mouse_</span><span class="o">=</span> <span class="s1">&#39;mouse&#39;</span><span class="p">,</span>
    <span class="nx">_mousedown_</span><span class="o">=</span> <span class="nx">_mouse_</span><span class="o">+</span><span class="s1">&#39;down&#39;</span><span class="o">+</span><span class="nx">ns</span><span class="p">,</span> <span class="nx">_mouseenter_</span><span class="o">=</span> <span class="nx">_mouse_</span><span class="o">+</span><span class="s1">&#39;enter&#39;</span><span class="o">+</span><span class="nx">ns</span><span class="p">,</span>
    <span class="nx">_mouseleave_</span><span class="o">=</span> <span class="nx">_mouse_</span><span class="o">+</span><span class="s1">&#39;leave&#39;</span><span class="o">+</span><span class="nx">pns</span><span class="p">,</span> <span class="nx">_mousemove_</span><span class="o">=</span> <span class="nx">_mouse_</span><span class="o">+</span><span class="s1">&#39;move&#39;</span><span class="o">+</span><span class="nx">pns</span><span class="p">,</span> <span class="nx">_mouseup_</span><span class="o">=</span> <span class="nx">_mouse_</span><span class="o">+</span><span class="s1">&#39;up&#39;</span><span class="o">+</span><span class="nx">pns</span><span class="p">,</span>
    <span class="nx">_mousewheel_</span><span class="o">=</span> <span class="nx">_mouse_</span><span class="o">+</span><span class="s1">&#39;wheel&#39;</span><span class="o">+</span><span class="nx">ns</span><span class="p">,</span> <span class="nx">_tick_</span><span class="o">=</span> <span class="s1">&#39;tick&#39;</span><span class="o">+</span><span class="nx">ns</span><span class="p">,</span> <span class="nx">_touchcancel_</span><span class="o">=</span> <span class="nx">_touch_</span><span class="o">+</span><span class="s1">&#39;cancel&#39;</span><span class="o">+</span><span class="nx">pns</span><span class="p">,</span>
    <span class="nx">_touchend_</span><span class="o">=</span> <span class="nx">_touch_</span><span class="o">+</span><span class="s1">&#39;end&#39;</span><span class="o">+</span><span class="nx">pns</span><span class="p">,</span> <span class="nx">_touchstart_</span><span class="o">=</span> <span class="nx">_touch_</span><span class="o">+</span><span class="s1">&#39;start&#39;</span><span class="o">+</span><span class="nx">ns</span><span class="p">,</span> <span class="nx">_touchmove_</span><span class="o">=</span> <span class="nx">_touch_</span><span class="o">+</span><span class="s1">&#39;move&#39;</span><span class="o">+</span><span class="nx">pns</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-181'>             <td class="docs">                       <p>And some other frequently used Strings.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">__</span><span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nx">___</span><span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nx">____</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="nx">_absolute_</span><span class="o">=</span> <span class="s1">&#39;absolute&#39;</span><span class="p">,</span> <span class="nx">_block_</span><span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span> <span class="nx">_cdn_</span><span class="o">=</span> <span class="s1">&#39;@CDN@&#39;</span><span class="p">,</span> <span class="nx">_div_</span><span class="o">=</span> <span class="s1">&#39;div&#39;</span><span class="p">,</span>
    <span class="nx">_hand_</span><span class="o">=</span> <span class="s1">&#39;hand&#39;</span><span class="p">,</span> <span class="nx">_head_</span><span class="o">=</span> <span class="s1">&#39;head&#39;</span><span class="p">,</span> <span class="nx">_height_</span><span class="o">=</span> <span class="s1">&#39;height&#39;</span><span class="p">,</span> <span class="nx">_html_</span><span class="o">=</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="nx">_id_</span><span class="o">=</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
    <span class="nx">_img_</span><span class="o">=</span> <span class="s1">&#39;img&#39;</span><span class="p">,</span> <span class="nx">_jquery_reel_</span><span class="o">=</span> <span class="s1">&#39;jquery.&#39;</span><span class="o">+</span><span class="nx">klass</span><span class="p">,</span> <span class="nx">_move_</span><span class="o">=</span> <span class="s1">&#39;move&#39;</span><span class="p">,</span> <span class="nx">_none_</span><span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">,</span> <span class="nx">_object_</span><span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">,</span>
    <span class="nx">_preload_</span><span class="o">=</span> <span class="s1">&#39;preload&#39;</span><span class="p">,</span> <span class="nx">_string_</span><span class="o">=</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
    <span class="nx">_width_</span><span class="o">=</span> <span class="s1">&#39;width&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='Image-Resources'>             <td class="docs">                        <div class="pilwrap">                  <a class="pilcrow" href="#Image-Resources">&#182;</a>                </div>                       <hr />

<h2>Image Resources</h2>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id='section-183'>             <td class="docs">                       <p>Alhough we do what we can to hide the fact, Reel actually needs a few image resources to support
some of its actions. First, we may need a transparent image for the original <code>&lt;img&gt;</code> to uncover
the sprite applied to its background. This one is embedded in the code as it is very small.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">transparent</span><span class="o">=</span> <span class="nx">knows_data_urls</span> <span class="o">?</span> <span class="nx">embedded</span><span class="p">(</span><span class="s1">&#39;CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7&#39;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">_cdn_</span><span class="o">+</span><span class="s1">&#39;blank.gif&#39;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-184'>             <td class="docs">                       <p>Proper cross-browser cursors however need to come in an odd format, which essentially is not
compressed at all and this means bigger filesize. While it is no more than ~15k, it is unfit
for embedding directly here, so a <a href="#Content-Delivery-Network"><code>CDN</code></a> is employed to retrieve
the images from in an effective gzipped and cachable manner.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">reel_cursor</span><span class="o">=</span> <span class="nx">url</span><span class="p">(</span><span class="nx">_cdn_</span><span class="o">+</span><span class="nx">_jquery_reel_</span><span class="o">+</span><span class="s1">&#39;.cur&#39;</span><span class="p">)</span><span class="o">+</span><span class="nx">____</span><span class="o">+</span><span class="nx">_move_</span><span class="p">,</span>
    <span class="nx">drag_cursor</span><span class="o">=</span> <span class="nx">url</span><span class="p">(</span><span class="nx">_cdn_</span><span class="o">+</span><span class="nx">_jquery_reel_</span><span class="o">+</span><span class="s1">&#39;-drag.cur&#39;</span><span class="p">)</span><span class="o">+</span><span class="nx">____</span><span class="o">+</span><span class="nx">_move_</span><span class="p">,</span>
    <span class="nx">drag_cursor_down</span><span class="o">=</span> <span class="nx">url</span><span class="p">(</span><span class="nx">_cdn_</span><span class="o">+</span><span class="nx">_jquery_reel_</span><span class="o">+</span><span class="s1">&#39;-drag-down.cur&#39;</span><span class="p">)</span><span class="o">+</span><span class="nx">____</span><span class="o">+</span><span class="nx">_move_</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-185'>             <td class="docs">                       <p>~~~</p>

<p>We then only identify the user's browser's capabilities and route around a MSIE's left button
identification quirk (IE 8- reports left as right).</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">touchy</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">touchy</span><span class="o">=</span> <span class="p">(</span><span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">touchy_agent</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">client</span><span class="p">),</span>
    <span class="nx">lazy</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">lazy</span><span class="o">=</span> <span class="p">(</span><span class="nx">reel</span><span class="p">.</span><span class="nx">re</span><span class="p">.</span><span class="nx">lazy_agent</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span><span class="nx">client</span><span class="p">),</span>

    <span class="nx">DRAG_BUTTON</span><span class="o">=</span> <span class="nx">touchy</span> <span class="o">?</span> <span class="kc">undefined</span> <span class="o">:</span> <span class="p">(</span><span class="nx">ie</span> <span class="o">&amp;&amp;</span> <span class="nx">browser_version</span> <span class="o">&lt;</span> <span class="mi">9</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id='section-186'>             <td class="docs">                       <p>~~~</p>

<p>So far jQuery doesn't have a proper built-in mechanism to detect/report DOM node removal.
But internally, jQuery calls <code>$.cleanData()</code> to flush the DOM data and minimize memory leaks.
Reel wraps this function and as a result <code>clean</code> event handler is triggered for every element.
Note, that the <code>clean</code> event does not bubble.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">cleanData</span><span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">,</span>
    <span class="nx">cleanDataEvent</span><span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">cleanData</span><span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">elements</span><span class="p">){</span>
      <span class="nx">cleanData</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">elements</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">triggerHandler</span><span class="p">(</span><span class="s1">&#39;clean&#39;</span><span class="p">);</span> <span class="p">}));</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id='section-187'>             <td class="docs">                       <p>Expose plugin functions as jQuery methods</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">fn</span><span class="p">,</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">fn</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id='section-188'>             <td class="docs">                       <p>Very useful helpers</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">function</span> <span class="nx">add_instance</span><span class="p">(</span><span class="nx">$instance</span><span class="p">){</span> <span class="k">return</span> <span class="p">(</span><span class="nx">reel</span><span class="p">.</span><span class="nx">instances</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">$instance</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">&amp;&amp;</span> <span class="nx">$instance</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">remove_instance</span><span class="p">(</span><span class="nx">$instance</span><span class="p">){</span> <span class="k">return</span> <span class="p">(</span><span class="nx">reel</span><span class="p">.</span><span class="nx">instances</span><span class="o">=</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">instances</span><span class="p">.</span><span class="nx">not</span><span class="p">(</span><span class="nx">hash</span><span class="p">(</span><span class="nx">$instance</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">_id_</span><span class="p">))))</span> <span class="o">&amp;&amp;</span> <span class="nx">$instance</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">leader</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span> <span class="k">return</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">instances</span><span class="p">.</span><span class="nx">first</span><span class="p">().</span><span class="nx">data</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">embedded</span><span class="p">(</span><span class="nx">image</span><span class="p">){</span> <span class="k">return</span> <span class="s1">&#39;data:image/gif;base64,R0lGODlh&#39;</span> <span class="o">+</span> <span class="nx">image</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">tag</span><span class="p">(</span><span class="nx">string</span><span class="p">){</span> <span class="k">return</span> <span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="nx">string</span> <span class="o">+</span> <span class="s1">&#39;/&gt;&#39;</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">dot</span><span class="p">(</span><span class="nx">string</span><span class="p">){</span> <span class="k">return</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">string</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">cdn</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span> <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">_cdn_</span><span class="p">,</span> <span class="nx">reel</span><span class="p">.</span><span class="nx">cdn</span><span class="p">)</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">url</span><span class="p">(</span><span class="nx">location</span><span class="p">){</span> <span class="k">return</span> <span class="s1">&#39;url(\&#39;&#39;</span> <span class="o">+</span> <span class="nx">reen</span><span class="p">(</span><span class="nx">location</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;\&#39;)&#39;</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">axis</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">){</span> <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">==</span> <span class="nx">_object_</span> <span class="o">?</span> <span class="nx">value</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">:</span> <span class="nx">value</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">min_max</span><span class="p">(</span><span class="nx">minimum</span><span class="p">,</span> <span class="nx">maximum</span><span class="p">,</span> <span class="nx">number</span><span class="p">){</span> <span class="k">return</span> <span class="nx">max</span><span class="p">(</span><span class="nx">minimum</span><span class="p">,</span> <span class="nx">min</span><span class="p">(</span><span class="nx">maximum</span><span class="p">,</span> <span class="nx">number</span><span class="p">))</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">negative_when</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">condition</span><span class="p">){</span> <span class="k">return</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">condition</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">finger</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">touchy</span> <span class="o">?</span> <span class="nx">e</span><span class="p">.</span><span class="nx">touch</span> <span class="o">||</span> <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">e</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">px</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span> <span class="k">return</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">==</span> <span class="nx">_string_</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">&#39;px&#39;</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">hash</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span> <span class="k">return</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="nx">value</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">pad</span><span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">len</span><span class="p">,</span> <span class="nx">fill</span><span class="p">){</span> <span class="k">while</span> <span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">)</span> <span class="nx">string</span><span class="o">=</span> <span class="nx">fill</span> <span class="o">+</span> <span class="nx">string</span><span class="p">;</span> <span class="k">return</span> <span class="nx">string</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">reen</span><span class="p">(</span><span class="nx">uri</span><span class="p">){</span> <span class="k">return</span> <span class="nb">encodeURI</span><span class="p">(</span><span class="nb">decodeURI</span><span class="p">(</span><span class="nx">uri</span><span class="p">))</span> <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">deprecated</span><span class="p">(</span><span class="nx">input</span><span class="p">){</span> <span class="k">try</span><span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s1">&#39;Deprecation - Please consult https://github.com/pisi/Reel/wiki/Deprecations&#39;</span><span class="p">)</span> <span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">){}</span> <span class="k">return</span> <span class="nx">input</span> <span class="p">}</span>
<span class="p">})(</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="nb">document</span><span class="p">);</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 