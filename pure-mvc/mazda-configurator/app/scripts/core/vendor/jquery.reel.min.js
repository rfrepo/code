/*
 Copyright (c) 2009-2013 Petr Vostrel (http://petr.vostrel.cz/)
 Dual licensed under the MIT (MIT-LICENSE.txt)
 and GPL (GPL-LICENSE.txt) licenses.

 jQuery Reel
 http://jquery.vostrel.cz/reel
 Version: 1.2.1
 Updated: 2013-02-23

 Requires jQuery 1.5 or higher
 */

jQuery.reel||(function($,window,document,undefined){if(!$||+$().jquery.replace('.',__).substr(0,2)<15)return;var
    reel=$.reel={version:'1.2-devel',def:{frame:1,frames:36,loops:true,clickfree:false,draggable:true,scrollable:true,steppable:true,throwable:true,wheelable:true,cw:false,revolution:undefined,stitched:0,directional:false,row:1,rows:0,orbital:0,vertical:false,inversed:false,footage:6,spacing:0,horizontal:true,suffix:'-reel',image:undefined,images:'',path:'',preload:'fidelity',speed:0,delay:0,timeout:2,rebound:0.5,entry:undefined,opening:0,brake:0.23,velocity:0,tempo:36,laziness:6,cursor:undefined,hint:'',indicator:0,klass:'',preloader:2,area:undefined,attr:{},annotations:undefined,graph:undefined,monitor:undefined,step:undefined,steps:undefined},fn:{reel:function(){var
        args=arguments,t=$(this),data=t.data(),name=args[0]||{},value=args[1]if(typeof name=='object'){var
        opt=$.extend({},reel.def,name),applicable=t.filter(_img_).unreel().filter(function(){var
            $this=$(this),attr=opt.attr,src=attr.src||$this.attr('src'),width=attr.width||$this.width(),height=attr.height||$this.height()if(src&&width&&height)return true;}),instances=[]opt.step&&(opt.frame=opt.step);opt.steps&&(opt.frames=opt.steps);applicable.each(function(){var
        t=$(this),set=function(name,value){return t.reel(name,value)&&value},get=function(name){return t.reel(name)},on={setup:function(e){if(t.hasClass(klass))return;set(_options_,opt);var
            src=t.attr(opt.attr).attr('src'),id=set(_id_,t.attr(_id_)||t.attr(_id_,klass+'-'+(+new Date())).attr(_id_)),styles=t.attr(_style_),data=$.extend({},t.data()),images=opt.images,stitched=opt.stitched,loops=opt.loops,orbital=opt.orbital,revolution=opt.revolution,rows=opt.rows,footage=opt.footage,sequence=reel.re.sequence.exec(images),images=set(_images_,sequence?reel.sequence(sequence,opt,get):images||[]),size={x:t.width(),y:t.height()},frames=set(_frames_,orbital&&footage||rows<=1&&images.length||opt.frames),multirow=rows>1||orbital,revolution_x=set(_revolution_,axis('x',revolution)||stitched/2||size.x*2),revolution_y=set(_revolution_y_,!multirow?0:(axis('y',revolution)||(rows>3?size.y:size.y/(5-rows)))),rows=stitched?1:ceil(frames/footage),stage_id=hash(id+opt.suffix),classes=t[0].className||__,$overlay=$(tag(_div_),{id:stage_id.substr(1),'class':classes+___+overlay_klass+___+frame_klass+'0'}),$instance=t.wrap($overlay.addClass(opt.klass)).attr({'class':klass}),instances_count=instances.push(add_instance($instance)[0]),$overlay=$instance.parent().bind(on.instance);var newSrc=src.slice(0,(-1*(opt.premove.length+4)))+'.png';src=newSrc.replace(reel.re.image,'$1'+opt.suffix+'.$2');set(_image_,images.length?__:opt.image||src);set(_cached_,[]);set(_spacing_,opt.spacing);set(_rows_,rows);set(_dimensions_,size);set(_bit_,1/(frames-(loops&&!stitched?0:1)));set(_stitched_travel_,stitched-(loops?0:size.x));set(_stitched_shift_,0);set(_stage_,stage_id);set(_backwards_,set(_speed_,opt.speed)<0);set(_velocity_,0);set(_vertical_,opt.vertical);set(_preloaded_,0);set(_cwish_,negative_when(1,!opt.cw&&!stitched));set(_clicked_location_,{});set(_clicked_,false);set(_clicked_on_,set(_clicked_tier_,0));set(_lo_,set(_hi_,0));set(_reeling_,false);set(_reeled_,false);set(_opening_,false);set(_brake_,opt.brake);set(_center_,!!orbital);set(_tempo_,opt.tempo/(reel.lazy?opt.laziness:1));set(_opening_ticks_,-1);set(_annotations_,opt.annotations||$overlay.unbind(dot(_annotations_))&&{});set(_backup_,{src:src,classes:classes,style:styles||__,data:data});opt.steppable||$overlay.unbind('up.steppable');opt.indicator||$overlay.unbind('.indicator');css(__,{width:size.x,height:size.y,overflow:_hidden_,position:'relative'});css(____+___+dot(klass),{display:_block_});pool.bind(on.pool);t.trigger('setup');},instance:{teardown:function(e){var
            backup=t.data(_backup_)t.parent().unbind(on.instance);get(_style_).remove();get(_area_).unbind(ns);remove_instance(t.unbind(ns).removeData().siblings().unbind(ns).remove().end().attr({'class':backup.classes,src:backup.src,style:backup.style}).data(backup.data).unwrap());no_bias();pool.unbind(on.pool);pools.unbind(pns);},setup:function(e){var
            space=get(_dimensions_),frames=get(_frames_),id=t.attr(_id_),rows=opt.rows,stitched=opt.stitched,$overlay=t.parent(),$area=set(_area_,$(opt.area||$overlay)),rows=opt.rows||1
            css(___+dot(klass),{MozUserSelect:_none_,WebkitUserSelect:_none_});if(touchy){css(___+dot(klass),{WebkitBackgroundSize:get(_images_).length?!stitched?undefined:px(stitched)+___+px(space.y):stitched&&px(stitched)+___+px((space.y+opt.spacing)*rows-opt.spacing)||px(space.x*opt.footage)+___+px(space.y*get(_rows_)*rows*(opt.directional?2:1))});$area.bind(_touchstart_,press)}else{var
                cursor=opt.cursor,cursor_up=cursor==_hand_?drag_cursor:cursor||reel_cursor,cursor_down=cursor==_hand_?drag_cursor_down+___+'!important':undefined
                css(__,{cursor:cdn(cursor_up)});css(dot(loading_klass),{cursor:'wait'});css(dot(panning_klass)+____+dot(panning_klass)+' *',{cursor:cdn(cursor_down||cursor_up)},true);$area.bind(opt.wheelable?_mousewheel_:null,wheel).bind(opt.clickfree?_mouseenter_:_mousedown_,press).bind('dragstart',function(){return false})}function press(e){return t.trigger('down',[finger(e).clientX,finger(e).clientY,e])&&e.give}function wheel(e,delta){return!delta||t.trigger('wheel',[delta,e])&&e.give}opt.hint&&$area.attr('title',opt.hint);opt.indicator&&$overlay.append(indicator('x'));rows>1&&opt.indicator&&$overlay.append(indicator('y'));opt.monitor&&$overlay.append($monitor=$(tag(_div_),{'class':monitor_klass}))&&css(___+dot(monitor_klass),{position:_absolute_,left:0,top:0});css(___+dot(cached_klass),{display:_none_});},preload:function(e){var
            space=get(_dimensions_),$overlay=t.parent(),images=get(_images_),is_sprite=!images.length,frames=get(_frames_),footage=opt.footage,order=reel.preload[opt.preload]||reel.preload[reel.def.preload],preload=is_sprite?[get(_image_)]:order(images.slice(0),opt,get),to_load=preload.length,preloaded=set(_preloaded_,is_sprite?0.5:0),uris=[]$overlay.addClass(loading_klass).append(preloader());set(_style_,$('<'+_style_+' type="text/css">'+css.rules.join('\n')+'</'+_style_+'>').prependTo(_head_));t.trigger('stop');while(preload.length){var
            uri=opt.path+preload.shift(),width=space.x*(!is_sprite?1:footage),height=space.y*(!is_sprite?1:frames/footage)*(!opt.directional?1:2),$img=$(tag(_img_)).attr({'class':cached_klass,width:width,height:height}).appendTo($overlay)$img.bind('load error abort',function(){return!!$(this).parent().length&&t.trigger('preloaded')&&false;});load(uri,$img);uris.push(uri);}set(_cached_,uris);function load(uri,$img){setTimeout(function(){$img.parent().length&&$img.attr({src:reen(uri)});},(to_load-preload.length)*2)}},preloaded:function(e){var
            images=get(_images_).length||1,preloaded=set(_preloaded_,min(get(_preloaded_)+1,images))if(preloaded===images){t.parent().removeClass(loading_klass).unbind(_preloaded_,on.instance.preloaded);t.trigger('loaded');}if(preloaded===1)var
            frame=t.trigger('frameChange',[undefined,get(_frame_)])},loaded:function(e){get(_images_).length>1||t.css({backgroundImage:url(opt.path+get(_image_))}).attr({src:cdn(transparent)});opt.stitched&&t.attr({src:cdn(transparent)});get(_reeled_)||set(_velocity_,opt.velocity||0);},opening:function(e){if(!opt.opening)return t.trigger('openingDone');var
            opening=set(_opening_,true),stopped=set(_stopped_,!get(_speed_)),speed=opt.entry||opt.speed,end=get(_fraction_),duration=opt.opening,start=set(_fraction_,end-speed*duration),ticks=set(_opening_ticks_,ceil(duration*leader(_tempo_)))},openingDone:function(e){var
            playing=set(_playing_,false),opening=set(_opening_,false),evnt=_tick_+dot(_opening_)pool.unbind(evnt,on.pool[evnt]);if(opt.delay>0)delay=setTimeout(function(){t.trigger('play')},opt.delay*1000)else t.trigger('play');},play:function(e,speed){var
            speed=set(_speed_,speed||get(_speed_)),duration=opt.duration,backwards=set(_backwards_,speed<0),playing=set(_playing_,!!speed),stopped=set(_stopped_,!playing)idle();},pause:function(e){unidle();},stop:function(e){var
            stopped=set(_stopped_,true),playing=set(_playing_,!stopped)},down:function(e,x,y,ev){if(ev&&ev.button!=DRAG_BUTTON&&!opt.clickfree)return;if(opt.draggable){var
            clicked=set(_clicked_,get(_frame_)),clickfree=opt.clickfree,velocity=set(_velocity_,0),origin=last=recenter_mouse(get(_revolution_),x,y)touchy||ev&&ev.preventDefault();unidle();no_bias();panned=false;$(_html_,pools).addClass(panning_klass);if(touchy){pools.bind(_touchmove_,drag).bind(_touchend_+___+_touchcancel_,lift)}else{(clickfree?get(_area_):pools).bind(_mousemove_,drag).bind(clickfree?_mouseleave_:_mouseup_,lift)}}function drag(e){return t.trigger('pan',[finger(e).clientX,finger(e).clientY,e])&&e.give}function lift(e){return t.trigger('up',[e])&&e.give}},up:function(e,ev){var
            clicked=set(_clicked_,false),reeling=set(_reeling_,false),throwable=opt.throwable,biases=abs(bias[0]+bias[1])/60,velocity=set(_velocity_,!throwable?0:throwable===true?biases:min(throwable,biases)),brakes=braking=velocity?1:0
            unidle();no_bias();$(_html_,pools).removeClass(panning_klass);(opt.clickfree?get(_area_):pools).unbind(pns);},pan:function(e,x,y,ev){if(opt.draggable&&slidable){slidable=false;unidle();var
            rows=opt.rows,orbital=opt.orbital,scrollable=touchy&&!get(_reeling_)&&rows<=1&&!orbital&&opt.scrollable,delta={x:x-last.x,y:y-last.y}if(ev&&scrollable&&abs(delta.x)<abs(delta.y))return ev.give=true;if(abs(delta.x)>0||abs(delta.y)>0){ev&&(ev.give=false);panned=true;last={x:x,y:y};var
            revolution=get(_revolution_),origin=get(_clicked_location_),vertical=get(_vertical_),fraction=set(_fraction_,graph(vertical?y-origin.y:x-origin.x,get(_clicked_on_),revolution,get(_lo_),get(_hi_),get(_cwish_),vertical?y-origin.y:x-origin.x)),reeling=set(_reeling_,get(_reeling_)||get(_frame_)!=get(_clicked_)),motion=to_bias(vertical?delta.y:delta.x||0),backwards=motion&&set(_backwards_,motion<0)if(orbital&&get(_center_))var
            vertical=set(_vertical_,abs(y-origin.y)>abs(x-origin.x)),origin=recenter_mouse(revolution,x,y)if(rows>1)var
            space_y=get(_dimensions_).y,revolution_y=get(_revolution_y_),start=get(_clicked_tier_),lo=-start*revolution_y,tier=set(_tier_,reel.math.envelope(y-origin.y,start,revolution_y,lo,lo+revolution_y,-1))if(!(fraction%1)&&!opt.loops)var
            origin=recenter_mouse(revolution,x,y)}}},wheel:function(e,distance,ev){if(!distance)return;wheeled=true;var
            delta=ceil(math.sqrt(abs(distance))/2),delta=negative_when(delta,distance>0),revolution=0.0833*get(_revolution_),origin=recenter_mouse(revolution),backwards=delta&&set(_backwards_,delta<0),velocity=set(_velocity_,0),fraction=set(_fraction_,graph(delta,get(_clicked_on_),revolution,get(_lo_),get(_hi_),get(_cwish_)))ev&&ev.preventDefault();ev&&(ev.give=false);unidle();t.trigger('up',[ev]);},fractionChange:function(e,set_fraction,fraction){if(set_fraction!==undefined)return deprecated(set(_fraction_,set_fraction));var
            frame=1+floor(fraction/get(_bit_)),multirow=opt.rows>1,orbital=opt.orbital,center=set(_center_,!!orbital&&(frame<=orbital||frame>=opt.footage-orbital+2))if(multirow)var
            frame=frame+(get(_row_)-1)*get(_frames_)var
            frame=set(_frame_,frame)},tierChange:function(e,deprecated_set,tier){if(deprecated_set===undefined)var
            row=set(_row_,round(interpolate(tier,1,opt.rows))),frames=get(_frames_),frame=get(_frame_)%frames||frames,frame=set(_frame_,frame+row*frames-frames)},rowChange:function(e,set_row,row){if(set_row!==undefined)return set(_row_,set_row);var
            tier=set(_tier_,1/(opt.rows-1)*(row-1))},frameChange:function(e,set_frame,frame){if(set_frame!==undefined)return deprecated(set(_frame_,set_frame));this.className=this.className.replace(reel.re.frame_klass,frame_klass+frame);var
            frames=get(_frames_),rows=opt.rows,path=opt.path,base=frame%frames||frames,ready=!!get(_preloaded_),frame_row=(frame-base)/frames+1,frame_tier=(frame_row-1)/(rows-1),tier_row=round(interpolate(frame_tier,1,rows)),row=get(_row_),tier=ready&&tier_row===row?get(_tier_):set(_tier_,frame_tier),frame_fraction=min((base-1)/(frames-1),0.9999),row_shift=row*frames-frames,fraction_frame=round(interpolate(frame_fraction,row_shift+1,row_shift+frames)),same_spot=abs((get(_fraction_)||0)-frame_fraction)<1/(get(_frames_)-1),fraction=ready&&(fraction_frame===frame&&same_spot)?get(_fraction_):set(_fraction_,frame_fraction),footage=opt.footage
            if(opt.orbital&&get(_vertical_))var
                frame=opt.inversed?footage+1-frame:frame,frame=frame+footage
            var
                horizontal=opt.horizontal,stitched=opt.stitched,images=get(_images_),is_sprite=!images.length||opt.stitched,spacing=get(_spacing_),space=get(_dimensions_)if(!is_sprite){var
                frameshot=images[frame-1]ready&&t.attr({src:reen(path+frameshot)})}else{if(!stitched)var
                minor=(frame%footage)-1,minor=minor<0?footage-1:minor,major=floor((frame-0.1)/footage),major=major+(rows>1?0:(get(_backwards_)?0:get(_rows_))),a=major*((horizontal?space.y:space.x)+spacing),b=minor*((horizontal?space.x:space.y)+spacing),shift=images.length?[0,0]:horizontal?[px(-b),px(-a)]:[px(-a),px(-b)]else{var
                x=set(_stitched_shift_,round(interpolate(frame_fraction,0,get(_stitched_travel_)))%stitched),y=rows<=1?0:(space.y+spacing)*(rows-row),shift=[px(-x),px(-y)],image=images.length>1&&images[row-1]image&&t.css('backgroundImage').search(path+image)<0&&t.css({backgroundImage:url(path+image)})}t.css({backgroundPosition:shift.join(___)})}},'fractionChange.indicator':function(e,deprecated_set,fraction){if(deprecated_set===undefined&&opt.indicator)var
            space=get(_dimensions_),size=opt.indicator,orbital=opt.orbital,travel=orbital&&get(_vertical_)?space.y:space.x,slots=orbital?opt.footage:opt.images.length||get(_frames_),weight=ceil(travel/slots),travel=travel-weight,indicate=round(interpolate(fraction,0,travel)),indicate=!opt.cw||opt.stitched?indicate:travel-indicate,$indicator=indicator.$x.css(get(_vertical_)?{left:0,top:px(indicate),bottom:_auto_,width:size,height:weight}:{bottom:0,left:px(indicate),top:_auto_,width:weight,height:size})},'tierChange.indicator':function(e,deprecated_set,tier){if(deprecated_set===undefined&&opt.rows>1&&opt.indicator)var
            space=get(_dimensions_),travel=space.y,slots=opt.rows,size=opt.indicator,weight=ceil(travel/slots),travel=travel-weight,indicate=round(tier*travel),$yindicator=indicator.$y.css({left:0,top:indicate,width:size,height:weight})},'setup.annotations':function(e){var
            space=get(_dimensions_),$overlay=t.parent(),film_css={position:_absolute_,width:space.x,height:space.y,left:0,top:0}$.each(get(_annotations_),function(ida,note){var
            $note=typeof note.node==_string_?$(note.node):note.node||{},$note=$note.jquery?$note:$(tag(_div_),$note),$note=$note.attr({id:ida}).addClass(annotation_klass),$image=note.image?$(tag(_img_),note.image):$(),$link=note.link?$(tag('a'),note.link).click(function(){return false}):$()css(hash(ida),{display:_none_,position:_absolute_},true);note.image||note.link&&$note.append($link);note.link||note.image&&$note.append($image);note.link&&note.image&&$note.append($link.append($image));$note.appendTo($overlay);});},'frameChange.annotations':function(e,deprecation,frame){var
            space=get(_dimensions_),stitched=opt.stitched,ss=get(_stitched_shift_)if(!get(_preloaded_))return;if(deprecation===undefined)$.each(get(_annotations_),function(ida,note){var
            $note=$(hash(ida)),start=note.start||1,end=note.end,offset=frame-1,at=note.at?(note.at[offset]=='+'):false,offset=note.at?offset:offset-start+1,x=typeof note.x!=_object_?note.x:note.x[offset],y=typeof note.y!=_object_?note.y:note.y[offset],placed=x!==undefined&&y!==undefined,visible=placed&&(note.at?at:(offset>=0&&(!end||offset<=end-start)))if(stitched)var
            on_edge=x<space.x&&ss>stitched-space.x,after_edge=x>stitched-space.x&&ss>=0&&ss<space.x,x=!on_edge?x:x+stitched,x=!after_edge?x:x-stitched,x=x-ss
            var
                style={display:visible?_block_:_none_,left:px(x),top:px(y)}$note.css(style);});},'up.annotations':function(e,ev){if(panned||wheeled)return;var
            $target=$(ev.target),$link=($target.is('a')?$target:$target.parents('a')),href=$link.attr('href'),target=$link.attr('target')||'self'if(!href)return;if(target=='_blank')panned=!!window.open(href)else panned=!!(window[target].location.href=href)},'up.steppable':function(e,ev){if(panned||wheeled)return;t.trigger(get(_clicked_location_).x-t.offset().left>0.5*get(_dimensions_).x?'stepRight':'stepLeft')},'stepLeft stepRight':function(e){unidle();},stepLeft:function(e){set(_backwards_,false);set(_fraction_,get(_fraction_)-get(_bit_)*get(_cwish_));},stepRight:function(e){set(_backwards_,true);set(_fraction_,get(_fraction_)+get(_bit_)*get(_cwish_));},'setup.fu':function(e){var
            frame=set(_frame_,opt.frame+(opt.row-1)*get(_frames_))t.trigger('preload')},'wheel.fu':function(){wheeled=false},'clean.fu':function(){t.trigger('teardown')},'loaded.fu':function(){t.trigger('opening')}},pool:{'tick.reel.preload':function(e){var
            space=get(_dimensions_),current=number(preloader.$.css(_width_)),images=get(_images_).length||1,target=round(1/images*get(_preloaded_)*space.x)preloader.$.css({width:current+(target-current)/3+1})if(get(_preloaded_)===images&&current>space.x-1){preloader.$.fadeOut(300,function(){preloader.$.remove()});pool.unbind(_tick_+dot(_preload_),on.pool[_tick_+dot(_preload_)]);}},'tick.reel':function(e){var
            velocity=get(_velocity_),leader_tempo=leader(_tempo_),monitor=opt.monitor
            if(braking)var
                braked=velocity-(get(_brake_)/leader_tempo*braking),velocity=set(_velocity_,braked>0.1?braked:(braking=operated=0))monitor&&$monitor.text(get(monitor));velocity&&braking++;operated&&operated++;to_bias(0);slidable=true;if(operated&&!velocity)return mute(e);if(get(_clicked_))return mute(e,unidle());if(get(_opening_ticks_)>0)return;if(!opt.loops&&opt.rebound)var
                edgy=!operated&&!(get(_fraction_)%1)?on_edge++:(on_edge=0),bounce=on_edge>=opt.rebound*1000/leader_tempo,backwards=bounce&&set(_backwards_,!get(_backwards_))var
                direction=get(_cwish_)*negative_when(1,get(_backwards_)),step=(!get(_playing_)?velocity:abs(get(_speed_))+velocity)/leader(_tempo_),fraction=set(_fraction_,get(_fraction_)-step*direction)},'tick.reel.opening':function(e){if(!get(_opening_))return;var
            speed=opt.entry||opt.speed,step=speed/leader(_tempo_)*(opt.cw?-1:1),ticks=set(_opening_ticks_,get(_opening_ticks_)-1),fraction=set(_fraction_,get(_fraction_)+step)ticks||t.trigger('openingDone');}}},mute=function(e,result){return e.stopImmediatePropagation()||result},operated,braking=0,idle=function(){return operated=0},unidle=function(){clearTimeout(delay);pool.unbind(_tick_+dot(_opening_),on.pool[_tick_+dot(_opening_)]);set(_opening_ticks_,0);set(_reeled_,true);return operated=-opt.timeout*leader(_tempo_)},panned=false,wheeled=false,delay,$monitor=$(),preloader=function(){var
            size=opt.preloader
            css(___+dot(preloader_klass),{position:_absolute_,left:0,top:get(_dimensions_).y-size,height:size,overflow:_hidden_,backgroundColor:'#000'});return preloader.$=$(tag(_div_),{'class':preloader_klass})},indicator=function(axis){css(___+dot(indicator_klass)+dot(axis),{position:_absolute_,width:0,height:0,overflow:_hidden_,backgroundColor:'#000'});return indicator['$'+axis]=$(tag(_div_),{'class':indicator_klass+___+axis})},css=function(selector,definition,global){var
            stage=global?__:get(_stage_),selector=selector.replace(/^/,stage).replace(____,____+stage)return css.rules.push(selector+cssize(definition))&&definition
            function cssize(values){var rules=[];$.each(values,function(key,value){rules.push(key.replace(/([A-Z])/g,'-$1').toLowerCase()+':'+px(value)+';')});return'{'+rules.join(__)+'}'}},$style,on_edge=0,last={x:0,y:0},to_bias=function(value){return bias.push(value)&&bias.shift()&&value},no_bias=function(){return bias=[0,0]},bias=no_bias(),graph=opt.graph||reel.math[opt.loops?'hatch':'envelope'],normal=reel.normal,recenter_mouse=function(revolution,x,y){var
            fraction=set(_clicked_on_,get(_fraction_)),tier=set(_clicked_tier_,get(_tier_)),loops=opt.loops
            set(_lo_,loops?0:-fraction*revolution);set(_hi_,loops?revolution:revolution-fraction*revolution);return x&&set(_clicked_location_,{x:x,y:y})||undefined},slidable=true,pools=pool
        try{if(pool[0]!=top.document)pools=pool.add(top.document)}catch(e){}var
            $iframe=top===self?$():(function sense_iframe($ifr){$('iframe',pools.last()).each(function(){try{if($(this).contents().find(_head_).html()==$(_head_).html())return($ifr=$(this))&&false}catch(e){}})return $ifr})()css.rules=[];on.setup();});ticker=ticker||(function tick(){var
        start=+new Date(),tempo=leader(_tempo_)if(!tempo)return ticker=null;pool.trigger(_tick_);reel.cost=(+new Date()+reel.cost-start)/2;return ticker=setTimeout(tick,max(4,1000/tempo-reel.cost));})();return $(instances);}else{if(typeof name=='string'){if(args.length==1){var
        value=data[name]t.trigger('recall',[name,value]);return value;}else{if(value!==undefined){reel.normal[name]&&(value=reel.normal[name](value,data));if(data[name]!==value)t.trigger(name+'Change',[undefined,data[name]=value]);}return t.trigger('store',[name,value]);}}}},unreel:function(){return this.trigger('teardown');}},re:{image:/^(.*)\.(jpg|jpeg|png|gif)\??.*$/i,ua:[/(msie|opera|firefox|chrome|safari)[ \/:]([\d.]+)/i,/(webkit)\/([\d.]+)/i,/(mozilla)\/([\d.]+)/i],touchy_agent:/iphone|ipod|ipad|android|fennec|rim tablet/i,lazy_agent:/\(iphone|ipod|android|fennec|blackberry/i,frame_klass:/frame-\d+/,sequence:/(^[^#|]*([#]+)[^#|]*)($|[|]([0-9]+)\.\.([0-9]+))($|[|]([0-9]+)$)/},cdn:'http://code.vostrel.cz/',math:{envelope:function(x,start,revolution,lo,hi,cwness,y){return start+min_max(lo,hi,-x*cwness)/revolution},hatch:function(x,start,revolution,lo,hi,cwness,y){var
        x=(x<lo?hi:0)+x%hi,fraction=start+(-x*cwness)/revolution
        return fraction-floor(fraction)},interpolate:function(fraction,lo,hi){return lo+fraction*(hi-lo)}},preload:{fidelity:function(sequence,opt,get){var
        orbital=opt.orbital,rows=orbital?2:opt.rows||1,frames=orbital?opt.footage:get(_frames_),start=(opt.row-1)*frames,values=new Array().concat(sequence),present=new Array(sequence.length+1),priority=rows<2?[]:values.slice(start,start+frames)return spread(priority,1,start).concat(spread(values,rows,0))function spread(sequence,rows,offset){if(!sequence.length)return[];var
        order=[],passes=4*rows,start=opt.frame,frames=sequence.length,plus=true,granule=frames/passes
        for(var i=0;i<passes;i++)add(start+round(i*granule));while(granule>1)for(var i=0,length=order.length,granule=granule/2,p=plus=!plus;i<length;i++)add(order[i]+(plus?1:-1)*round(granule));for(var i=0;i<=frames;i++)add(i);for(var i=0;i<order.length;i++)order[i]=sequence[order[i]-1];return order
        function add(frame){while(!(frame>=1&&frame<=frames))frame+=frame<1?+frames:-frames;return present[offset+frame]||(present[offset+frame]=!!order.push(frame))}}},linear:function(sequence,opt,get){return sequence}},normal:{fraction:function(fraction,data){return data[_options_].loops?fraction-floor(fraction):min_max(0,1,fraction)},tier:function(tier,data){return min_max(0,1,tier)},row:function(row,data){return round(min_max(1,data[_options_].rows,row))},frame:function(frame,data){var
        opt=data[_options_],frames=data[_frames_]*(opt.orbital?2:opt.rows||1),result=round(opt.loops?frame%frames||frames:min_max(1,frames,frame))return result<0?result+frames:result}},sequence:function(sequence,opt){if(sequence.length<=1)return opt.images;var
        images=[],orbital=opt.orbital,url=sequence[1],placeholder=sequence[2],start=+sequence[4]||1,rows=orbital?2:opt.rows||1,frames=orbital?opt.footage:opt.stitched?1:opt.frames,end=+(sequence[5]||rows*frames),total=end-start,increment=+sequence[7]||1,counter=0
        while(counter<=total){images.push(url.replace(placeholder,pad((start+counter+__),placeholder.length,'0')));counter+=increment;}return images;},instances:$(),leader:leader,cost:0},pool=$(document),client=navigator.userAgent,browser=reel.re.ua[0].exec(client)||reel.re.ua[1].exec(client)||reel.re.ua[2].exec(client),browser_version=+browser[2].split('.').slice(0,2).join('.'),ie=browser[1]=='MSIE',knows_data_urls=!(ie&&browser_version<8),ticker,klass='reel',overlay_klass=klass+'-overlay',indicator_klass=klass+'-indicator',preloader_klass=klass+'-preloader',cached_klass=klass+'-cached',monitor_klass=klass+'-monitor',annotation_klass=klass+'-annotation',panning_klass=klass+'-panning',loading_klass=klass+'-loading',frame_klass='frame-',math=Math,round=math.round,floor=math.floor,ceil=math.ceil,min=math.min,max=math.max,abs=math.abs,number=parseInt,interpolate=reel.math.interpolate,_annotations_='annotations',_area_='area',_auto_='auto',_backup_='backup',_backwards_='backwards',_bit_='bit',_brake_='brake',_cached_='cached',_center_='center',_clicked_='clicked',_clicked_location_='clicked_location',_clicked_on_='clicked_on',_clicked_tier_='clicked_tier',_cwish_='cwish',_dimensions_='dimensions',_fraction_='fraction',_frame_='frame',_frames_='frames',_hi_='hi',_hidden_='hidden',_image_='image',_images_='images',_opening_='opening',_opening_ticks_=_opening_+'_ticks',_lo_='lo',_options_='options',_playing_='playing',_preloaded_='preloaded',_reeling_='reeling',_reeled_='reeled',_revolution_='revolution',_revolution_y_='revolution_y',_row_='row',_rows_='rows',_spacing_='spacing',_speed_='speed',_stage_='stage',_stitched_shift_='stitched_shift',_stitched_travel_='stitched_travel',_stopped_='stopped',_style_='style',_tempo_='tempo',_tier_='tier',_velocity_='velocity',_vertical_='vertical',ns=dot(klass),pns=dot('pan')+ns,_touch_='touch',_mouse_='mouse',_mousedown_=_mouse_+'down'+ns,_mouseenter_=_mouse_+'enter'+ns,_mouseleave_=_mouse_+'leave'+pns,_mousemove_=_mouse_+'move'+pns,_mouseup_=_mouse_+'up'+pns,_mousewheel_=_mouse_+'wheel'+ns,_tick_='tick'+ns,_touchcancel_=_touch_+'cancel'+pns,_touchend_=_touch_+'end'+pns,_touchstart_=_touch_+'start'+ns,_touchmove_=_touch_+'move'+pns,__='',___=' ',____=',',_absolute_='absolute',_block_='block',_cdn_='@CDN@',_div_='div',_hand_='hand',_head_='head',_height_='height',_html_='html',_id_='id',_img_='img',_jquery_reel_='jquery.'+klass,_move_='move',_none_='none',_object_='object',_preload_='preload',_string_='string',_width_='width',transparent=knows_data_urls?embedded('CAAIAIAAAAAAAAAAACH5BAEAAAAALAAAAAAIAAgAAAIHhI+py+1dAAA7'):_cdn_+'blank.gif',reel_cursor=url(_cdn_+_jquery_reel_+'.cur')+____+_move_,drag_cursor=url(_cdn_+_jquery_reel_+'-drag.cur')+____+_move_,drag_cursor_down=url(_cdn_+_jquery_reel_+'-drag-down.cur')+____+_move_,touchy=reel.touchy=(reel.re.touchy_agent).test(client),lazy=reel.lazy=(reel.re.lazy_agent).test(client),DRAG_BUTTON=touchy?undefined:(ie&&browser_version<9)?1:0,cleanData=$.cleanData,cleanDataEvent=$.cleanData=function(elements){cleanData($(elements).each(function(){$(this).triggerHandler('clean');}));}$.extend($.fn,reel.fn);function add_instance($instance){return(reel.instances.push($instance[0]))&&$instance}function remove_instance($instance){return(reel.instances=reel.instances.not(hash($instance.attr(_id_))))&&$instance}function leader(key){return reel.instances.first().data(key)}function embedded(image){return'data:image/gif;base64,R0lGODlh'+image}function tag(string){return'<'+string+'/>'}function dot(string){return'.'+(string||'')}function cdn(path){return path.replace(_cdn_,reel.cdn)}function url(location){return'url(\''+reen(location)+'\')'}function axis(key,value){return typeof value==_object_?value[key]:value}function min_max(minimum,maximum,number){return max(minimum,min(maximum,number))}function negative_when(value,condition){return abs(value)*(condition?-1:1)}function finger(e){return touchy?e.touch||e.originalEvent.touches[0]:e}function px(value){return value===undefined?0:typeof value==_string_?value:value+'px'}function hash(value){return'#'+value}function pad(string,len,fill){while(string.length<len)string=fill+string;return string}function reen(uri){return encodeURI(decodeURI(uri))}function deprecated(input){try{console.warn('Deprecation - Please consult https://github.com/pisi/Reel/wiki/Deprecations')}catch(e){}return input}})(jQuery,window,document);